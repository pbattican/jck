###########################
# Belgrade Pact Events
###########################

add_namespace = pact

###########################
# Formation of the Pact
###########################

# Belgrade pact formed
country_event = {
	id = pact.1
	title = pact.1.t
	desc = pact.1.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.1 option pact.1.a"
		name = pact.1.a # Open the Congress
		add_war_support = 0.05
		set_country_flag = SER_founded_belgradepact
		create_faction = Belgrade_Pact
		add_named_threat = {
			threat = 4
			name = SER_belgrade_pact_threat
		}
		hidden_effect = {
			add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_anti_bulgaria }
			reverse_add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_joined_against_us }
			every_country = {
				limit = {
					OR = {
						tag = GER
						tag = AUS
						is_subject_of = AUS
						is_subject_of = GER
						tag = ALB
					}
				}
				add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_joined_boo }
			}
			country_event = { id = pact.5 days = 30 }
			AUS = {
				country_event = { id = pact.6 days = 14 }
			}
			TUR = { country_event = ottfor.5 }
		}
	}
}

# Invitation to the Belgrade Pact
country_event = {
	id = pact.2
	title = pact.2.t
	desc = pact.2.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.2 option pact.2.a"
		name = pact.2.a # Join the Belgrade Pact

		SER = {
			add_to_faction = ROOT
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_joined_yay }
			hidden_effect = { country_event = pact.3 } # Notify Serbia of joining
		}
		reverse_add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_joined_against_us }

		hidden_effect = {
			add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_anti_bulgaria }

			every_country = {
				limit = {
					OR = {
						tag = GER
						tag = AUS
						is_subject_of = AUS
						is_subject_of = GER
						tag = ALB
					}
				}
				add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_joined_boo }
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.2 option pact.2.b"
		name = pact.2.b # We have no interest
		ai_chance = { base = 0 }

		add_war_support = -0.1

		SER = {
			country_event = pact.4 # Notify Serbia of the refusal
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_refused }
		}

		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						tag = BUL
						tag = GER
						tag = AUS
						is_subject_of = GER
						is_subject_of = AUS
						tag = ALB
					}
				}
				add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_did_not_join_yay }
			}
		}
	}
}

# A country joins the pact
country_event = {
	id = pact.3
	title = pact.3.t
	desc = pact.3.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.3 option pact.3.a"
		name = pact.3.a # Welcome
		effect_tooltip = {
			add_to_faction = FROM
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_country_flag = SER_pactnews }
					GRE = {
						OR = {
							exists = no
							has_war = yes
							is_in_faction_with = ROOT
						}
					}
					ROM = {
						OR = {
							exists = no
							has_war = yes
							is_in_faction_with = ROOT
						}
					}
					MNT = {
						OR = {
							exists = no
							has_war = yes
							is_in_faction_with = ROOT
						}
					}
				}
				set_country_flag = SER_pactnews
				news_event = { id = worldnews.18 days = 1 }
			}
		}
	}
}

# A country refuses to join the pact
country_event = {
	id = pact.4
	title = pact.4.t
	desc = pact.4.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.4 option pact.4.a"
		name = pact.4.a # We don't need them
	}
}

# Dissolution of the pact if nobody joins
country_event = {
	id = pact.5
	title = pact.5.t
	desc = pact.5.d
	picture = GFX_report_event_generic_conference

	fire_only_once = yes

	trigger = {
		tag = SER
		has_country_flag = { flag = SER_founded_belgradepact days > 30 }
		is_faction_leader = yes
		has_war = no
		NOT = {
			any_allied_country = {
				is_subject = no
			}
			ROM = {
				is_in_belgrade_pact = no
			}
			GRE = {
				is_in_belgrade_pact = no
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.5 option pact.5.a"
		name = pact.5.a
		dismantle_faction = yes
		if = {
			limit = { NOT = { has_global_flag = balkan_war_ended } }
			clr_country_flag = SER_founded_belgradepact
		}
	}
}

###########################
# Support for Bulgaria
###########################

# Formation of the Belgrade Pact (Austria)
country_event = {
	id = pact.6
	title = pact.6.t
	desc = pact.6.d
	picture = GFX_report_event_soviet_finnish_pact
	is_triggered_only = yes
	option = {
		log = "[GetLogInfo]: event pact.6 option pact.6.a"
		name = pact.6.a # Support Bulgaria
		ai_chance = { base = 100 }
		every_country = {
			limit = {
				is_in_belgrade_pact = yes
			}
			add_ideas = belgrade_part_arms_embargo
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_supported_enemy }
			country_event = pact.7
		}
		set_country_flag = SER_supported_bulgaria
		GER = { country_event = pact.8 }
		ALB = { country_event = pact.8 }
		BUL = {
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_supported_us }
		}
	}
	option = {
		log = "[GetLogInfo]: event pact.6 option pact.6.b"
		name = pact.6.b # Avoid the Balkans
		ai_chance = { base = 0 }
		add_political_power = -5
	}
}
# Arms embargo!
country_event = {
	id = pact.7
	title = pact.7.t
	desc = pact.7.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.7 option pact.7.a"
		name = pact.7.a # This is not good
		if = {
			limit = {
				FROM = {
					tag = AUS
				}
			}
			effect_tooltip = {
				add_ideas = belgrade_part_arms_embargo
			}
		}
	}
}

# Join the embargo?
country_event = {
	id = pact.8
	title = pact.8.t
	desc = pact.8.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.8 option pact.8.a"
		name = pact.8.a # Support Bulgaria
		ai_chance = {
			base = 60
			modifier = {
				factor = 0
				has_game_rule = { rule = ALB_forpol option = ALB_FORPOL_ROM }
				has_game_rule = { rule = ALB_forpol option = ALB_FORPOL_4BW }
			}
		}
		every_country = {
			limit = {
				is_in_belgrade_pact = yes
			}
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_supported_enemy }
			country_event = pact.7
		}
		set_country_flag = SER_supported_bulgaria
		BUL = {
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_supported_us }
		}
	}
	option = {
		log = "[GetLogInfo]: event pact.8 option pact.8.b"
		name = pact.8.b # Avoid the Balkans
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				tag = ALB
				OR = {
					has_game_rule = { rule = BPL_war option = BPL_WAR_BUL_ALB_BPL }
					has_game_rule = { rule = BPL_war option = BPL_WAR_BUL_ALB_BPL_OTT }
				}
				NOT = {
					has_game_rule = { rule = ALB_forpol option = ALB_FORPOL_ROM }
					has_game_rule = { rule = ALB_forpol option = ALB_FORPOL_4BW }
				}
			}
		}
		add_political_power = -5
	}
}

###########################
# War starts
###########################

# Bulgaria: Ultimatum from Serbia
country_event = {
	id = pact.17
	title = pact.17.t
	desc = pact.17.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.17 option pact.17.a"
		name = pact.17.a # Then it is war
		swap_ideas = {
			remove_idea = BUL_waning_hegemony
			add_idea = BUL_waning_hegemony_2
		}
		effect_tooltip = {
			SER = {
				declare_war_on = {
					target = BUL
					type = annex_everything
				}
			}
		}
	}
}

# Bulgaria: warned that Ottomans are on the move
country_event = {
	id = pact.25
	title = pact.25.t
	desc = pact.25.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.25 option pact.25.a"
		name = pact.25.a
		add_opinion_modifier = { target = TUR modifier = KR_disapproves_of_govt }
	}
}

# Romania/Greece - Should we accept the deal
country_event = {
	id = pact.27
	title = pact.27.t
	desc = pact.27.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.27 option pact.27.a"
		name = pact.27.a # Ye
	}

	option = {
		log = "[GetLogInfo]: event pact.27 option pact.27.b"
		name = pact.27.b # Nah
		ai_chance = { base = 0 }
		leave_faction = yes
		custom_effect_tooltip = BP_temporary_breakaway_tt
		set_country_flag = BP_temporary_breakaway
		if = {
			limit = {
				tag = ROM
				has_war_with = ALB
				ALB = {
					is_valid_peace_target = yes
					OR = {
						has_country_flag = ALB_joined_BUL_war
						has_guaranteed = BUL
						has_war_together_with = BUL
					}
				}
			}
			ALB = { white_peace_with_ROOT = yes }
		}
		hidden_effect = {
			country_event = { id = pact.29 days = 3 }
		}
	}
}

# Serbia: Peace processing
country_event = {
	id = pact.28
	title = pact.28.t
	desc = pact.28.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.28 option pact.28.a"
		name = pact.28.a # We are triumphant!
		add_stability = 0.1
		set_global_flag = balkan_war_ended

		if = {
			limit = {
				SER_has_scarred_nation = yes
			}
			SER_reduce_scars = yes
		}
		if = {
			limit = {
				has_active_mission = SER_prove_to_the_people
			}
			add_days_mission_timeout = {
				mission = SER_prove_to_the_people
				days = 90
			}
		}
		if = {
			limit = {
				has_active_mission = SER_defang_the_army
			}
			add_days_mission_timeout = {
				mission = SER_defang_the_army
				days = 90
			}
		}
		if = {
			limit = {
				has_active_mission = SER_merge_the_coalition_parties
			}
			add_days_mission_timeout = {
				mission = SER_merge_the_coalition_parties
				days = 90
			}
		}

		BUL = {
			white_peace_with_ROOT = yes
			remove_ideas = has_scripted_peace
		}

		# separate peace for Ottomans if they joined the war
		hidden_effect = {
			184 = {
				if = {
					limit = {
						is_owned_by = BUL
						is_core_of = TUR
						OR = {
							is_controlled_by = TUR
							AND = {
								is_controlled_by = BUL
								TUR = {
									is_ai = no
									has_war_with = BUL
								}
							}
						}
					}
					set_state_flag = SER_transfer_to_OTT
				}
			}
			1089 = {
				if = {
					limit = {
						is_owned_by = BUL
						is_core_of = TUR
						184 = { has_state_flag = SER_transfer_to_OTT }
					}
					set_state_flag = SER_transfer_to_OTT
				}
			}
			if = {
				limit = {
					TUR = { has_country_flag = OTT_war_for_thrace }
				}
				TUR = {
					country_event = { id = pact.39 hours = 8 }
				}
			}
		}

		# separate peace for Albania if it joined the war
		if = {
			limit = {
				ALB = {
					has_war_with = SER
					is_valid_peace_target = yes
					OR = {
						has_country_flag = ALB_joined_BUL_war
						has_guaranteed = BUL
						has_war_together_with = BUL
					}
				}
			}
			ALB = {
				white_peace_with_ROOT = yes
			}
		}

		# cede disputed land with custom effect
		belgrade_pact_gain_land_from_bulgaria = yes

		every_country = {
			limit = { is_subject_of = BUL }
			BUL = {
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_free
				}
			}
		}

		hidden_effect = {
			# Let Bulgaria know that Serbia accepted the peace offer
			BUL = { country_event = pact.37 }

			# Let all other Pact members know that peace is signed
			every_other_country = {
				limit = {
					is_in_faction_with = SER
				}
				country_event = pact.38
			}
		}
	}
}
country_event = {
	id = pact.29
	title = pact.29.t
	desc = pact.29.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.29 option pact.29.a"
		name = pact.29.a # Shit
		add_ideas = BP_war_exhaustion
	}
}
# Reinvitation to the Belgrade Pact
country_event = {
	id = pact.30
	title = pact.30.t
	desc = pact.30.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.30 option pact.30.a"
		name = pact.30.a # Join the Belgrade Pact
		ai_chance = { base = 100 }

		SER = {
			add_to_faction = ROOT
			hidden_effect = { country_event = pact.3 } # Notify Serbia of joining
		}
		clr_country_flag = BP_temporary_breakaway
	}

	option = {
		log = "[GetLogInfo]: event pact.30 option pact.30.b"
		name = pact.30.b # We have no interest
		ai_chance = { base = 0 }
		SER = {
			country_event = pact.4 # Notify Serbia of the refusal
		}
		clr_country_flag = BP_temporary_breakaway
	}
}

###########################
# Peace events
###########################

### Bulgaria: we're losing, sue for peace?
country_event = {
	id = pact.35
	title = pact.35.t
	desc = pact.35.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = BUL
		has_war_with = BPL
		is_valid_peace_target = yes
		surrender_progress > 0.6
		SER = { has_country_flag = SER_founded_belgradepact }
		NOT = { has_global_flag = balkan_war_ended }
	}

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		hidden_effect = { add_ideas = has_scripted_peace }
	}

	option = {
		log = "[GetLogInfo]: event pact.35 option pact.35.a"
		name = pact.35.a # Sue for peace.
		add_stability = -0.1
		BPL = { country_event = pact.36 } # Send the peace offer to Serbia
		custom_effect_tooltip = BUL_other_states_may_continue_war_tt
	}
	option = {
		log = "[GetLogInfo]: event pact.35 option pact.35.b"
		name = pact.35.b # We can still win this!
		ai_chance = { base = 0 }
		add_war_support = -0.2
		remove_ideas = has_scripted_peace
	}
}

# Serbia: Bulgaria asks for peace
country_event = {
	id = pact.36
	title = pact.36.t
	desc = pact.36.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.36 option pact.36.a"
		name = pact.36.a # We are triumphant!
		custom_effect_tooltip = SER_other_states_may_continue_war_tt
		hidden_effect = {
			every_other_country = {
				limit = {
					is_in_faction_with = SER
				}
				country_event = pact.27
			}
			country_event = { id = pact.28 days = 3 }
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.36 option pact.36.b"
		name = pact.36.b # They will be crushed
		ai_chance = { base = 0 }
		BUL = {
			country_event = pact.46 # Notify Bulgaria of refusal
		}
		hidden_effect = {
			every_country = {
				limit = { is_in_faction_with = SER }
				country_event = pact.29
			}
		}
	}
}

# Bulgaria: Serbia accepted our peace offer
country_event = {
	id = pact.37
	title = pact.37.t
	desc = pact.37.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.37 option pact.37.a"
		name = pact.37.a # At least we exist!
		set_country_flag = BUL_balkan_peace_loss
		if = {
			limit = { has_idea = GER_mil_support_idea }
			remove_ideas = GER_mil_support_idea
		}
		mark_focus_tree_layout_dirty = yes
		unlock_national_focus = BUL_balkan_war_defeat
		if = {
			limit = {
				OR = {
					has_idea = limited_conscription
					has_idea = extensive_conscription
					has_idea = service_by_requirement
					has_idea = all_adults_serve
					has_idea = scraping_the_barrel
				}
			}
			add_ideas = volunteer_only
		}
		if = {
			limit = { NOT = { has_idea = civilian_economy } }
			add_ideas = civilian_economy
		}
		if = {
			limit = { is_ai = yes }
			hidden_effect = {
				country_event = { id = kr.political.121 days = 3 }
			}
		}
		effect_tooltip = {
			SER = {
				white_peace = BUL
			}
		}
	}
}

# Pact members: peace signed
country_event = {
	id = pact.38
	immediate = { log = "KR_Event_Logging;The Pact WINS 4BW;[GetDateText]" }
	title = pact.38.t
	desc = pact.38.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.38 option pact.38.a"
		name = pact.38.a # The Belgrade Pact stands triumphant!
		add_stability = 0.1

		effect_tooltip = {
			SER = {
				white_peace = BUL
			}
		}
	}
}

# Ottomans: Serbia made peace
country_event = {
	id = pact.39
	title = pact.39.t
	picture = GFX_report_event_generic_sign_treaty2

	desc = {
		text = pact.39.d.gained
		trigger = {
			184 = { has_state_flag = SER_transfer_to_OTT }
		}
	}
	desc = {
		text = pact.39.d.nogain
		trigger = {
			NOT = { 184 = { has_state_flag = SER_transfer_to_OTT } }
		}
	}

	timeout_days = 4
	is_triggered_only = yes

	trigger = {
		has_war_with = BUL
		has_country_flag = OTT_war_for_thrace
	}

	option = {
		log = "[GetLogInfo]: event pact.39 option pact.39.a"
		name = pact.39.a #End the war
		ai_chance = { base = 100 }
		clr_country_flag = OTT_war_for_thrace
		BUL = {
			if = {
				limit = { owns_state = 184 }
				184 = { transfer_state_to = ROOT }
				if = {
					limit = { owns_state = 1089 }
					1089 = { transfer_state_to = ROOT }
				}
			}
			white_peace_with_ROOT = yes
		}
		if = {
			limit = {
				ALB = {
					has_war_with = TUR
					is_valid_peace_target = yes
					OR = {
						has_country_flag = ALB_joined_BUL_war
						has_guaranteed = BUL
						has_war_together_with = BUL
					}
				}
			}
			ALB = { white_peace_with_ROOT = yes }
		}
		every_state = {
			limit = { has_state_flag = SER_transfer_to_OTT }
			clr_state_flag = SER_transfer_to_OTT
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.39 option pact.39.b"
		name = pact.39.b #Continue the war
		ai_chance = { base = 0 }
		add_political_power = -50
		every_state = {
			limit = { has_state_flag = SER_transfer_to_OTT }
			clr_state_flag = SER_transfer_to_OTT
		}
	}
}

### Ottomans: We have what we came for - make peace?
country_event = {
	id = pact.40
	title = pact.40.t
	desc = pact.40.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = TUR
		has_war_with = BUL
		has_country_flag = OTT_war_for_thrace
		is_valid_peace_target = yes
		BUL = { is_valid_peace_target = yes }
		184 = {
			is_owned_by = BUL
			OR = {
				is_controlled_by = TUR
				is_controlled_by = BUL
			}
		}
		if = {
			limit = { controls_state = 48 }
			BUL = { surrender_progress > 0.5 }
			1089 = {
				OR = {
					is_controlled_by = TUR
					is_controlled_by = BUL
					NOT = { is_owned_by = BUL }
				}
			}
		}
		else = {
			184 = {
				OR = {
					is_controlled_by = TUR
					NOT = { is_owned_by = BUL }
				}
			}
			1089 = {
				OR = {
					is_controlled_by = TUR
					NOT = { is_owned_by = BUL }
				}
			}
		}
		controls_state = 341 #Adrianople
		controls_state = 773 #Constantinople
		BUL = {
			OR = {
				has_war_with = SER
				surrender_progress > 0.4
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		log = "[GetLogInfo]: event pact.40 option pact.40.a"
		name = pact.40.a #Make peace
		BUL = { country_event = pact.41 }
	}
	option = {
		log = "[GetLogInfo]: event pact.40 option pact.40.b"
		name = pact.40.b #Continue the war!
		ai_chance = { base = 0 }
		clr_country_flag = OTT_war_for_thrace
		add_political_power = -100
		add_war_support = -0.10
	}
}

# Bulgaria: Make peace with Ottomans?
country_event = {
	id = pact.41
	title = pact.41.t
	desc = pact.41.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.41 option pact.41.a"
		name = pact.41.a #Agree

		trigger = {
			always = no
		}

		add_political_power = -50
		if = {
			limit = { owns_state = 184 }
			184 = {
				transfer_state_to = TUR
				if = {
					limit = { 341 = { OTT_is_autonomous_region = yes } } #Adrianople
					ott_set_authority_vilayet_low = yes
				}
				else_if = {
					limit = { 341 = { OTT_is_vilayet = yes } } #Adrianople
					ott_set_authority_vilayet_medium = yes
				}
				else = {
					ott_set_authority_vilayet_high = yes
				}
			}
			if = {
				limit = { owns_state = 1089 }
				1089 = {
					transfer_state_to = TUR
					if = {
						limit = { 341 = { OTT_is_autonomous_region = yes } } #Adrianople
						ott_set_authority_vilayet_low = yes
					}
					else_if = {
						limit = { 341 = { OTT_is_vilayet = yes } } #Adrianople
						ott_set_authority_vilayet_medium = yes
					}
					else = {
						ott_set_authority_vilayet_high = yes
					}
				}
			}
		}
		TUR = {
			clr_country_flag = OTT_war_for_thrace
			white_peace_with_ROOT = yes
			save_event_target_as = white_peace_receiver
		}

		# separate peace for Albania if it joined the war
		if = {
			limit = {
				ALB = {
					has_war_with = TUR
					is_valid_peace_target = yes
					OR = {
						has_country_flag = ALB_joined_BUL_war
						has_guaranteed = BUL
						has_war_together_with = BUL
					}
				}
			}
			ALB = {
				white_peace_with_TARGET = yes
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event pact.41 option pact.41.b"
		name = pact.41.b #No peace
		ai_chance = { base = 0 }
		add_war_support = -0.10
		TUR = {
			clr_country_flag = OTT_war_for_thrace
			country_event = pact.46
		}
	}
}

### Ottomans: we are losing the war
country_event = {
	id = pact.42
	title = pact.42.t
	desc = pact.42.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = TUR
		has_war_with = BUL
		has_country_flag = OTT_war_for_thrace
		is_valid_peace_target = yes
		BUL = { is_valid_peace_target = yes }
		NOT = {
			controls_state = 184 #Western Thrace
			controls_state = 1089 #Kardzhali
			controls_state = 341 #Adrianople
			controls_state = 773 #Constantinople
		}
	}

	mean_time_to_happen = {
		days = 15
	}

	option = {
		log = "[GetLogInfo]: event pact.42 option pact.42.a"
		name = pact.42.a #Make peace
		BUL = { country_event = pact.43 }
	}
	option = {
		log = "[GetLogInfo]: event pact.42 option pact.42.b"
		name = pact.42.b #Refuse
		ai_chance = { base = 0 }
		add_political_power = -100
		add_war_support = -0.10
	}
}

# Bulgaria: end the war?
country_event = {
	id = pact.43
	title = pact.43.t
	desc = pact.43.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { NOT = { has_country_flag = BUL_balkan_peace_loss } }
			add_state_claim = 341 #Adrianople
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.43 option pact.43.a"
		name = pact.43.a #Make peace
		184 = { remove_core_of = TUR }
		1089 = { remove_core_of = TUR }
		TUR = {
			every_owned_state = {
				limit = { is_claim_or_core_of_ROOT = yes }
				transfer_state_to = BUL
			}
			clr_country_flag = OTT_war_for_thrace
			white_peace_with_ROOT = yes
			save_event_target_as = white_peace_receiver
		}

		# separate peace for Albania if it joined the war
		if = {
			limit = {
				ALB = {
					has_war_with = TUR
					is_valid_peace_target = yes
					OR = {
						has_country_flag = ALB_joined_BUL_war
						has_guaranteed = BUL
						has_war_together_with = BUL
					}
				}
			}
			ALB = {
				white_peace_with_TARGET = yes
			}
		}
	}
	option = {
		trigger = {
			always = no
		}
		name = pact.43.b #Refuse
		ai_chance = { base = 0 }
		add_war_support = -0.10
		TUR = {
			country_event = pact.46
		}
	}
}

# <country> refuses our peace offer
country_event = {
	id = pact.46
	title = pact.46.t
	desc = pact.46.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.46 option pact.46.a"
		name = pact.46.a # We need to turn the tide
		add_war_support = 0.10
		remove_ideas = has_scripted_peace
	}
}

### Serbia: we're losing, sue for peace?
country_event = {
	id = pact.47
	title = pact.47.t
	desc = pact.47.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = BPL
		has_war_with = BUL
		is_faction_leader = yes

		has_global_flag = balkan_war_started
		NOT = { has_global_flag = balkan_war_ended }
		BUL = {
			is_valid_peace_target = yes
			surrender_progress < 0.6
		}

		# All members have to be in a bad shape
		OR = {
			count_triggers = {
				amount = 2
				SER = {
					has_capitulated = yes
					has_war_with = BUL
				}
				ROM = {
					has_capitulated = yes
					has_war_with = BUL
				}
				GRE = {
					has_capitulated = yes
					has_war_with = BUL
				}
			}
			AND = {
				if = {
					limit = { SER = { has_war_with = BUL } }
					SER = { num_of_controlled_states < 2 }
				}
				if = {
					limit = { ROM = { has_war_with = BUL } }
					ROM = { surrender_progress > 0.60 }
				}
				if = {
					limit = { GRE = { has_war_with = BUL } }
					GRE = { num_of_controlled_states < 2 }
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		log = "[GetLogInfo]: event pact.47 option pact.47.a"
		name = pact.47.a # Sue for peace.
		BUL = { country_event = pact.48 }
	}

	option = {
		log = "[GetLogInfo]: event pact.47 option pact.47.b"
		name = pact.47.b # We can still win this
		ai_chance = { base = 0 }
		add_political_power = -100
	}
}

# Bulgaria: Serbia offers peace
country_event = {
	id = pact.48
	title = pact.48.t
	desc = pact.48.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			every_enemy_country = {
				limit = {
					is_ally_with = SER
				}
				set_country_flag = SER_joined_balkan_war
			}
			SER = {
				save_event_target_as = white_peace_receiver
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.48 option pact.48.a"
		name = pact.48.a # We are triumphant
		set_global_flag = balkan_war_ended
		add_political_power = 200

		SER = {
			white_peace_with_ROOT = yes
			hidden_effect = { set_faction_leader = yes }
		}

		# separate peace for Albania if it joined the war
		if = {
			limit = {
				ALB = {
					has_war_with = SER
					is_valid_peace_target = yes
					OR = {
						has_country_flag = ALB_joined_BUL_war
						has_guaranteed = BUL
						has_war_together_with = BUL
					}
				}
			}
			ALB = { white_peace_with_TARGET = yes }
		}

		effect_tooltip = {
			SER = { dismantle_faction = yes }
		}

		every_state = {
			limit = {
				owner = { has_country_flag = SER_joined_balkan_war }
				OR = {
					state = 767 #Nish
					state = 106 #Macedonia
					state = 772 #Dobrudja
					state = 77 #Silistria
					#state = 1076 #Southern Macedonia
					state = 989 #Salonika
					state = 731 #Western Macedonia
					state = 769 #Eastern Macedonia
					state = 184 #Western Thrace
					is_claim_or_core_of_ROOT = yes
				}
			}
			if = {
				limit = {
					NOT = {
						state = 731
						is_claim_or_core_of_ROOT = yes
					}
				}
				add_claim_by = BUL
			}
			if = {
				limit = {
					state = 731
					NOT = { is_core_of = BUL }
				}
				add_core_of = BUL
			}
			transfer_state_to = BUL
		}
		if = {
			limit = {
				SER = {
					owns_state = 105
				}
			}
			MNT = {
				transfer_state = 105 #Montenegro
			}
			SER = {
				remove_ideas = SER_konspiracija_idea
			}
		}

		if = {
			limit = {
				ROM = {
					has_country_flag = SER_joined_balkan_war
					owns_state = 81
				}
			}
			81 = { set_demilitarized_zone = yes } # Oltenia
			ROM = { country_event = romania.240 } #Fall of Carol-Legionary government
		}
		if = {
			limit = {
				GRE = {
					has_country_flag = SER_joined_balkan_war
					owns_state = 1076
				}
			}
			1076 = { set_demilitarized_zone = yes } # Thessalia
		}
		if = {
			limit = {
				ALB = {
					is_subject = yes
					overlord = { has_country_flag = SER_joined_balkan_war }
				}
			}
			ALB = {
				overlord = {
					set_autonomy = {
						target = ALB
						autonomy_state = autonomy_free
					}
				}
			}
			every_state = {
				limit = {
					owner = { has_country_flag = SER_joined_balkan_war }
					OR = {
						is_core_of = ALB
						is_claimed_by = ALB
					}
				}
				set_demilitarized_zone = yes
			}
		}
		else_if = {
			limit = {
				ALB = { has_country_flag = ALB_joined_BUL_war }
			}
			every_state = {
				limit = {
					owner = { has_country_flag = SER_joined_balkan_war }
					OR = {
						is_core_of = ALB
						is_claimed_by = ALB
					}
				}
				transfer_state_to = ALB
			}
		}

		add_timed_idea = {
			idea = BUL_reparation_payments_from_serbia
			days = 1460
		}

		hidden_effect = {
			# Notify all Pact members of peace
			country_event = { id = bulgaria.54 days = 60 random_days = 7 }
			SER = {
				country_event = { id = pact.49 hours = 4 }
			}
			if = {
				limit = {
					ROM = { has_country_flag = SER_joined_balkan_war }
				}
				ROM = {
					country_event = { id = pact.50 hours = 4 }
				}
			}
			if = {
				limit = {
					GRE = { has_country_flag = SER_joined_balkan_war }
				}
				GRE = {
					country_event = { id = pact.51 hours = 4 }
				}
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event pact.48 option pact.48.b"
		name = pact.48.b # No, they shall be crushed.
		ai_chance = { base = 0 }
		add_political_power = -100
		SER = { country_event = pact.46 } # Notify Serbia of refusal
	}
}

# Serbia: peace was signed, we lost the war
country_event = {
	id = pact.49
	immediate = { log = "KR_Event_Logging;Bulgaria WINS 4BW;[GetDateText]" }
	title = pact.49.t
	desc = pact.49.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.49 option pact.49.a"
		name = pact.49.a # At least we exist
		clr_country_flag = SER_joined_balkan_war
		dismantle_faction = yes
		add_timed_idea = {
			idea = SER_reparation_payments
			days = 1460
		}
	}
}

# Romania: peace was signed, we lost the war
country_event = {
	id = pact.50
	title = pact.50.t
	desc = pact.50.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.50 option pact.50.a"
		name = pact.50.a # At least we exist
		clr_country_flag = SER_joined_balkan_war
		effect_tooltip = {
			SER = { dismantle_faction = yes }
		}
	}
}

# Greece: peace was signed, we lost the war
country_event = {
	id = pact.51
	title = pact.51.t
	desc = pact.51.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.51 option pact.51.a"
		name = pact.51.a # At least we exist
		clr_country_flag = SER_joined_balkan_war
		effect_tooltip = {
			SER = { dismantle_faction = yes }
		}

		hidden_effect = {
			country_event = { id = gre.17 days = 5 } # Massive demonstrations after Balkan War loss
		}
	}
}

# Double-check balkan war ending global
country_event = {
	id = pact.52
	title = pact.52.t
	desc = pact.52.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		OR = {
			tag = SER
			tag = BUL
		}
		has_global_flag = balkan_war_started
		if = {
			limit = { tag = SER }
			NOT = { has_war_with = BUL }
		}
		if = {
			limit = { tag = BUL }
			NOT = { has_war_with = SER }
		}
		NOT = { has_global_flag = balkan_war_ended }
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		log = "[GetLogInfo]: event pact.52 option pact.52.a"
		name = pact.52.a
		set_global_flag = balkan_war_ended
	}
}

# Double-check removal of Ottoman war flag
country_event = {
	id = pact.53
	title = pact.53.t
	desc = pact.53.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = TUR
		has_country_flag = OTT_war_for_thrace
		NOT = { has_war_with = BUL }
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		log = "[GetLogInfo]: event pact.53 option pact.53.a"
		name = pact.53.a
		clr_country_flag = OTT_war_for_thrace
	}
}

###########################
# Albania vs. the Belgrade Pact
# (and other bad choices)
###########################

### Albania: start of the war, support Bulgaria?
country_event = {
	id = pact.70
	title = pact.70.t
	desc = pact.70.d
	picture = GFX_report_event_czech_soldiers_02

	trigger = {
		tag = ALB
		has_country_flag = SER_supported_bulgaria
		is_subject = no
		can_declare_war_on = SER
		SER = {
			has_country_flag = SER_founded_belgradepact
			is_faction_leader = yes
			has_war_with = BUL
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 14
	}

	option = {
		log = "[GetLogInfo]: event pact.70 option pact.70.a"
		name = pact.70.a # Send aid
		trigger = {
			OR = {
				has_manpower > 1000
				has_equipment = { infantry_equipment > 1000 }
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = BPL_war option = BPL_WAR_BUL_ALB_BPL }
					has_game_rule = { rule = BPL_war option = BPL_WAR_BUL_ALB_BPL_OTT }
					has_game_rule = { rule = ALB_forpol option = ALB_FORPOL_ROM }
					has_game_rule = { rule = ALB_forpol option = ALB_FORPOL_4BW }
				}
			}
		}

		add_manpower = -1000
		hidden_effect = {
			BUL = { add_manpower = 1000 }
		}
		send_equipment = {
			target = BUL
			type = infantry_equipment
			amount = 1000
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.70 option pact.70.b"
		name = pact.70.b # Offer an alliance
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = BPL_war option = BPL_WAR_BUL_BPL }
					has_game_rule = { rule = BPL_war option = BPL_WAR_BUL_BPL_OTT }
					has_game_rule = { rule = ALB_forpol option = ALB_FORPOL_ROM }
					has_game_rule = { rule = ALB_forpol option = ALB_FORPOL_4BW }
				}
			}
		}
		BUL = {
			country_event = { id = pact.71 days = 1 }
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.70 option pact.70.c"
		name = pact.70.c # We can't do anything
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = BPL_war option = BPL_WAR_BUL_ALB_BPL }
					has_game_rule = { rule = BPL_war option = BPL_WAR_BUL_ALB_BPL_OTT }
				}
				NOT = {
					has_game_rule = { rule = ALB_forpol option = ALB_FORPOL_ROM }
					has_game_rule = { rule = ALB_forpol option = ALB_FORPOL_4BW }
				}
			}
		}
		clr_country_flag = SER_supported_bulgaria
	}
}

# Bulgaria: The Albanians offer an alliance
country_event = {
	id = pact.71
	title = pact.71.t
	desc = pact.71.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	trigger = {
		has_war_with = SER
	}

	option = {
		log = "[GetLogInfo]: event pact.71 option pact.71.a"
		name = pact.71.a # Of course
		ai_chance = {
			base = 80
			modifier = {
				factor = 0.5
				NOT = {
					GRE = { is_in_faction_with = SER }
				}
			}
		}
		ALB = {
			country_event = { id = pact.72 hours = 4 }
			add_to_war = {
				targeted_alliance = BUL
				enemy = SER
			}
		}
		hidden_effect = {
			BUL = { give_military_access = ALB }
			ALB = { give_military_access = BUL }
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.71 option pact.71.b"
		name = pact.71.b # We don't need them.
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = BPL_war option = BPL_WAR_BUL_ALB_BPL }
					has_game_rule = { rule = BPL_war option = BPL_WAR_BUL_ALB_BPL_OTT }
				}
			}
		}
		ALB = {
			country_event = { id = pact.73 hours = 4 }
		}
	}
}

# Albania: Bulgaria accepts our alliance
country_event = {
	id = pact.72
	title = pact.72.t
	desc = pact.72.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.72 option pact.72.a"
		name = pact.72.a # Together, we will defeat the Belgrade Pact.
		set_country_flag = ALB_joined_BUL_war
		effect_tooltip = {
			add_to_war = {
				targeted_alliance = BUL
				enemy = SER
			}
		}
	}
}

# Albania: Bulgaria refuses our alliance
country_event = {
	id = pact.73
	title = pact.73.t
	desc = pact.73.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.73 option pact.73.a"
		name = pact.73.a # Good luck on your own then.
		clr_country_flag = SER_supported_bulgaria
	}
}

### Albania: we're losing, sue for peace?
country_event = {
	id = pact.74
	title = pact.74.t
	desc = pact.74.d

	trigger = {
		tag = ALB
		has_country_flag = ALB_joined_BUL_war

		BUL = {
			OR = {
				exists = no
				is_subject = yes
				NOT = { has_war_with = SER }
				surrender_progress > 0.50
			}
		}

		has_war_with = SER
		SER = { is_faction_leader = yes }

		surrender_progress > 0.25
	}

	mean_time_to_happen = {
		days = 3
	}

	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event pact.74 option pact.74.a"
		name = pact.74.a # Sue for peace.
		add_political_power = -50
		SER = { country_event = pact.75 } # Send the peace offer to Serbia
	}
	option = {
		log = "[GetLogInfo]: event pact.74 option pact.74.b"
		name = pact.74.b # We can still win this!
		ai_chance = { base = 0 }
		clr_country_flag = ALB_joined_BUL_war
		add_political_power = -100
	}
}

# Serbia: The Albanians offer peace
country_event = {
	id = pact.75
	title = pact.75.t
	desc = pact.75.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.75 option pact.75.a"
		name = pact.75.a # The Belgrade Pact stands triumphant
		ALB = { white_peace_with_ROOT = yes }

		belgrade_pact_gain_land_from_albania = yes

		hidden_effect = {
			# Notify all Pact members
			every_other_country = {
				limit = {
					is_in_faction_with = SER
				}
				country_event = pact.77
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event pact.75 option pact.75.b"
		name = pact.75.b # No, they shall be crushed
		ai_chance = { base = 0 }
		add_political_power = -100
		ALB = { country_event = pact.46 } # Notify Albanians of refusal
	}
}

# Pact members: Peace with the Albania
country_event = {
	id = pact.77
	title = pact.77.t
	desc = pact.77.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.77 option pact.77.a"
		name = pact.77.a # Belgrade Pact stands triumphant
		effect_tooltip = {
			SER = { white_peace = ALB }
		}
	}
}

### Serbia: Defeated Bulgaria but Albanians are pushing us back
country_event = {
	id = pact.78
	title = pact.78.t
	desc = pact.78.d
	picture = GFX_report_event_czech_soldiers_02

	trigger = {
		tag = SER
		is_faction_leader = yes
		has_country_flag = SER_founded_belgradepact
		surrender_progress > 0.50

		BUL = {
			OR = {
				exists = no
				is_subject_of = SER
				has_capitulated = yes
			}
		}

		has_war_with = ALB

		ALB = {
			controls_state = 765 #Kossovo
			controls_all_owned_states = yes
			has_country_flag = ALB_joined_BUL_war
		}
	}

	mean_time_to_happen = {
		days = 30
	}

	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event pact.78 option pact.78.a"
		name = pact.78.a # Sue for peace.
		add_political_power = -50
		ALB = { country_event = pact.79 } # Send the peace offer to the Albanians
	}

	option = {
		log = "[GetLogInfo]: event pact.78 option pact.78.b"
		name = pact.78.b # We can still win this!
		ai_chance = { base = 0 }
		add_political_power = -100
	}
}

# Albanians: Serbia offers peace
country_event = {
	id = pact.79
	title = pact.79.t
	desc = pact.79.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.79 option pact.79.a"
		name = pact.79.a # Enough bloodshed. End this war.
		clr_country_flag = ALB_joined_BUL_war

		every_state = {
			limit = {
				owner = { is_in_faction_with = SER }
				OR = {
					is_core_of = ALB
					is_claimed_by = ALB
					state = 106 #Macedonia
					state = 185 #Epirus
				}
			}
			if = {
				limit = {
					NOT = {
						is_claimed_by = ALB
						is_core_of = ALB
					}
				}
				add_claim_by = ALB
			}
			transfer_state_to = ALB
		}

		SER = { white_peace_with_ROOT = yes }

		hidden_effect = {
			# Notify all Pact members of peace
			every_other_country = {
				limit = { is_in_faction_with = SER }
				country_event = pact.80
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.79 option pact.79.b"
		name = pact.79.b # No, they shall be crushed
		ai_chance = { base = 0 }
		clr_country_flag = ALB_joined_BUL_war
		add_political_power = -100
		SER = { country_event = pact.46 } # Notify Serbia of refusal
	}
}

# Pact members: peace was signed
country_event = {
	id = pact.80
	title = pact.80.t
	desc = pact.80.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.80 option pact.80.a"
		name = pact.80.a # Unfortunate
		add_political_power = -100
		effect_tooltip = {
			ALB = { white_peace = SER }
		}
	}
}

# Double-check removal of Albanian war flag
country_event = {
	id = pact.81
	title = pact.81.t
	desc = pact.81.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = ALB
		has_country_flag = ALB_joined_BUL_war
		NOT = { has_war_with = SER }
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		log = "[GetLogInfo]: event pact.81 option pact.81.a"
		name = pact.81.a
		clr_country_flag = ALB_joined_BUL_war
	}
}

###########################
# Belgrade Pact vs. Austria
###########################

# Preventing Pact members from collapsing just because Serbia has
country_event = {
	id = pact.100

	hidden = yes
	is_triggered_only = yes

	trigger = {
		is_in_faction_with = BPL
		NOT = { has_country_flag = belgrade_pact_major }
	}

	option = {
		log = "[GetLogInfo]: event pact.100 option 1"
		set_country_flag = belgrade_pact_major
		set_major = yes
	}
}

# Re-setting their major status
country_event = {
	id = pact.101

	hidden = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = belgrade_pact_major
		OR = {
			has_war = no
			is_in_faction = no
			NOT = { faction_leader = { tag = BPL } }
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.101 option 1"
		clr_country_flag = belgrade_pact_major
		set_major = no
	}
}

###########################
# Transfer events
###########################

# Transfering Dobrudzha
country_event = {
	id = pact.111
	title = annexation_DOBROGEA_CONQ
	desc = annexation_DOBROGEA_CONQ_desc
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = { #Give to Romania
		log = "[GetLogInfo]: event pact.111 option pact.111.a"
		name = pact.111.a
		trigger = {
			ROM = { is_ally_of_ROOT = yes }
			NOT = {
				tag = ROM
				tag = BUL
			}
		}
		ai_chance = {
			base = 90
			modifier = {
				factor = 5
				ROM = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		set_temp_variable = { tag_to_release = ROM }
		77 = { add_core_or_claim_of_target_and_transfer_if_owned = yes }
		772 = { add_core_of_target_and_transfer_if_owned = yes }
	}
	option = { #Give to Bulgaria
		log = "[GetLogInfo]: event pact.111 option pact.111.b"
		name = pact.111.b
		trigger = {
			BUL = { is_ally_of_ROOT = yes }
			NOT = {
				tag = ROM
				tag = BUL
			}
		}
		ai_chance = {
			base = 90
			modifier = {
				factor = 5
				BUL = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		set_temp_variable = { tag_to_release = BUL }
		77 = { add_core_of_target_and_transfer_if_owned = yes }
		772 = { add_claim_of_target_and_transfer_if_owned = yes }
	}
	option = { #Divide it up
		log = "[GetLogInfo]: event pact.111 option pact.111.c"
		name = pact.111.c
		trigger = {
			772 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			77 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			BUL = { is_ally_of_ROOT = yes }
			ROM = { is_ally_of_ROOT = yes }
			NOT = {
				tag = BUL
				tag = ROM
			}
		}
		ai_chance = { base = 40 }
		set_temp_variable = { tag_to_release = BUL }
		77 = { add_core_of_target_and_transfer_if_owned = yes }
		set_temp_variable = { tag_to_release = ROM }
		772 = { add_core_of_target_and_transfer_if_owned = yes }
	}
	option = { #Give Dobrudzha to Romania, keep Silistria
		log = "[GetLogInfo]: event pact.111 option pact.111.c"
		name = pact.111.c
		trigger = {
			771 = { #Varna
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			772 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			77 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			BUL = { exists = no }
			ROM = { is_ally_of_ROOT = yes }
			NOT = {
				tag = BUL
				tag = ROM
			}
		}
		ai_chance = { base = 40 }
		77 = { add_claim_of_ROOT = yes }
		set_temp_variable = { tag_to_release = ROM }
		772 = { add_core_of_target_and_transfer_if_owned = yes }
	}
	option = { #annex
		log = "[GetLogInfo]: event pact.111 option annex.integration"
		name = annex.integration
		trigger = {
			tag = ROM
		}
		ai_chance = { base = 1000 }
		if = {
			limit = { owns_state = 77 }
			77 = { add_claim_of_ROOT = yes }
		}
		if = {
			limit = { owns_state = 772 }
			772 = { remove_claim_and_add_core_of_ROOT = yes }
		}
	}
	option = { #annex
		log = "[GetLogInfo]: event pact.111 option annex.integration"
		name = annex.integration
		trigger = {
			tag = BUL
		}
		ai_chance = { base = 1000 }
		if = {
			limit = { owns_state = 77 }
			77 = { remove_claim_and_add_core_of_ROOT = yes }
		}
		if = {
			limit = { owns_state = 772 }
			772 = { remove_claim_and_add_core_of_ROOT = yes }
		}
	}
	option = { #occupy
		log = "[GetLogInfo]: event pact.111 option annex.occupation"
		name = annex.occupation
		trigger = {
			NOT = {
				tag = ROM
				tag = BUL
			}
		}
		ai_chance = { base = 0 }
		set_country_flag = DOBROGEA_CONQ
		occupy_small_country = yes
	}
}

# Transfering East and West Salonica
country_event = {
	id = pact.112
	title = annexation_SALONICA_CONQ
	desc = annexation_SALONICA_CONQ_desc
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = { #Give to Greece
		log = "[GetLogInfo]: event pact.112 option pact.112.a"
		name = pact.112.a
		trigger = {
			GRE = { is_ally_of_ROOT = yes }
			NOT = {
				tag = GRE
				tag = BUL
			}
		}
		ai_chance = {
			base = 90
			modifier = {
				factor = 5
				GRE = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		set_temp_variable = { tag_to_release = GRE }
		731 = { #Western Macedonia
			if = {
				limit = { is_claim_or_core_of_ROOT = no }
				transfer_state_and_add_claim = yes
				state_given_notification_effect = yes
			}
		}
		769 = { #Eastern Macedonia
			if = {
				limit = { is_claim_or_core_of_ROOT = no }
				transfer_state_and_add_claim = yes
				state_given_notification_effect = yes
			}
		}
		989 = { #Chalcidice
			if = {
				limit = { is_claim_or_core_of_ROOT = no }
				transfer_state_and_add_claim = yes
				state_given_notification_effect = yes
			}
		}
	}
	option = { #Give to Bulgaria
		log = "[GetLogInfo]: event pact.112 option pact.111.b"
		name = pact.111.b
		trigger = {
			BUL = { is_ally_of_ROOT = yes }
			NOT = {
				tag = GRE
				tag = BUL
			}
		}
		ai_chance = {
			base = 90
			modifier = {
				factor = 5
				BUL = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
			modifier = {
				factor = 0.01
				BUL = {
					NOT = { owns_state = 106 }
				}
			}
		}
		set_temp_variable = { tag_to_release = BUL }
		731 = { add_claim_of_target_and_transfer_if_owned = yes }
		769 = { add_claim_of_target_and_transfer_if_owned = yes }
	}
	option = { #Divide it up
		log = "[GetLogInfo]: event pact.112 option pact.111.c"
		name = pact.111.c
		trigger = {
			731 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			769 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			BUL = { is_ally_of_ROOT = yes }
			GRE = { is_ally_of_ROOT = yes }
			NOT = {
				tag = BUL
				tag = GRE
			}
		}
		ai_chance = {
			base = 40
			modifier = {
				factor = 10
				BUL = {
					NOT = { owns_state = 106 }
				}
			}
		}
		set_temp_variable = { tag_to_release = GRE }
		731 = {
			transfer_state_and_add_claim = yes
			state_given_notification_effect = yes
		}
		set_temp_variable = { tag_to_release = BUL }
		769 = { transfer_state_and_add_core = yes }
	}
	option = { #Divide it up
		log = "[GetLogInfo]: event pact.112 option pact.111.c"
		name = pact.111.c
		trigger = {
			731 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			769 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			BUL = { is_ally_of_ROOT = yes }
			GRE = { is_ally_of_ROOT = no }
			is_ally_with = SER
			SER = { owns_state = 106 } #Macedonia
			NOT = {
				tag = BUL
				tag = GRE
			}
		}
		ai_chance = {
			base = 40
			modifier = {
				factor = 10
				BUL = {
					NOT = { owns_state = 106 }
				}
			}
		}
		if = {
			limit = { NOT = { tag = SER } }
			SER = {
				transfer_state = 731
			}
		}
		769 = {
			if = {
				limit = { is_claimed_by = BUL }
				remove_claim_by = BUL
			}
			if = {
				limit = { NOT = { is_core_of = BUL } }
				add_core_of = BUL
			}
			transfer_state_to = BUL
		}
		recheck_annexations = yes
	}
	option = { #Grant it to GRE
		log = "[GetLogInfo]: event pact.112 option pact.112.e"
		name = pact.112.e
		trigger = {
			NOT = {
				GRE = { is_ally_of_ROOT = yes }
				BUL = { is_ally_of_ROOT = yes }
				tag = GRE
				tag = BUL
			}
			GRE = {
				owns_state = 1076
				ROOT_can_grant_land = yes
			}
		}
		ai_chance = { base = 20 }
		set_temp_variable = { tag_to_release = GRE }
		731 = { #Western Macedonia
			if = {
				limit = { is_claim_or_core_of_ROOT = no }
				transfer_state_and_add_claim = yes
				state_given_notification_effect = yes
			}
		}
		769 = { #Eastern Macedonia
			if = {
				limit = { is_claim_or_core_of_ROOT = no }
				transfer_state_and_add_claim = yes
				state_given_notification_effect = yes
			}
		}
	}
	option = { #annex
		log = "[GetLogInfo]: event pact.112 option annex.integration"
		name = annex.integration
		trigger = {
			tag = GRE
		}
		ai_chance = { base = 1000 }
		every_owned_state = {
			limit = {
				OR = {
					state = 731
					state = 769
				}
			}
			if = {
				limit = {
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = GRE }
				}
				add_claim_by = GRE
			}
		}
		recheck_annexations = yes
	}
	option = { #annex
		log = "[GetLogInfo]: event pact.112 option annex.integration"
		name = annex.integration
		trigger = {
			tag = BUL
		}
		ai_chance = { base = 1000 }
		every_owned_state = {
			limit = {
				OR = {
					state = 731
					state = 769
				}
			}
			if = {
				limit = { is_claimed_by = ROOT }
				remove_claim_by = ROOT
			}
			if = {
				limit = { NOT = { is_core_of = ROOT } }
				add_core_of = ROOT
			}
		}
		recheck_annexations = yes
	}
	option = { #occupy
		log = "[GetLogInfo]: event pact.112 option annex.occupation"
		name = annex.occupation
		trigger = {
			is_ai = no
			NOT = {
				tag = GRE
				tag = BUL
			}
		}
		set_country_flag = SALONICA_CONQ
		occupy_small_country = yes
	}
}

# Transferring Western Thrace
country_event = {
	id = pact.113
	title = annexation_THRACE_CONQ
	desc = annexation_THRACE_CONQ_desc
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = { #Give to Greece
		log = "[GetLogInfo]: event pact.113 option pact.112.a"
		name = pact.112.a
		trigger = {
			GRE = {
				ROOT_can_grant_land = yes
				OR = {
					owns_state = 341 #Adrianople
					owns_state = 769 #Eastern Macedonia
				}
				OR = {
					owns_state = 184 #Western Thrace
					184 = { is_valid_annexation_state = yes } #Western Thrace
				}
			}
			NOT = {
				original_tag = GRE
				original_tag = BUL
				original_tag = TUR
			}
		}
		ai_chance = {
			base = 90
			modifier = {
				factor = 5
				GRE = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		set_temp_variable = { tag_to_release = GRE }
		184 = { #Western Thrace
			add_claim_of_target_and_transfer_if_owned = yes
			state_given_notification_effect = yes
		}
		1089 = { #Kardzhali
			add_claim_of_target_and_transfer_if_owned = yes
			state_given_notification_effect = yes
		}
	}
	option = { #Give to Bulgaria
		log = "[GetLogInfo]: event pact.113 option pact.111.b"
		name = pact.111.b
		trigger = {
			BUL = {
				ROOT_can_grant_land = yes
				OR = {
					owns_state = 1089 #Kardzhali
					1089 = { is_valid_annexation_state = yes } #Kardzhali
				}
			}
			NOT = {
				original_tag = GRE
				original_tag = BUL
				original_tag = TUR
			}
		}
		ai_chance = {
			base = 90
			modifier = {
				factor = 5
				BUL = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		set_temp_variable = { tag_to_release = BUL }
		184 = { add_core_of_target_and_transfer_if_owned = yes } #Western Thrace
		1089 = { add_core_of_target_and_transfer_if_owned = yes } #Kardzhali
	}
	option = { #Give to Serbia
		log = "[GetLogInfo]: event pact.113 option pact.111.f"
		name = pact.111.f
		trigger = {
			SER = {
				is_ally_of_ROOT = yes
				owns_state = 49 #Sofia
				owns_state = 212 #Plovdiv
			}
			OR = {
				SER = { owns_state = 1089 } #Kardzhali
				1089 = { is_valid_annexation_state = yes }
			}
			NOT = {
				original_tag = GRE
				original_tag = BUL
				original_tag = TUR
				original_tag = SER
			}
		}
		ai_chance = {
			base = 90
			modifier = {
				factor = 5
				SER = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		set_temp_variable = { tag_to_release = SER }
		184 = { transfer_if_owned = yes } #Western Thrace
		1089 = { transfer_if_owned = yes } #Kardzhali
	}

	option = { #Give to Turks
		log = "[GetLogInfo]: event pact.113 option pact.113.a"
		name = pact.113.a
		trigger = {
			TUR = {
				ROOT_can_grant_land = yes
				owns_state = 341 #Adrianople
				OR = {
					owns_state = 184
					184 = { is_valid_annexation_state = yes } #Western Thrace
				}
			}
			NOT = {
				original_tag = GRE
				original_tag = BUL
				original_tag = TUR
			}
		}
		ai_chance = { base = 90 }
		set_temp_variable = { tag_to_release = TUR }
		184 = { add_core_of_target_and_transfer_if_owned = yes } #Western Thrace
		1089 = { add_core_of_target_and_transfer_if_owned = yes } #Kardzhali
	}

	option = { #Divide it up
		log = "[GetLogInfo]: event pact.113 option pact.111.c"
		name = pact.111.c
		trigger = {
			184 = { is_valid_annexation_state = yes } #Western Thrace
			1089 = { is_valid_annexation_state = yes } #Kardzhali
			GRE = {
				ROOT_can_grant_land = yes
				OR = {
					owns_state = 341 #Adrianople
					owns_state = 769 #Eastern Macedonia
				}
			}
			BUL = { ROOT_can_grant_land = yes }
			NOT = {
				original_tag = BUL
				original_tag = GRE
				original_tag = TUR
			}
		}
		ai_chance = { base = 40 }
		set_temp_variable = { tag_to_release = GRE }
		184 = { #Western Thrace
			transfer_state_and_add_claim = yes
			state_given_notification_effect = yes
		}

		custom_effect_tooltip = tooltip_white_line
		set_temp_variable = { tag_to_release = BUL }
		1089 = { transfer_state_and_add_core = yes } #Kardzhali
	}

	option = { #Divide it up
		log = "[GetLogInfo]: event pact.113 option pact.111.c"
		name = pact.111.c
		trigger = {
			184 = { is_valid_annexation_state = yes } #Western Thrace
			1089 = { is_valid_annexation_state = yes } #Kardzhali
			SER = {
				is_ally_of_ROOT = yes
				owns_state = 49 #Sofia
				owns_state = 212 #Plovdiv
			}
			GRE = {
				ROOT_can_grant_land = yes
				OR = {
					owns_state = 341 #Adrianople
					owns_state = 769 #Eastern Macedonia
				}
			}
			NOT = {
				original_tag = BUL
				original_tag = GRE
				original_tag = TUR
				original_tag = SER
			}
		}
		ai_chance = { base = 40 }
		set_temp_variable = { tag_to_release = GRE }
		184 = { #Western Thrace
			transfer_state_and_add_claim = yes
			state_given_notification_effect = yes
		}

		custom_effect_tooltip = tooltip_white_line
		SER = { transfer_state = 1089 } #Kardzhali
	}

	option = { #annex
		log = "[GetLogInfo]: event pact.113 option annex.integration"
		name = annex.integration
		trigger = {
			tag = GRE
			owns_state = 184 #Western Thrace
		}
		ai_chance = { base = 1000 }
		184 = { #Western Thrace
			if = {
				limit = { is_valid_annexation_state = yes }
				add_claim_of_ROOT = yes
			}
		}
		1089 = { #Kardzhali
			if = {
				limit = { is_valid_annexation_state = yes }
				add_claim_of_ROOT = yes
			}
		}
	}
	option = { #annex
		log = "[GetLogInfo]: event pact.113 option annex.integration"
		name = annex.integration
		trigger = {
			OR = {
				original_tag = BUL
				AND = {
					original_tag = TUR
					owns_state = 341 #Adrianople
				}
			}
		}
		ai_chance = { base = 1000 }
		184 = { #Western Thrace
			if = {
				limit = { is_valid_annexation_state = yes }
				remove_claim_and_add_core_of_ROOT = yes
			}
		}
		1089 = { #Kardzhali
			if = {
				limit = { is_valid_annexation_state = yes }
				remove_claim_and_add_core_of_ROOT = yes
			}
		}
	}
	option = { #occupy
		log = "[GetLogInfo]: event pact.113 option annex.occupation"
		name = annex.occupation
		trigger = {
			NOT = {
				original_tag = GRE
				original_tag = BUL
				original_tag = TUR
			}
		}
		ai_chance = { base = 0 }
		set_country_flag = THRACE_CONQ
		occupy_small_country = yes
	}
}

###########################
# 2nd Congress events
###########################

# Victory in the Balkan War
country_event = {
	id = pact.200
	title = pact.200.t
	desc = pact.200.d

	trigger = {
		can_declare_war_on = AUS
		AUS = { is_subject = no }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.200 option pact.200.a"
		name = pact.200.a #Organise a new conference
		ROM = {
			country_event = { id = pact.201 days = 2 }
		}
		GRE = {
			country_event = { id = pact.201 days = 2 }
		}
		hidden_effect = {
			country_event = { id = pact.202 days = 4 }
			country_event = { id = pact.205 days = 8 }
		}
	}
}

# An invitation from Serbia
country_event = {
	id = pact.201
	title = pact.201.t
	desc = pact.201.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.201 option pact.201.a"
		name = pact.201.a #Very well, we shall attend
		add_to_array = { SER.SER_attending_congress = ROOT }
	}
}

# Invite Italy?
country_event = {
	id = pact.202
	title = pact.202.t
	desc = pact.202.d.ITA

	trigger = {
		can_declare_war_on = AUS
		ITA = {
			has_government = national_populist
			exists = yes
			is_subject = no
			is_in_faction = no
			NOT = {
				has_war_with = ROOT
				has_war_with = VNC
			}
		}
		AUS = {
			OR = {
				owns_state = 103 #Rijeka
				owns_state = 488 #Trieste
				owns_state = 683 #Gorizia
				owns_state = 736 #Istria
				owns_state = 783 #Trentino
			}
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.202 option pact.202.a"
		name = pact.202.a #All help is welcome
		ITA = { country_event = { id = pact.203 days = 2 } }
	}

	option = {
		log = "[GetLogInfo]: event pact.202 option pact.202.b"
		name = pact.202.b #Don't bother
		ai_chance = { base = 0 }
	}
}

# Italy Invited to Attend
country_event = {
	id = pact.203
	title = pact.203.t
	desc = pact.203.d

	trigger = {
		can_declare_war_on = AUS
		is_subject = no
		is_in_faction = no
		NOT = { has_war_with = ROOT }
		OR = {
			has_socialist_government = yes
			has_dictatorship_government = yes
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.203 option pact.203.a"
		name = pact.203.a #Very well, we shall attend
		add_to_array = { SER.SER_attending_congress = ROOT }
		FROM = { country_event = pact.204 }
	}

	option = {
		log = "[GetLogInfo]: event pact.203 option pact.203.b"
		name = pact.203.b #This is a waste of time
		ai_chance = { base = 0 }
	}
}

# FROM will attend
country_event = {
	id = pact.204
	title = pact.204.t
	desc = pact.204.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.204 option pact.204.a"
		name = pact.204.a #Excellent
		add_political_power = 5
		add_opinion_modifier = {
			target = FROM
			modifier = KR_pleased
		}
	}
}

# The delegates arrive
country_event = {
	id = pact.205
	title = pact.205.t
	desc = pact.205.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.205 option pact.205.a"
		name = pact.205.a #Let the Congress begin!
		country_event = { id = pact.206 days = 1 }
	}
}

# Deciding on a Goal
country_event = {
	id = pact.206
	title = pact.206.t
	desc = pact.206.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.206 option pact.206.a"
		name = pact.206.a #A war with Austria
		ai_chance = { base = 90 }
		set_country_flag = SER_war_against_austria
		country_event = { id = pact.209 days = 5 }
		hidden_effect = {
			for_each_scope_loop = {
				array = SER.SER_attending_congress
				country_event = { id = pact.207 days = 2 }
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.206 option pact.206.b"
		name = pact.206.b #Force them with diplomacy
		ai_chance = { base = 10 }
		set_country_flag = SER_diplomacy_with_austria
		AUS = {
			country_event = { id = pact.216 days = 5 }
		}
		hidden_effect = {
			for_each_scope_loop = {
				array = SER.SER_attending_congress
				country_event = { id = pact.215 days = 2 }
			}
		}
	}
}

# The Congress chooses to attack Austria
country_event = {
	id = pact.207
	title = pact.207.t
	desc = pact.207.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.207 option pact.207.a"
		name = pact.207.a #We support this initiative
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				tag = GRE
				AUS = { NOT = { is_ally_with = 766.owner } }
				NOT = {
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_KEEP }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_AUS_BEATEN }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_INT_BEATEN }
				}
			}
			modifier = {
				factor = 0
				tag = ROM
				SER = {
					is_faction_leader = yes
					NOT = { is_in_faction_with = ROOT }
				}
			}
			modifier = {
				factor = 0
				tag = GRE
				OR = {
					has_game_rule = { rule = GRE_forpol option = GRE_FORPOL_GER }
					has_game_rule = { rule = GRE_forpol option = GRE_FORPOL_AUS }
					has_game_rule = { rule = GRE_forpol option = GRE_FORPOL_ENT }
					has_game_rule = { rule = GRE_forpol option = GRE_FORPOL_RUS }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_KEEP }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_AUS_BEATEN }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_INT_BEATEN }
				}
				NOT = {
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_KEEP }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_AUS_BEATEN }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_INT_BEATEN }
				}
			}
		}
		add_to_array = { SER.SER_will_attack_austria = ROOT }
		set_country_flag = SER_will_attack_austria
	}

	option = {
		log = "[GetLogInfo]: event pact.207 option pact.207.b"
		name = pact.207.b #We will join the Pact!
		trigger = {
			tag = ROM
			SER = {
				is_faction_leader = yes
				NOT = { is_in_faction_with = ROOT }
			}
		}
		ai_chance = { base = 100 }
		SER = {
			add_to_faction = ROOT
			country_event = pact.3
		}
		add_to_array = { SER.SER_will_attack_austria = ROOT }
		set_country_flag = SER_will_attack_austria
	}

	option = {
		log = "[GetLogInfo]: event pact.207 option pact.207.c"
		name = pact.207.c #What? No!
		trigger = {
			NOT = { tag = ROM }
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				tag = GRE
				AUS = { NOT = { is_ally_with = 766.owner } }
				NOT = {
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_KEEP }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_AUS_BEATEN }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_INT_BEATEN }
				}
			}
			modifier = {
				add = 100
				tag = GRE
				OR = {
					has_game_rule = { rule = GRE_forpol option = GRE_FORPOL_GER }
					has_game_rule = { rule = GRE_forpol option = GRE_FORPOL_AUS }
					has_game_rule = { rule = GRE_forpol option = GRE_FORPOL_ENT }
					has_game_rule = { rule = GRE_forpol option = GRE_FORPOL_RUS }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_KEEP }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_AUS_BEATEN }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_INT_BEATEN }
				}
				NOT = {
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_KEEP }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_AUS_BEATEN }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_INT_BEATEN }
				}
			}
		}
		if = {
			limit = { is_in_faction_with = FROM }
			leave_faction = yes
		}
		remove_from_array = { SER.SER_attending_congress = ROOT }
		FROM = { country_event = pact.208 }
	}
	option = {
		log = "[GetLogInfo]: event pact.207 option pact.207.e"
		name = pact.207.e #What? No!
		trigger = {
			tag = ROM
			is_ai = no
		}
		if = {
			limit = { is_in_faction_with = FROM }
			leave_faction = yes
		}
		remove_from_array = { SER.SER_attending_congress = ROOT }
		FROM = { country_event = pact.208 }
		add_stability = -0.1
		add_war_support = -0.6
		set_temp_variable = { ideology_change_var = -0.5 }
		change_ruling_party_popularity = yes
	}
}

# FROM leaves the Congress
country_event = {
	id = pact.208
	title = pact.208.t

	desc = {
		text = pact.208.d.war
		trigger = { has_country_flag = SER_war_against_austria }
	}
	desc = {
		text = pact.208.d.diplomacy
		trigger = { has_country_flag = SER_diplomacy_with_austria }
	}

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.208 option pact.208.a"
		name = pact.208.a #Their loss
		add_opinion_modifier = {
			target = FROM
			modifier = KR_disapproves_of_govt
		}
	}
}

# The Question of Claims (SER)
country_event = {
	id = pact.209
	title = pact.209.t
	desc = pact.209.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.209 option pact.209.a"
		name = pact.209.a #We shall free the Slavs!
		add_state_claim = 45 #Vojvodina
		add_state_claim = 102 #Slovenia
		add_state_claim = 103 #Rijeka
		add_state_claim = 104 #Bosnia
		add_state_claim = 105 #Montenegro
		add_state_claim = 109 #Central Croatia
		add_state_claim = 163 #Dalmatia
		add_state_claim = 683 #Gorizia
		add_state_claim = 736 #Istria
		add_state_claim = 794 #Syrmia
		add_state_claim = 841 #Kotor
		add_state_claim = 875 #West Banat
		hidden_effect = {
			if = {
				limit = {
					is_in_array = { SER.SER_attending_congress = ROM }
				}
				ROM = {
					country_event = { id = pact.210 days = 2 }
				}
			}
			if = {
				limit = {
					is_in_array = { SER.SER_attending_congress = GRE }
				}
				GRE = {
					country_event = { id = pact.211 days = 2 }
				}
			}
			if = {
				limit = {
					is_in_array = { SER.SER_attending_congress = ITA }
				}
				ITA = {
					country_event = { id = pact.213 days = 2 }
				}
			}
			country_event = { id = pact.214 days = 6 }
		}
	}
}

# The Question of Claims (ROM)
country_event = {
	id = pact.210
	title = pact.210.t
	desc = pact.210.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.210 option pact.210.a"
		name = pact.210.a #We will reunite with Transylvania!
		add_state_claim = 76 #Cluj
		add_state_claim = 80 #Cernauti
		add_state_claim = 82 #Banat
		add_state_claim = 83 #Partium
		add_state_claim = 84 #Transylvania
		add_state_claim = 713 #Suceava
		add_state_claim = 789 #Szeklerland
	}
}

# The Question of Claims (GRE)
country_event = {
	id = pact.211
	title = pact.211.t
	desc = pact.211.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.211 option pact.211.a"
		name = pact.211.a #We have no claims.
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					AUS = { is_ally_with = 766.owner }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_KEEP }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_AUS_BEATEN }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_INT_BEATEN }
				}
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.211 option pact.211.b"
		name = pact.211.b #Northern Epirus belongs to us!
		ai_chance = { base = 1 }
		trigger = {
			OR = {
				AUS = { is_ally_with = 766.owner }
				has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_KEEP }
				has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_AUS_BEATEN }
				has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_INT_BEATEN }
			}
		}
		if = {
			limit = {
				766 = {
					NOT = {
						is_core_of = GRE
						is_claimed_by = GRE
					}
				}
			}
			add_state_claim = 766 #Northern Epirus
		}
	}
}

# The Question of Claims (ITA)
country_event = {
	id = pact.213
	title = pact.213.t
	desc = pact.213.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.213 option pact.213.a"
		name = pact.213.a #We shall recover Istria and Trento!
		add_state_claim = 103 #Rijeka
		add_state_claim = 488 #Trieste
		add_state_claim = 683 #Gorizia
		add_state_claim = 736 #Istria
		add_state_claim = 783 #Trentino
	}
}

# The Congress has Ended
country_event = {
	id = pact.214
	title = pact.214.t
	desc = pact.214.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.214 option pact.214.a"
		name = pact.214.a #Onwards!
		unlock_decision_tooltip = SER_Attack_Austria
	}
}

# The Congress chooses to negotiate with Austria
country_event = {
	id = pact.215
	title = pact.215.t
	desc = pact.215.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.215 option pact.215.a"
		name = pact.215.a #We support this initiative
	}

	option = {
		log = "[GetLogInfo]: event pact.215 option pact.215.b"
		name = pact.215.b #What? No!
		trigger = {
			NOT = { tag = ROM }
		}
		ai_chance = { base = 0 }
		if = {
			limit = { is_in_faction_with = FROM }
			leave_faction = yes
		}
		remove_from_array = { SER.SER_attending_congress = ROOT }
		FROM = { country_event = pact.208 }
	}
}

# An Invitation to Belgrade? (AUS)
country_event = {
	id = pact.216
	title = pact.216.t
	desc = pact.216.d

	trigger = {
		SER = { can_declare_war_on = AUS }
	}

	is_triggered_only = yes

	#option = {
	#	name = pact.216.a #A chance for peace, perhaps?
	#}

	option = {
		log = "[GetLogInfo]: event pact.216 option pact.216.b"
		name = pact.216.b #We reject their ridiculous offer!
		FROM = {
			country_event = { id = pact.217 days = 3 }
		}
	}
}

# Austria Refuses
country_event = {
	id = pact.217
	title = pact.217.t
	desc = pact.217.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.217 option pact.217.a"
		name = pact.217.a #War it shall be, then.
		hidden_effect = {
			for_each_scope_loop = {
				array = SER.SER_attending_congress
				country_event = { id = pact.207 days = 2 }
			}
			country_event = { id = pact.209 days = 5 }
		}
	}
}

# Economic Council
country_event = {#Pact of Organisation invitation
	id = pact.300
	title = pact.300.t
	desc = pact.300.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.300 option pact.300.a"
		name = pact.300.a #Of course
		ai_chance = { base = 10 }
		custom_effect_tooltip = BP_economic_integration_tt
		set_country_flag = BP_accepted_economic_union
		if = {
			limit = {
				NOT = {
					is_in_array = { global.balkan_economic_union = ROOT }
				}
			}
			add_to_array = { global.balkan_economic_union = ROOT }
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.300 option pact.300.b"
		name = pact.300.b #Ew, economic integration
		ai_chance = { base = 0 }
		FROM = { country_event = pact.301 }
	}
}
country_event = {#FROM refuses
	id = pact.301
	title = pact.301.t
	desc = pact.301.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.301 option pact.301.a"
		name = pact.301.a #Whatever
		add_political_power = -5
	}
}
country_event = {#Formation of the Economic Council (initiator)
	id = pact.302
	title = pact.302.t
	desc = pact.302.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.302 option pact.302.a"
		name = pact.302.a #Woop woop
		if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 1 }
			}
			add_ideas = BP_economic_council_1
		}
		else_if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 2 }
			}
			add_ideas = BP_economic_council_2
		}
		else_if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 3 }
			}
			add_ideas = BP_economic_council_3
		}
		every_other_country = {
			limit = {
				OR = {
					is_in_array = { global.balkan_economic_union = THIS }
					AND = {
						OR = {
							tag = ALB
							tag = BOS
							tag = BUL
							tag = CRO
							tag = GRE
							tag = HUN
							tag = ROM
						}
						is_subject = yes
						overlord = {
							is_in_array = { global.balkan_economic_union = THIS }
						}
					}
				}
			}
			country_event = pact.303
		}
	}
}
country_event = {#Formation of the Economic Council (others)
	id = pact.303
	title = pact.303.t
	desc = pact.303.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.303 option pact.303.a"
		name = pact.303.a #Woop woop
		if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 1 }
			}
			add_ideas = BP_economic_council_1
		}
		else_if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 2 }
			}
			add_ideas = BP_economic_council_2
		}
		else_if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 3 }
			}
			add_ideas = BP_economic_council_3
		}
	}
}
country_event = { #Economic Council upgraded
	id = pact.304
	title = pact.304.t
	desc = pact.304.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.304 option pact.304.a"
		name = pact.304.a #Woop woop
		if = {
			limit = { has_idea = BP_economic_council_1 }
			swap_ideas = {
				remove_idea = BP_economic_council_1
				add_idea = BP_economic_council_upgraded_1
			}
		}
		else_if = {
			limit = { has_idea = BP_economic_council_2 }
			swap_ideas = {
				remove_idea = BP_economic_council_2
				add_idea = BP_economic_council_upgraded_2
			}
		}
		else_if = {
			limit = { has_idea = BP_economic_council_3 }
			swap_ideas = {
				remove_idea = BP_economic_council_3
				add_idea = BP_economic_council_upgraded_3
			}
		}
	}
}
country_event = {#Kicked out of the Economic Council
	id = pact.305
	title = pact.305.t

	desc = {
		text = pact.305.d.war
		trigger = {
			has_socialist_government = no
		}
	}
	desc = {
		text = pact.305.d.revolution
		trigger = {
			has_socialist_government = yes
		}
	}

	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.305 option pact.305.a"
		name = pact.305.a
		if = {
			limit = { has_idea = BP_economic_council_1 }
			remove_ideas = BP_economic_council_1
		}
		else_if = {
			limit = { has_idea = BP_economic_council_upgraded_1 }
			remove_ideas = BP_economic_council_upgraded_1
		}
		else_if = {
			limit = { has_idea = BP_economic_council_2 }
			remove_ideas = BP_economic_council_2
		}
		else_if = {
			limit = { has_idea = BP_economic_council_upgraded_2 }
			remove_ideas = BP_economic_council_upgraded_2
		}
		else_if = {
			limit = { has_idea = BP_economic_council_2 }
			remove_ideas = BP_economic_council_2
		}
		else_if = {
			limit = { has_idea = BP_economic_council_upgraded_2 }
			remove_ideas = BP_economic_council_upgraded_2
		}
		if = {
			limit = {
				is_in_array = { global.balkan_economic_union = ROOT }
			}
			remove_from_array = { global.balkan_economic_union = ROOT }
		}
	}
}
country_event = { #Economic Council upgraded
	id = pact.306
	title = pact.306.t
	desc = pact.306.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event pact.306 option pact.306.a"
		name = pact.306.a #Woop woop
		if = {
			limit = { has_idea = BP_economic_council_1 }
			swap_ideas = {
				remove_idea = BP_economic_council_1
				add_idea = BP_economic_council_2
			}
		}
		else_if = {
			limit = { has_idea = BP_economic_council_2 }
			swap_ideas = {
				remove_idea = BP_economic_council_2
				add_idea = BP_economic_council_3
			}
		}
		else_if = {
			limit = { has_idea = BP_economic_council_upgraded_1 }
			swap_ideas = {
				remove_idea = BP_economic_council_upgraded_1
				add_idea = BP_economic_council_upgraded_2
			}
		}
		else_if = {
			limit = { has_idea = BP_economic_council_upgraded_2 }
			swap_ideas = {
				remove_idea = BP_economic_council_upgraded_2
				add_idea = BP_economic_council_upgraded_3
			}
		}
	}
}
country_event = { #Do you want to keep BP?
	id = pact.307
	title = pact.307.t
	desc = pact.307.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		is_faction_leader = yes
		SER = {
			owns_state = 875
			NOT = { #recouncilation not possible if Romania has taken West Banat
				has_completed_focus = SER_YUG_anti_imperialist_vanguard
				has_completed_focus = SER_YUG_balkan_socialist_federation
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event pact.307 option pact.307.a"
		name = pact.307.a #Definitely
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				ROM = { has_government = national_populist }
				NOT = {
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_KEEP }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_KEEP }
				}
			}
			modifier = {
				add = -5
				ROM = { has_government = paternal_autocrat }
			}
			modifier = {
				factor = 100
				ROM = { has_completed_focus = ROM_michael }
			}
			modifier = {
				factor = 0
				SER = { has_socialist_government = yes }
				NOT = {
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_KEEP }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_KEEP }
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_AUS_BEATEN }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_AUS_BEATEN }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_INT_BEATEN }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_INT_BEATEN }
				}
			}
		}
		set_global_flag = SER_keeping_the_pact
	}
	option = {
		log = "[GetLogInfo]: event pact.307 option pact.307.b"
		name = pact.307.b #Sorry, this was just one war thing.
		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_KEEP }
					has_game_rule = { rule = BPL_dissolution option = BPL_DISSOLUTION_GRE_KEEP }
				}
			}
		}
	}
}
