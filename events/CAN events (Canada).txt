###########################
# Canada Events
###########################

add_namespace = canada
add_namespace = canada_flavour

# Death of King George V
country_event = {
	id = canada.4
	title = canada.4.t
	desc = canada.4.d
	picture = GFX_report_event_CAN_death_george

	is_triggered_only = yes

	trigger = {
		has_country_leader = { character = GBR_george_frederick_windsor }
	}

	option = {
		log = "[GetLogInfo]: event canada.4 option canada.4.a"
		name = canada.4.a
		GBR_george_frederick_windsor = { kill_character = yes }
		set_variable = { king_popularity = 2 }
		set_variable = { global.king_edward_story = 0 }
		add_stability = -0.05
		custom_effect_tooltip = CAN_king_speech_unlocked
		hidden_effect = {
			GBR_create_edward = yes
			# official coronation
			country_event = { id = canada.5 days = 90 }
			# country-specific death events
			if = {
				limit = { country_exists = RAJ }
				RAJ = { country_event = delhi.3 }
			}
			if = {
				limit = { country_exists = AST }
				AST = { country_event = austral.3 }
			}
			if = {
				limit = { country_exists = TRM }
				TRM = { country_event = tram.125 }
			}
			if = {
				limit = { country_exists = NFA }
				NFA = { country_event = nfa.4 }
			}
			if = {
				limit = { country_exists = SAF }
				SAF = { country_event = saf.158 }
			}
			# main news events
			news_event = { id = worldnews.28 days = 3 }
		}
	}
}

# Coronation of King Edward
country_event = {
	id = canada.5
	title = canada.5.t
	desc = canada.5.d
	picture = GFX_report_event_CAN_coronation

	is_triggered_only = yes

	trigger = {
		has_country_leader = { character = GBR_edward_windsor }
	}

	option = {
		log = "[GetLogInfo]: event canada.5 option canada.5.a"
		name = canada.5.a
		add_stability = 0.05
		clr_global_flag = CAN_king_busy
		custom_effect_tooltip = CAN_king_coronated
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
		hidden_effect = {
			country_event = { id = entente.50 days = 60 } #begin random royal events
		}
	}
}

# The King's First Address
country_event = {
	id = canada.6
	title = canada.6.t
	desc = canada.6.d
	picture = GFX_report_event_CAN_edward2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.6 option canada.6.a"
		name = canada.6.a #He will prepare the nation for war
		ai_chance = { base = 50 }
		set_country_flag = CAN_address_war
		hidden_effect = {
			country_event = { id = canada.7 days = 1 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.6 option canada.6.b"
		name = canada.6.b #He will endorse the Conservatives
		ai_chance = { base = 30 }
		set_country_flag = CAN_address_cons
		hidden_effect = {
			country_event = { id = canada.7 days = 1 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.6 option canada.6.c"
		name = canada.6.c #He will support the Canadian government
		ai_chance = { base = 20 }
		set_country_flag = CAN_address_gov
		hidden_effect = {
			country_event = { id = canada.7 days = 1 }
		}
	}
}

# Results of the Address
country_event = {
	id = canada.7
	picture = GFX_report_event_CAN_microphone

	title = {
		text = canada.7.t.war
		trigger = { has_country_flag = CAN_address_war }
	}
	title = {
		text = canada.7.t.cons
		trigger = { has_country_flag = CAN_address_cons }
	}
	title = {
		text = canada.7.t.gov
		trigger = { has_country_flag = CAN_address_gov }
	}

	desc = {
		text = canada.7.d.war
		trigger = { has_country_flag = CAN_address_war }
	}
	desc = {
		text = canada.7.d.cons
		trigger = { has_country_flag = CAN_address_cons }
	}
	desc = {
		text = canada.7.d.gov
		trigger = { has_country_flag = CAN_address_gov }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.7 option canada.7.a"
		name = canada.7.a #We must liberate our brothers in Britain!
		trigger = { has_country_flag = CAN_address_war }
		clr_country_flag = CAN_address_war
		add_war_support = 0.10
		if = {
			limit = { check_variable = { king_influence < 5 } }
			custom_effect_tooltip = CAN_exile_influence_increase
			add_to_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}
		add_to_variable = { CAN_conservative_support = 1 }
		add_popularity = { ideology = authoritarian_democrat popularity = 0.05 }
		add_popularity = { ideology = social_conservative popularity = 0.05 }
	}
	option = {
		log = "[GetLogInfo]: event canada.7 option canada.7.b"
		name = canada.7.b #This election will be vital for our future!
		trigger = { has_country_flag = CAN_address_cons }
		clr_country_flag = CAN_address_cons
		add_war_support = 0.05
		add_political_power = 50
		if = {
			limit = { check_variable = { king_popularity < 5 } }
			custom_effect_tooltip = CAN_king_popularity_increase
			add_to_variable = { king_popularity = 1 }
			CAN_calc_royal_visit_effects = yes
		}
		add_to_variable = { CAN_conservative_support = 2 }
		add_popularity = { ideology = social_conservative popularity = 0.10 }
	}
	option = {
		log = "[GetLogInfo]: event canada.7 option canada.7.c"
		name = canada.7.c #The 20th century shall be Canada's Century!
		trigger = { has_country_flag = CAN_address_gov }
		clr_country_flag = CAN_address_gov
		add_to_variable = { CAN_liberal_support = 1 }
		add_political_power = 100
		add_stability = 0.03
		add_war_support = -0.05
		add_popularity = { ideology = market_liberal popularity = 0.05 }
	}
}

# Status of the Privy Council (fired by focus)
country_event = {
	id = canada.8
	title = canada.8.t
	desc = canada.8.d
	picture = GFX_report_event_CAN_cabinet

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.8 option canada.8.a"
		name = canada.8.a #Let the king pick his replacement
		ai_chance = {
			base = 40
			modifier = {
				factor = 0.5
				has_government = market_liberal
				check_variable = { CAN_liberal_support < 1 }
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = GBR_path option = GBR_PATH_SOCCON }
			}
		}
		add_war_support = 0.05
		CAN_remove_current_british_pm = yes
		if = {
			limit = { has_global_flag = GBR_british_pm_slot_changed }
			activate_advisor = GBR_henry_page_croft_second_in_command
		}
		else = {
			activate_advisor = GBR_henry_page_croft_political_advisor
		}
		if = {
			limit = { check_variable = { king_influence < 5 } }
			custom_effect_tooltip = CAN_exile_influence_increase
			add_to_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}
		add_to_variable = { CAN_conservative_support = 1 }
	}
	option = {
		log = "[GetLogInfo]: event canada.8 option canada.8.b"
		name = canada.8.b #We should push for a moderate candidate
		ai_chance = {
			base = 40
			modifier = {
				factor = 0.25
				has_government = social_conservative
				check_variable = { CAN_conservative_support > 0 }
			}
			modifier = {
				factor = 0.5
				has_government = social_conservative
				check_variable = { CAN_conservative_support < 1 }
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = GBR_path option = GBR_PATH_ELECTED_AUTDEM }
					has_game_rule = { rule = GBR_path option = GBR_PATH_GUIDED_AUTDEM }
				}
			}
		}
		add_political_power = 50
		CAN_remove_current_british_pm = yes
		if = {
			limit = { has_global_flag = GBR_british_pm_slot_changed }
			activate_advisor = GBR_robert_gascoyne_cecil_second_in_command
		}
		else = {
			activate_advisor = GBR_robert_gascoyne_cecil_political_advisor
		}
		if = {
			limit = { check_variable = { king_influence > 0 } }
			custom_effect_tooltip = CAN_exile_influence_decrease
			subtract_from_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}
		add_to_variable = { CAN_liberal_support = 1 }
	}
	option = {
		log = "[GetLogInfo]: event canada.8 option canada.8.c"
		name = canada.8.c #A vote by the Exiles should be organised
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = GBR_path option = GBR_PATH_ELECTED_AUTDEM }
					has_game_rule = { rule = GBR_path option = GBR_PATH_GUIDED_AUTDEM }
				}
			}
		}
		CAN_remove_current_british_pm = yes
		if = {
			limit = { has_global_flag = GBR_british_pm_slot_changed }
			activate_advisor = GBR_anthony_eden_second_in_command
		}
		else = {
			activate_advisor = GBR_anthony_eden_political_advisor
		}
		add_stability = 0.03
		set_temp_variable = { ideology_change_var = 0.05 }
		change_ruling_party_popularity = yes
	}
}

# Fate of the Senate (fired by focus)
country_event = {
	id = canada.9
	title = canada.9.t
	desc = canada.9.d
	picture = GFX_report_event_CAN_commons2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.9 option canada.9.a"
		name = canada.9.a #We need reform at once!
		ai_chance = {
			base = 30
			modifier = {
				factor = 0.1
				has_government = social_conservative
			}
		}
		random_list = {
			40 = { country_event = canada.10 }
			60 = { country_event = canada.11 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.9 option canada.9.b"
		name = canada.9.b #Urge the king to pick Canadians
		ai_chance = { base = 40 }
		add_stability = 0.03
		add_political_power = 50
	}
	option = {
		log = "[GetLogInfo]: event canada.9 option canada.9.c"
		name = canada.9.c #It's the king's prerogative to choose as he wishes
		ai_chance = {
			base = 30
			modifier = {
				factor = 0.1
				has_government = market_liberal
			}
		}
		add_political_power = 100
		add_popularity = { ideology = authoritarian_democrat popularity = 0.10 }
		if = {
			limit = { check_variable = { king_influence < 5 } }
			custom_effect_tooltip = CAN_exile_influence_increase
			add_to_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}
		add_to_variable = { CAN_conservative_support = 1 }
	}
}

# The Senate refuses the bill
country_event = {
	id = canada.10
	title = canada.10.t
	desc = canada.10.d
	picture = GFX_report_event_CAN_commons2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.10 option canada.10.a"
		name = canada.10.a
		add_political_power = -50
		add_popularity = { ideology = market_liberal popularity = 0.05 }
		if = {
			limit = { check_variable = { king_popularity > 0 } }
			custom_effect_tooltip = CAN_king_popularity_decrease
			subtract_from_variable = { king_popularity = 1 }
			CAN_calc_royal_visit_effects = yes
		}
	}
}

# The Senate agrees to the bill
country_event = {
	id = canada.11
	title = canada.11.t
	desc = canada.11.d
	picture = GFX_report_event_CAN_commons2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.11 option canada.11.a"
		name = canada.11.a
		set_country_flag = CAN_has_senate_reform
		add_political_power = 100
		add_to_variable = { CAN_liberal_support = 1 }
		add_popularity = { ideology = social_conservative popularity = -0.05 }
		if = {
			limit = { check_variable = { king_influence > 0 } }
			custom_effect_tooltip = CAN_exile_influence_decrease
			subtract_from_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}
	}
}

### Begin pre-election events

# 1936 Stanley Cup Finals
country_event = {
	id = canada.20
	title = canada.20.t
	desc = canada.20.d
	picture = GFX_report_event_CAN_hockey

	is_triggered_only = yes
	major = yes

	show_major = {
		OR = {
			tag = CAN
			tag = USA
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.20 option canada.20.a"
		name = canada.20.a
		trigger = { tag = CAN }
		hidden_effect = {
			random_list = {
				55 = {
					country_event = { id = canada.21 days = 2 } #Detroit wins
				}
				45 = {
					country_event = { id = canada.22 days = 2 } #Toronto wins
				}
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.20 option canada.20.b"
		name = canada.20.b
		trigger = { tag = USA }
	}
}

# Detroit wins
country_event = {
	id = canada.21
	title = canada.21.t
	desc = canada.21.d
	picture = GFX_report_event_CAN_redwings

	is_triggered_only = yes
	major = yes

	show_major = {
		OR = {
			tag = CAN
			tag = USA
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.21 option canada.21.a"
		name = canada.21.a
		trigger = { tag = CAN }
	}
	option = {
		log = "[GetLogInfo]: event canada.21 option canada.21.b"
		name = canada.21.b
		trigger = { tag = USA }
	}
}

# Toronto wins
country_event = {
	id = canada.22
	title = canada.22.t
	desc = canada.22.d
	picture = GFX_report_event_CAN_mapleleafs

	is_triggered_only = yes
	major = yes

	show_major = {
		OR = {
			tag = CAN
			tag = USA
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.22 option canada.22.a"
		name = canada.22.a
		trigger = { tag = CAN }
	}
	option = {
		log = "[GetLogInfo]: event canada.22 option canada.22.b"
		name = canada.22.b
		trigger = { tag = USA }
	}
}

# Black Monday hits Canada
country_event = {
	id = canada.23
	title = canada.23.t
	desc = canada.23.d
	picture = GFX_report_event_CAN_mission

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = { has_idea = CAN_great_depression_3 }
				save_event_target_as = CAN_great_depression_3
				swap_ideas = {
					remove_idea = CAN_great_depression_3
					add_idea = CAN_great_depression_2
				}
			}
			else_if = {
				limit = { has_idea = CAN_great_depression_2 }
				save_event_target_as = CAN_great_depression_2
				swap_ideas = {
					remove_idea = CAN_great_depression_2
					add_idea = CAN_great_depression_1
				}
			}
			else = {
				add_ideas = CAN_great_depression_3
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.23 option canada.23.a"
		name = canada.23.a
		add_stability = -0.05
		effect_tooltip = {
			if = {
				limit = { has_event_target = CAN_great_depression_3 }
				swap_ideas = {
					remove_idea = CAN_great_depression_3
					add_idea = CAN_great_depression_2
				}
			}
			else_if = {
				limit = { has_event_target = CAN_great_depression_2 }
				swap_ideas = {
					remove_idea = CAN_great_depression_2
					add_idea = CAN_great_depression_1
				}
			}
			else = {
				add_ideas = CAN_great_depression_3
			}
		}
	}
}

# Government calls for election
country_event = {
	id = canada.24
	title = canada.24.t
	desc = canada.24.d
	picture = GFX_report_event_CAN_commons2

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		NOT = { has_country_flag = CAN_had_1936_election }
	}

	option = {
		log = "[GetLogInfo]: event canada.24 option canada.24.a"
		name = canada.24.a
		hidden_effect = {
			country_event = { id = canada.25 days = 20 }
		}
	}
}

# Bennett accuses government of not doing enough
country_event = {
	id = canada.25
	title = canada.25.t
	desc = canada.25.d
	picture = GFX_report_event_CAN_bennett

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		NOT = { has_country_flag = CAN_had_1936_election }
	}

	option = {
		log = "[GetLogInfo]: event canada.25 option canada.25.a"
		name = canada.25.a
		add_to_variable = { CAN_conservative_support = 1 }
		add_popularity = { ideology = social_conservative popularity = 0.05 }
		hidden_effect = {
			country_event = { id = canada.26 days = 20 random_days = 10 }
		}
	}
}

# CCF appeals to the unemployed
country_event = {
	id = canada.26
	title = canada.26.t
	desc = canada.26.d
	picture = GFX_report_event_CAN_ccf

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		NOT = { has_country_flag = CAN_had_1936_election }
	}

	option = {
		log = "[GetLogInfo]: event canada.26 option canada.26.a"
		name = canada.26.a
		add_popularity = { ideology = social_democrat popularity = 0.05 }
		add_popularity = { ideology = syndicalist popularity = 0.02 }
		hidden_effect = {
			country_event = { id = canada.27 days = 20 random_days = 10 }
		}
	}
}

# The Conscription Debate Begins
country_event = {
	id = canada.27
	title = canada.27.t
	desc = canada.27.d
	picture = GFX_report_event_CAN_protest

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		NOT = { has_country_flag = CAN_had_1936_election }
	}

	option = {
		log = "[GetLogInfo]: event canada.27 option canada.27.a"
		name = canada.27.a
		add_stability = -0.03
		add_ideas = CAN_divided_nation
		hidden_effect = {
			country_event = { id = canada.28 days = 20 random_days = 10 }
		}
	}
}

# Orange Order demonstrations at King speech
country_event = {
	id = canada.28
	title = canada.28.t
	desc = canada.28.d
	picture = GFX_report_event_king_speech

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		NOT = { has_country_flag = CAN_had_1936_election }
	}

	option = {
		log = "[GetLogInfo]: event canada.28 option canada.28.a"
		name = canada.28.a #They shouldn't have been there
		add_stability = -0.02
		add_to_variable = { CAN_liberal_support = 1 }
		add_popularity = { ideology = market_liberal popularity = 0.05 }
		hidden_effect = {
			country_event = { id = canada.30 days = 10 random_days = 5 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.28 option canada.28.b"
		name = canada.28.b #They were unfairly provoked
		add_stability = -0.02
		add_to_variable = { CAN_conservative_support = 1 }
		add_popularity = { ideology = social_conservative popularity = 0.05 }
		hidden_effect = {
			country_event = { id = canada.30 days = 10 random_days = 5 }
		}
	}
}

# Maurice Duplessis becomes Premier of Quebec
country_event = {
	id = canada.29
	title = canada.29.t
	desc = canada.29.d
	picture = GFX_report_event_CAN_duplessis

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
	}

	option = {
		log = "[GetLogInfo]: event canada.29 option canada.29.a"
		name = canada.29.a
		swap_ideas = {
			remove_idea = CAN_anglo_french_tensions_2
			add_idea = CAN_anglo_french_tensions_1
		}
	}
}

# March against conscription
country_event = {
	id = canada.30
	title = canada.30.t
	desc = canada.30.d
	picture = GFX_report_event_CAN_crowd1

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		NOT = { has_country_flag = CAN_had_1936_election }
	}

	option = {
		log = "[GetLogInfo]: event canada.30 option canada.30.a"
		name = canada.30.a
		add_stability = -0.03
		add_popularity = { ideology = market_liberal popularity = 0.05 }
		hidden_effect = {
			country_event = { id = canada.31 days = 40 random_days = 10 }
		}
	}
}

# Bennett attacks reporter over conscription
country_event = {
	id = canada.31
	title = canada.31.t
	desc = canada.31.d
	picture = GFX_report_event_CAN_bennett

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		NOT = { has_country_flag = CAN_had_1936_election }
	}

	option = {
		log = "[GetLogInfo]: event canada.31 option canada.31.a"
		name = canada.31.a #He's willing to fight
		add_stability = -0.02
		add_to_variable = { CAN_conservative_support = 1 }
		add_popularity = { ideology = social_conservative popularity = 0.05 }
		hidden_effect = {
			country_event = { id = canada.32 days = 10 random_days = 5 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.31 option canada.31.b"
		name = canada.31.b #He's an embarrassment
		add_stability = -0.02
		add_to_variable = { CAN_liberal_support = 1 }
		add_popularity = { ideology = market_liberal popularity = 0.05 }
		hidden_effect = {
			country_event = { id = canada.32 days = 10 random_days = 5 }
		}
	}
}

# H.H. Stevens and the Nationalist Party
country_event = {
	id = canada.32
	title = canada.32.t
	desc = canada.32.d
	picture = GFX_report_event_generic_rally

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		NOT = { has_country_flag = CAN_had_1936_election }
	}

	option = {
		log = "[GetLogInfo]: event canada.32 option canada.32.a"
		name = canada.32.a
		add_popularity = { ideology = national_populist popularity = 0.05 }
	}
}

# Canada at war prior to the elections
country_event = {
	id = canada.33
	title = canada.33.t
	desc = canada.33.d
	picture = GFX_report_event_CAN_edward3

	fire_only_once = yes

	trigger = {
		tag = CAN
		has_war = yes
		has_elected_government = yes
		has_country_flag = KR_british_king_base
		NOT = { has_country_flag = CAN_had_1936_election }
	}

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		hidden_effect = {
			random_country = {
				limit = {
					has_war_with = CAN
					OR = {
						is_faction_leader = yes
						is_in_faction = no
					}
				}
				save_event_target_as = war_country
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.33 option canada.33.a"
		name = canada.33.a
		add_to_variable = { CAN_conservative_support = 1 }
		add_popularity = { ideology = social_conservative popularity = 0.05 }
	}
}

# Complaints about conditions at labour camps (triggered by focus)
country_event = {
	id = canada.34
	title = canada.34.t
	desc = canada.34.d
	picture = GFX_report_event_CAN_camp

	is_triggered_only = yes

	trigger = {
		OR = {
			has_idea = CAN_work_camps
			has_idea = CAN_work_camps_2
		}
	}

	immediate = {
		hidden_effect = {
			add_popularity = { ideology = social_democrat popularity = 0.05 }
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.34 option canada.34.a"
		name = canada.34.a # Shut down the camps
		ai_chance = {
			base = 20
			modifier = {
				factor = 2
				has_government = market_liberal
			}
			modifier = {
				factor = 0.5
				has_government = social_conservative
			}
		}
		set_country_flag = CAN_camps_shut_down
		add_political_power = 25
		if = {
			limit = { has_idea = CAN_work_camps }
			remove_ideas = CAN_work_camps
		}
		if = {
			limit = { has_idea = CAN_work_camps_2 }
			remove_ideas = CAN_work_camps_2
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.34 option canada.34.b"
		name = canada.34.b # Improve conditions
		ai_chance = {
			base = 30
			modifier = {
				factor = 0.5
				has_government = social_conservative
			}
		}
		add_political_power = -50
		if = {
			limit = { has_idea = CAN_work_camps_2 }
			swap_ideas = {
				remove_idea = CAN_work_camps_2
				add_idea = CAN_work_camps
			}
		}
		hidden_effect = {
			country_event = { id = canada.35 days = 730 random_days = 60 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.34 option canada.34.c"
		name = canada.34.c # These men should be grateful!
		ai_chance = {
			base = 50
			modifier = {
				factor = 2
				has_authoritarian_government = yes
			}
			modifier = {
				factor = 0.5
				has_government = market_liberal
			}
			modifier = {
				factor = 0.5
				has_country_flag = CAN_lib_ccf_coalition
			}
		}
		set_temp_variable = { ideology_change_var = -0.05 }
		change_ruling_party_popularity = yes
		hidden_effect = {
			country_event = { id = canada.35 days = 365 random_days = 60 }
		}
	}
}

# The 'March on Ottawa'
country_event = {
	id = canada.35
	title = canada.35.t
	desc = canada.35.d
	picture = GFX_report_event_CAN_camp

	is_triggered_only = yes

	trigger = {
		OR = {
			has_idea = CAN_work_camps
			has_idea = CAN_work_camps_2
		}
	}

	immediate = {
		hidden_effect = {
			set_temp_variable = { ideology_change_var = -0.05 }
			change_ruling_party_popularity = yes
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.35 option canada.35.a"
		name = canada.35.a # Shut down the camps
		ai_chance = {
			base = 50
			modifier = {
				factor = 2
				has_government = market_liberal
			}
			modifier = {
				factor = 0.5
				has_government = social_conservative
			}
		}
		set_country_flag = CAN_camps_shut_down
		if = {
			limit = { has_idea = CAN_work_camps }
			remove_ideas = CAN_work_camps
		}
		if = {
			limit = { has_idea = CAN_work_camps_2 }
			remove_ideas = CAN_work_camps_2
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.35 option canada.35.b"
		name = canada.35.b # Improve conditions
		ai_chance = {
			base = 50
			modifier = {
				factor = 2
				has_authoritarian_government = yes
			}
			modifier = {
				factor = 0.5
				has_government = market_liberal
			}
			modifier = {
				factor = 0.5
				has_country_flag = CAN_lib_ccf_coalition
			}
		}
		set_country_flag = CAN_camps_not_shut_down
		add_political_power = -50
		if = {
			limit = { has_idea = CAN_work_camps_2 }
			swap_ideas = {
				remove_idea = CAN_work_camps_2
				add_idea = CAN_work_camps
			}
		}
	}
}

# Unemployment Insurance proposed
country_event = {
	id = canada.36
	title = canada.36.t
	picture = GFX_report_event_CAN_camp

	desc = {
		text = canada.36.d.camps
		trigger = { has_country_flag = CAN_camps_not_shut_down }
	}
	desc = {
		text = canada.36.d.nocamps
		trigger = { has_country_flag = CAN_camps_shut_down }
	}

	fire_only_once = yes

	trigger = {
		tag = CAN
		date > 1940.1.1
		OR = {
			has_government = market_liberal
			has_left_democratic_government = yes
		}
		OR = {
			has_country_flag = CAN_camps_not_shut_down
			has_country_flag = CAN_camps_shut_down
		}
		surrender_progress < 0.10
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		log = "[GetLogInfo]: event canada.36 option canada.36.a"
		name = canada.36.a # Pass the new law
		ai_chance = {
			base = 70
			modifier = {
				factor = 2
				has_government = social_democrat
			}
			modifier = {
				factor = 0.20
				has_political_power < 0
			}
		}
		add_political_power = -50
		add_popularity = { ideology = social_democrat popularity = 0.05 }
		if = {
			limit = { has_idea = CAN_work_camps }
			swap_ideas = {
				remove_idea = CAN_work_camps
				add_idea = CAN_unemployment_insurance_idea
			}
		}
		else_if = {
			limit = { has_idea = CAN_work_camps_2 }
			swap_ideas = {
				remove_idea = CAN_work_camps_2
				add_idea = CAN_unemployment_insurance_idea
			}
		}
		else = {
			add_ideas = CAN_unemployment_insurance_idea
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.36 option canada.36.b"
		name = canada.36.b # Just get rid of the camps
		trigger = {
			OR = {
				has_idea = CAN_work_camps
				has_idea = CAN_work_camps_2
			}
		}
		ai_chance = {
			base = 20
			modifier = {
				factor = 2
				has_political_power < 0
			}
		}
		add_stability = -0.05
		add_popularity = { ideology = social_democrat popularity = 0.05 }
		if = {
			limit = { has_idea = CAN_work_camps }
			remove_ideas = CAN_work_camps
		}
		if = {
			limit = { has_idea = CAN_work_camps_2 }
			remove_ideas = CAN_work_camps_2
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.36 option canada.36.c"
		name = canada.36.c # We are fine as we are
		trigger = {
			NOT = { has_government = social_democrat }
		}
		ai_chance = { base = 10 }
		add_stability = -0.05
		set_temp_variable = { ideology_change_var = -0.05 }
		change_ruling_party_popularity = yes
		add_popularity = { ideology = social_democrat popularity = 0.10 }
	}
}

# Anti-Syndicalism on the Canadian Broadcasting Corp (triggered by focus)
country_event = {
	id = canada.37
	title = canada.37.t
	desc = canada.37.d
	picture = GFX_report_event_spain_civil_war_soldiers

	is_triggered_only = yes

	trigger = {
		has_idea = CAN_cbc_idea
		has_socialist_government = no
		country_exists = ENG
	}

	option = {
		log = "[GetLogInfo]: event canada.37 option canada.37.a"
		name = canada.37.a #The CBC is fine as it is
		ai_chance = { base = 40 }
		add_political_power = 25
	}
	option = {
		log = "[GetLogInfo]: event canada.37 option canada.37.b"
		name = canada.37.b #Put Reith in charge of the CBC
		ai_chance = { base = 30 }
		add_stability = -0.02
		add_popularity = { ideology = social_democrat popularity = -0.03 }
		add_popularity = { ideology = syndicalist popularity = -0.03 }
	}
	option = {
		log = "[GetLogInfo]: event canada.37 option canada.37.c"
		name = canada.37.c #Put Reith in charge, so long as he focuses attention on our foes abroad
		ai_chance = { base = 40 }
		add_war_support = 0.10
		every_country = {
			limit = { has_socialist_government = yes }
			add_opinion_modifier = { target = CAN modifier = KR_hates_govt }
		}
	}
}

# Billy Bishop demands more priority for the airforce
country_event = {
	id = canada.38
	title = canada.38.t
	desc = canada.38.d
	picture = GFX_report_event_SWE_aircraft

	is_triggered_only = yes

	# trigger = {
	# 	OR = {
	# 		has_idea = CAN_william_avery_bishop_air_chief
	# 		has_idea = CAN_william_avery_bishop_high_command
	# 	}
	# }

	option = {
		log = "[GetLogInfo]: event canada.38 option canada.38.a"
		name = canada.38.a #Bishop is a good man and I trust his methods
		ai_chance = { base = 75 }
		add_political_power = -50
		add_manpower = -5000
		add_doctrine_cost_reduction = {
			name = canada.38.t
			cost_reduction = 0.5
			uses = 1
			category = air_doctrine
		}
		add_tech_bonus = {
			name = canada.38.t
			bonus = 1
			uses = 1
			category = air_equipment
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.38 option canada.38.b"
		name = canada.38.b #The air force will get no more of a priority
		ai_chance = { base = 25 }
	}
}

# Naval Exercises in the Atlantic (triggered by focus)
country_event = {
	id = canada.39
	title = canada.39.t
	desc = canada.39.d
	picture = GFX_report_event_NOR_navy

	is_triggered_only = yes

	trigger = {
		NOT = { has_war_with = ENG }
	}

	option = {
		log = "[GetLogInfo]: event canada.39 option canada.39.a"
		name = canada.39.a #Conduct a large exercise off the coast of Britain and Ireland
		trigger = { country_exists = ENG }
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				threat > 0.5
			}
		}
		add_named_threat = {
			threat = 4
			name = CAN_provocative_naval_exercise
		}
		navy_experience = 75
		ENG = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = canada.40
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.39 option canada.39.b"
		name = canada.39.b #Conduct a large exercise in the North Sea
		trigger = {
			country_exists = GER
			NOT = { has_war_with = GER }
		}
		ai_chance = { base = 10 }
		add_named_threat = {
			threat = 2
			name = CAN_provocative_naval_exercise
		}
		navy_experience = 50
		GER = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = canada.40
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.39 option canada.39.c"
		name = canada.39.c #Conduct a large exercise off the American Coast
		trigger = {
			country_exists = USA
			NOT = { has_war_with = USA }
			OR = {
				NOT = { has_global_flag = USA_civil_war_begun_flag }
				has_global_flag = USA_civil_war_over_flag
			}
		}
		ai_chance = { base = 10 }
		add_named_threat = {
			threat = 1
			name = CAN_provocative_naval_exercise
		}
		navy_experience = 35
		USA = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = canada.40
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.39 option canada.39.e"
		name = canada.39.e
		ai_chance = { base = 30 }
		navy_experience = 25
	}
}

# Country alarmed by naval exercises
country_event = {
	id = canada.40
	title = canada.40.t
	desc = canada.40.d
	picture = GFX_report_event_NOR_navy

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.40 option canada.40.a"
		name = canada.40.a #We'll play their game
		ai_chance = { base = 90 }
		effect_tooltip = {
			random_list = {
				60 = { country_event = canada.41 }
				40 = { country_event = canada.42 }
			}
		}
		hidden_effect = {
			random_list = {
				60 = {
					country_event = { id = canada.41 days = 3 }
					CAN = { country_event = { id = canada.42 days = 3 } }
				}
				40 = {
					country_event = { id = canada.42 days = 3 }
					CAN = { country_event = { id = canada.41 days = 3 } }
				}
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.40 option canada.40.b"
		name = canada.40.b #Ignore them
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				tag = ENG
			}
		}
		add_political_power = -30
	}
}

# Lost the naval games
country_event = {
	id = canada.41
	title = canada.41.t
	picture = GFX_report_event_NOR_navy

	desc = {
		text = canada.41.can
		trigger = { tag = CAN }
	}
	desc = {
		text = canada.41.oth
		trigger = { NOT = { tag = CAN } }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.41 option canada.41.a"
		name = canada.41.a
		navy_experience = 25
		add_political_power = -50
		add_timed_idea = {
			idea = CAN_navy_games_lost
			days = 180
		}
	}
}

# Won the naval games
country_event = {
	id = canada.42
	title = canada.42.t
	picture = GFX_report_event_NOR_navy

	desc = {
		text = canada.42.can
		trigger = { tag = CAN }
	}
	desc = {
		text = canada.42.oth
		trigger = { NOT = { tag = CAN } }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.42 option canada.42.a"
		name = canada.42.a
		trigger = { tag = CAN }
		navy_experience = 50
		add_political_power = 50
		add_timed_idea = {
			idea = CAN_navy_games_won
			days = 180
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.42 option canada.42.b"
		name = canada.42.b
		trigger = { NOT = { tag = CAN } }
		navy_experience = 25
		add_political_power = 50
		add_timed_idea = {
			idea = CAN_navy_games_won
			days = 180
		}
	}
}

### ELECTION EVENTS

# 1936 Election
country_event = {
	id = canada.50
	title = canada.50.t
	desc = canada.50.d
	picture = GFX_report_event_CAN_election

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		NOT = { has_country_flag = CAN_had_1936_election }
	}

	immediate = {
		hidden_effect = {
			multiply_variable = { CAN_conservative_support = 10 }
			multiply_variable = { CAN_liberal_support = 10 }
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.50 option canada.50.a"
		name = canada.50.a #Liberals under Mackenzie King
		ai_chance = {
			base = 50
			modifier = {
				add = CAN_liberal_support
			}
			modifier = {
				add = 10
				check_variable = { king_popularity < 3 }
				check_variable = { king_popularity > 1 }
			}
			modifier = {
				add = 20
				check_variable = { king_popularity < 2 }
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB_SOCDEM }
					has_game_rule = { rule = CAN_path option = CAN_PATH_SOCCON }
					has_game_rule = { rule = CAN_path option = CAN_PATH_AUTDEM }
				}
			}
		}
		clear_variable = CAN_conservative_support
		clear_variable = CAN_liberal_support
		set_country_flag = CAN_had_1936_election
		add_popularity = { ideology = market_liberal popularity = 0.20 }
		set_politics = {
			ruling_party = market_liberal
			election_frequency = 60
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:social_liberal }
		add_to_coalition = yes
		CAN_add_mackenzie_king_sic = yes
		hidden_effect = {
			country_event = { id = canada.51 days = 1 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.50 option canada.50.b"
		name = canada.50.b #Conservatives under R.B. Bennett
		ai_chance = {
			base = 50
			modifier = {
				add = CAN_conservative_support
			}
			modifier = {
				add = 10
				check_variable = { king_popularity > 3 }
				check_variable = { king_popularity < 5 }
			}
			modifier = {
				add = 20
				check_variable = { king_popularity > 4 }
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB_SOCDEM }
					has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB }
				}
			}
		}
		clear_variable = CAN_conservative_support
		clear_variable = CAN_liberal_support
		set_country_flag = CAN_had_1936_election
		add_popularity = { ideology = social_conservative popularity = 0.20 }
		set_politics = {
			ruling_party = social_conservative
			election_frequency = 60
			elections_allowed = yes
		}
		CAN_add_conservative_second_in_command = yes
		hidden_effect = {
			country_event = { id = canada.51 days = 1 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.50 option canada.50.c"
		name = canada.50.c #Liberal Coalition with the CCF
		ai_chance = {
			base = 25
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB }
					has_game_rule = { rule = CAN_path option = CAN_PATH_SOCCON }
					has_game_rule = { rule = CAN_path option = CAN_PATH_AUTDEM }
				}
			}
		}
		clear_variable = CAN_conservative_support
		clear_variable = CAN_liberal_support
		set_country_flag = CAN_had_1936_election
		set_country_flag = CAN_lib_ccf_coalition
		add_popularity = { ideology = market_liberal popularity = 0.10 }
		add_popularity = { ideology = social_democrat popularity = 0.10 }
		set_politics = {
			ruling_party = market_liberal
			election_frequency = 60
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:social_democrat }
		add_to_coalition = yes
		set_temp_variable = { coalition_partner_var = token:social_liberal }
		add_to_coalition = yes
		CAN_add_mackenzie_king_sic = yes
		hidden_effect = {
			country_event = { id = canada.51 days = 1 }
		}
	}
}

# King Congratulates Government
country_event = {
	id = canada.51
	picture = GFX_report_event_CAN_edward2

	title = {
		text = canada.51.t.lib
		trigger = {
			has_government = market_liberal
		}
	}
	title = {
		text = canada.51.t.con
		trigger = {
			has_government = social_conservative
		}
	}

	desc = {
		text = canada.51.d.lib
		trigger = {
			has_government = market_liberal
			NOT = { has_country_flag = CAN_lib_ccf_coalition }
		}
	}
	desc = {
		text = canada.51.d.libccf
		trigger = {
			has_government = market_liberal
			has_country_flag = CAN_lib_ccf_coalition
		}
	}
	desc = {
		text = canada.51.d.con
		trigger = {
			has_government = social_conservative
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.51 option canada.51.a"
		name = canada.51.a
		if = {
			limit = { has_country_flag = CAN_lib_ccf_coalition }
			add_stability = 0.05
		}
		else = {
			add_stability = 0.10
		}
	}
}

# Bill C-7 Debate Begins
country_event = {
	id = canada.52
	title = canada.52.t
	picture = GFX_report_event_CAN_commons1

	desc = {
		text = canada.52.d.lib
		trigger = { has_government = market_liberal }
	}
	desc = {
		text = canada.52.d.cons
		trigger = { has_government = social_conservative }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.52 option canada.52.a"
		name = canada.52.a
		hidden_effect = {
			if = {
				limit = { has_government = social_conservative }
				country_event = { id = canada.53 days = 5 }
			}
			else = {
				country_event = { id = canada.54 days = 5 }
			}
		}
	}
}

# Conservatives: Do we implement Full Conscription?
country_event = {
	id = canada.53
	title = canada.53.t
	desc = canada.53.d
	picture = GFX_report_event_CAN_commons1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.53 option canada.53.a"
		name = canada.53.a #Full conscription
		ai_chance = {
			base = 75
			modifier = {
				factor = 1.5
				has_war = yes
			}
			modifier = {
				add = 15
				GBR_henry_page_croft = { is_political_advisor = yes }
			}
		}
		set_country_flag = CAN_C7_full_cons
		custom_effect_tooltip = CAN_will_enact_full_conscription
		hidden_effect = {
			country_event = { id = canada.56 days = 20 } #Industry
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.53 option canada.53.b"
		name = canada.53.b #Limited conscription
		ai_chance = {
			base = 25
			modifier = {
				add = 15
				has_country_flag = CAN_has_senate_reform
			}
			modifier = {
				add = 10
				GBR_robert_gascoyne_cecil = { is_political_advisor = yes }
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = CAN_path option = CAN_PATH_AUTDEM }
			}
		}
		add_political_power = 25
		set_country_flag = CAN_C7_limited_cons
		custom_effect_tooltip = CAN_will_enact_limited_conscription
		hidden_effect = {
			country_event = { id = canada.56 days = 20 } #Industry
		}
	}
}

# Liberals: Do we implement Full Conscription?
country_event = {
	id = canada.54
	title = canada.54.t
	desc = canada.54.d
	picture = GFX_report_event_CAN_commons1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.54 option canada.54.a"
		name = canada.54.a #No conscription, as promised
		ai_chance = {
			base = 60
			modifier = {
				factor = 0.5
				has_war = yes
			}
			modifier = {
				add = 20
				GBR_robert_gascoyne_cecil = { is_political_advisor = yes }
			}
		}
		set_country_flag = CAN_C7_no_cons
		custom_effect_tooltip = CAN_will_enact_no_conscription
		hidden_effect = {
			country_event = { id = canada.56 days = 20 } #Industry
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.54 option canada.54.b"
		name = canada.54.b #Limited conscription
		ai_chance = {
			base = 40
			modifier = {
				factor = 0.5
				has_country_flag = CAN_has_senate_reform
			}
			modifier = {
				add = 10
				GBR_henry_page_croft = { is_political_advisor = yes }
			}
		}
		set_temp_variable = { ideology_change_var = -0.05 }
		change_ruling_party_popularity = yes
		set_country_flag = CAN_C7_limited_cons
		custom_effect_tooltip = CAN_will_enact_limited_conscription
		hidden_effect = {
			country_event = { id = canada.55 days = 5 } #Progressives break ranks
			country_event = { id = canada.56 days = 20 } #Industry
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.54 option canada.54.c"
		name = canada.54.c #Full conscription
		ai_chance = { base = 0 }
		set_temp_variable = { ideology_change_var = -0.1 }
		change_ruling_party_popularity = yes
		set_country_flag = CAN_C7_full_cons
		custom_effect_tooltip = CAN_will_enact_full_conscription
		hidden_effect = {
			country_event = { id = canada.55 days = 5 } #Progressives break ranks
			country_event = { id = canada.56 days = 20 } #Industry
		}
	}
}

# Progressives break ranks over Conscription
country_event = {
	id = canada.55
	title = canada.55.t
	picture = GFX_report_event_CAN_cabinet2

	desc = {
		text = canada.55.d.limccf
		trigger = {
			has_country_flag = CAN_C7_limited_cons
			has_country_flag = CAN_lib_ccf_coalition
		}
	}
	desc = {
		text = canada.55.d.limnoccf
		trigger = {
			has_country_flag = CAN_C7_limited_cons
			NOT = { has_country_flag = CAN_lib_ccf_coalition }
		}
	}
	desc = {
		text = canada.55.d.fullccf
		trigger = {
			has_country_flag = CAN_C7_full_cons
			has_country_flag = CAN_lib_ccf_coalition
		}
	}
	desc = {
		text = canada.55.d.fullnoccf
		trigger = {
			has_country_flag = CAN_C7_full_cons
			NOT = { has_country_flag = CAN_lib_ccf_coalition }
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.55 option canada.55.a"
		name = canada.55.a
		if = {
			limit = {
				has_country_flag = CAN_C7_limited_cons
				has_country_flag = CAN_lib_ccf_coalition
			}
			add_political_power = -50
		}
		else_if = {
			limit = {
				has_country_flag = CAN_C7_limited_cons
				NOT = { has_country_flag = CAN_lib_ccf_coalition }
			}
			add_political_power = -25
		}
		else_if = {
			limit = {
				has_country_flag = CAN_C7_full_cons
				has_country_flag = CAN_lib_ccf_coalition
			}
			add_political_power = -100
		}
		else_if = {
			limit = {
				has_country_flag = CAN_C7_full_cons
				NOT = { has_country_flag = CAN_lib_ccf_coalition }
			}
			add_political_power = -75
		}
	}
}

# Bill C-7: The Future of Canada's Industry
country_event = {
	id = canada.56
	title = canada.56.t
	desc = canada.56.d
	picture = GFX_report_event_generic_factory

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.56 option canada.56.a"
		name = canada.56.a #Liberal plan
		trigger = { has_government = market_liberal }
		ai_chance = {
			base = 60
			modifier = {
				factor = 1.5
				GBR_robert_gascoyne_cecil = { is_political_advisor = yes }
			}
		}
		set_country_flag = CAN_C7_econ_lib
		custom_effect_tooltip = CAN_will_build_civ_slots
		hidden_effect = {
			country_event = { id = canada.57 days = 20 } #Security
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.56 option canada.56.b"
		name = canada.56.b #Conservative plan
		trigger = { has_government = social_conservative }
		ai_chance = {
			base = 60
			modifier = {
				factor = 1.5
				GBR_henry_page_croft = { is_political_advisor = yes }
			}
		}
		set_country_flag = CAN_C7_econ_conserv
		custom_effect_tooltip = CAN_will_build_mil_docks
		hidden_effect = {
			country_event = { id = canada.57 days = 20 } #Security
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.56 option canada.56.c"
		name = canada.56.c #Compromise plan
		ai_chance = {
			base = 40
			modifier = {
				factor = 1.5
				has_country_flag = CAN_lib_ccf_coalition
			}
			modifier = {
				factor = 2
				has_government = social_conservative
				has_country_flag = CAN_has_senate_reform
			}
			modifier = {
				factor = 0.75
				has_government = social_conservative
				NOT = { has_country_flag = CAN_has_senate_reform }
			}
			modifier = {
				factor = 0.5
				has_government = market_liberal
				has_country_flag = CAN_has_senate_reform
			}
		}
		add_political_power = 25
		set_country_flag = CAN_C7_econ_comp
		custom_effect_tooltip = CAN_will_build_comp
		hidden_effect = {
			country_event = { id = canada.57 days = 20 } #Security
		}
	}
}

# Bill C-7: Domestic Security
country_event = {
	id = canada.57
	title = canada.57.t
	desc = canada.57.d
	picture = GFX_report_event_HOL_dutch_police

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.57 option canada.57.a"
		name = canada.57.a #Secret Police under Ormonde Winter
		ai_chance = {
			base = 30
			modifier = {
				factor = 2
				has_government = social_conservative
			}
			modifier = {
				factor = 0.5
				has_government = market_liberal
				OR = {
					has_country_flag = CAN_C7_econ_comp
					has_country_flag = CAN_C7_limited_cons
					has_country_flag = CAN_C7_full_cons
				}
			}
			modifier = {
				factor = 0.1
				has_government = market_liberal
				has_country_flag = CAN_C7_full_cons
			}
		}
		add_political_power = 50
		set_temp_variable = { ideology_change_var = -0.1 }
		change_ruling_party_popularity = yes
		set_country_flag = CAN_C7_sec_winter
		custom_effect_tooltip = CAN_secret_police_winter
	}
	option = {
		log = "[GetLogInfo]: event canada.57 option canada.57.b"
		name = canada.57.b #Secret Police under Ernest Lapointe
		ai_chance = {
			base = 30
			modifier = {
				factor = 0.5
				has_government = social_conservative
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = CAN_path option = CAN_PATH_AUTDEM }
			}
		}
		set_temp_variable = { ideology_change_var = -0.05 }
		change_ruling_party_popularity = yes
		set_country_flag = CAN_C7_sec_lapointe
		custom_effect_tooltip = CAN_secret_police_lapointe
	}
	option = {
		log = "[GetLogInfo]: event canada.57 option canada.57.c"
		name = canada.57.c #We're all Canadian and we're all in it together!
		ai_chance = {
			base = 40
			modifier = {
				factor = 0.5
				has_government = social_conservative
			}
			modifier = {
				factor = 2
				has_country_flag = CAN_lib_ccf_coalition
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = CAN_path option = CAN_PATH_AUTDEM }
			}
		}
		set_country_flag = CAN_C7_sec_none
		set_temp_variable = { ideology_change_var = 0.05 }
		change_ruling_party_popularity = yes
	}
}

# Voting on the Bill Begins
country_event = {
	id = canada.58
	title = canada.58.t
	desc = canada.58.d
	picture = GFX_report_event_CAN_commons1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.58 option canada.58.a"
		name = canada.58.a
		trigger = { has_government = social_conservative }
		hidden_effect = {
			set_variable = { chance_pass = 80 }
			if = {
				limit = { NOT = { has_country_flag = CAN_has_senate_reform } }
				add_to_variable = { chance_pass = 10 }
			}
			if = {
				limit = {
					has_country_flag = CAN_C7_full_cons
					GBR_robert_gascoyne_cecil = { is_political_advisor = no }
				}
				subtract_from_variable = { chance_pass = 10 }
			}
			if = {
				limit = { has_country_flag = CAN_C7_econ_comp }
				add_to_variable = { chance_pass = 10 }
			}
			if = {
				limit = { has_country_flag = CAN_C7_sec_none }
				subtract_from_variable = { chance_pass = 10 }
			}
			if = {
				limit = { has_country_flag = CAN_C7_sec_lapointe }
				add_to_variable = { chance_pass = 10 }
			}
			set_variable = { vote = random }
			multiply_variable = { vote = 100 }
			if = {
				limit = { check_variable = { vote < chance_pass } }
				country_event = { id = canada.59 days = 1 }
			}
			else_if = {
				limit = {
					OR = {
						has_game_rule = { rule = CAN_path option = CAN_PATH_SOCCON }
						has_game_rule = { rule = CAN_path option = CAN_PATH_AUTDEM }
					}
				}
				country_event = { id = canada.59 days = 1 }
			}
			else = {
				country_event = { id = canada.61 days = 1 }
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.58 option canada.58.a"
		name = canada.58.a
		trigger = { has_government = market_liberal }
		hidden_effect = {
			set_variable = { chance_pass = 80 }
			if = {
				limit = { has_country_flag = CAN_has_senate_reform }
				add_to_variable = { chance_pass = 10 }
			}
			if = {
				limit = { has_country_flag = CAN_lib_ccf_coalition }
				subtract_from_variable = { chance_pass = 30 }
			}
			if = {
				limit = { has_country_flag = CAN_C7_limited_cons }
				subtract_from_variable = { chance_pass = 10 }
			}
			if = {
				limit = { has_country_flag = CAN_C7_full_cons }
				subtract_from_variable = { chance_pass = 20 }
			}
			if = {
				limit = { has_country_flag = CAN_C7_econ_comp }
				add_to_variable = { chance_pass = 10 }
			}
			if = {
				limit = { has_country_flag = CAN_C7_sec_none }
				add_to_variable = { chance_pass = 10 }
			}
			if = {
				limit = {
					has_country_flag = CAN_lib_ccf_coalition
					has_country_flag = CAN_C7_sec_winter
					OR = {
						has_country_flag = CAN_C7_full_cons
						has_country_flag = CAN_C7_limited_cons
					}
				}
				add_to_variable = { chance_pass = 10 }
			}
			if = {
				limit = { GBR_robert_gascoyne_cecil = { is_political_advisor = yes } }
				add_to_variable = { chance_pass = 10 }
			}
			set_variable = { vote = random }
			multiply_variable = { vote = 100 }
			if = {
				limit = { check_variable = { vote < chance_pass } }
				country_event = { id = canada.59 days = 1 }
			}
			else_if = {
				limit = {
					OR = {
						has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB_SOCDEM }
						has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB }
					}
				}
				country_event = { id = canada.59 days = 1 }
			}
			else = {
				country_event = { id = canada.61 days = 1 }
			}
		}
	}
}

# Bill C-7 Passes!
country_event = {
	id = canada.59
	title = canada.59.t
	desc = canada.59.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.59 option canada.59.a"
		name = canada.59.a
		add_political_power = 200
		if = {
			limit = { has_idea = CAN_divided_nation }
			remove_ideas = CAN_divided_nation
		}
		# add conscription changes
		if = {
			limit = { has_country_flag = CAN_C7_full_cons }
			clr_country_flag = cannot_have_conscription
			add_ideas = extensive_conscription
		}
		if = {
			limit = { has_country_flag = CAN_C7_limited_cons }
			clr_country_flag = cannot_have_conscription
			set_country_flag = cannot_have_extensive_conscription
			add_ideas = limited_conscription
		}
		if = {
			limit = {
				has_country_flag = CAN_C7_no_cons
				NOT = { has_idea = CAN_adv_training_idea_1 }
			}
			add_ideas = CAN_professional_army
		}
		# add industry changes
		if = {
			limit = { has_country_flag = CAN_C7_econ_lib }
			add_ideas = CAN_billc7_liberal
			276 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			832 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			466 = {
				add_extra_state_shared_building_slots = 1
			}
			739 = {
				add_extra_state_shared_building_slots = 1
			}
		}
		if = {
			limit = { has_country_flag = CAN_C7_econ_conserv }
			add_ideas = CAN_billc7_tory
			276 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			464 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
		if = {
			limit = { has_country_flag = CAN_C7_econ_comp }
			add_ideas = CAN_billc7_mix
			276 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			832 = {
				add_extra_state_shared_building_slots = 1
			}
		}
		# add security changes
		if = {
			limit = { has_country_flag = CAN_C7_sec_winter }
			add_ideas = CAN_mounties_1
		}
		if = {
			limit = { has_country_flag = CAN_C7_sec_lapointe }
			add_ideas = CAN_mounties_2
		}

		set_country_flag = CAN_C7_passed
		clear_variable = chance_pass
		clear_variable = vote
		clr_country_flag = CAN_C7_full_cons
		clr_country_flag = CAN_C7_limited_cons
		clr_country_flag = CAN_C7_no_cons
		clr_country_flag = CAN_C7_econ_lib
		clr_country_flag = CAN_C7_econ_conserv
		clr_country_flag = CAN_C7_econ_comp
		clr_country_flag = CAN_C7_sec_winter
		clr_country_flag = CAN_C7_sec_lapointe

		hidden_effect = {
			if = {
				limit = { has_idea = extensive_conscription }
				country_event = { id = canada.100 days = 3 }
			}
			else_if = {
				limit = { has_idea = limited_conscription }
				country_event = { id = canada.60 days = 3 }
			}
			if = {
				limit = { has_government = market_liberal }
				country_event = { id = canada.63 days = 90 } #Meighen replaces Bennett
			}
		}
	}
}

# Quebec Demonstrations Over Limited Conscription
country_event = {
	id = canada.60
	title = canada.60.t
	picture = GFX_report_event_CAN_quebec1

	desc = {
		text = canada.60.d.cons
		trigger = { NOT = { has_government = market_liberal } }
	}
	desc = {
		text = canada.60.d.lib
		trigger = { has_government = market_liberal }
	}

	is_triggered_only = yes

	trigger = {
		controls_all_owned_states = yes
	}

	option = {
		log = "[GetLogInfo]: event canada.60 option canada.60.a"
		name = canada.60.a
		add_stability = -0.05
		every_owned_state = {
			limit = {
				OR = {
					state = 466 #Saguenay
					state = 468 #Saint Lawrence
					state = 832 #Quebec
				}
			}
			damage_building = {
				type = infrastructure
				damage = 1.0
			}
		}
	}
}

# Bill C-7 Fails!
country_event = {
	id = canada.61
	title = canada.61.t
	desc = canada.61.d
	picture = GFX_report_event_AST_parliament1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.61 option canada.61.a"
		name = canada.61.a
		add_political_power = -100
		hidden_effect = {
			country_event = { id = canada.62 days = 3 }
		}
	}
}

# Vote of No Confidence - Government Falls
country_event = {
	id = canada.62
	title = canada.62.t
	picture = GFX_report_event_AST_parliament1

	desc = {
		text = canada.62.d.cons
		trigger = { has_government = social_conservative }
	}
	desc = {
		text = canada.62.d.lib
		trigger = { NOT = { has_government = social_conservative } }
	}

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
	}

	option = {
		log = "[GetLogInfo]: event canada.62 option canada.62.a"
		name = canada.62.a
		set_country_flag = CAN_fallen_government
		custom_effect_tooltip = elections_in_three_months
		add_stability = -0.10
		set_temp_variable = { ideology_change_var = -0.1 }
		change_ruling_party_popularity = yes
		hidden_effect = {
			if = {
				limit = { has_government = market_liberal }
				set_variable = { CAN_conservative_support = 3 }
			}
			if = {
				limit = { has_government = social_conservative }
				set_variable = { CAN_liberal_support = 3 }
			}
			meta_effect = {
				text = {
					set_politics = {
						ruling_party = var:current_party_ideology_group
						last_election = "[CURRENT_DATE]"
						election_frequency = 3
						elections_allowed = yes
					}
				}
				CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
			}
			country_event = { id = canada.63 days = 10 } #Manion replaces Bennett
			country_event = { id = canada.65 days = 30 random_days = 10 } #King Promises New Deal
			country_event = { id = canada.66 days = 50 random_days = 10 } #Manion Outlines Bill C-8
		}
	}
}

# Manion Replaces Bennett as Conservative Leader
country_event = {
	id = canada.63
	title = canada.63.t
	picture = GFX_report_event_CAN_manion

	desc = {
		text = canada.63.d.fallen
		trigger = {
			has_government = social_conservative
			has_country_flag = CAN_fallen_government
		}
	}
	desc = {
		text = canada.63.d.stepdown
		trigger = {
			has_government = social_conservative
			NOT = { has_country_flag = CAN_fallen_government }
		}
	}
	desc = {
		text = canada.63.d.challenge
		trigger = {
			NOT = { has_government = social_conservative }
			has_country_flag = CAN_fallen_government
		}
	}
	desc = {
		text = canada.63.d
		trigger = {
			NOT = { has_government = social_conservative }
			NOT = { has_country_flag = CAN_fallen_government }
		}
	}

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
	}

	option = {
		log = "[GetLogInfo]: event canada.63 option canada.63.a"
		name = canada.63.a
		retire_character = CAN_richard_bedford_bennett
		add_popularity = { ideology = social_conservative popularity = 0.05 }
		if = {
			limit = { CAN_is_dominion = no }
			add_country_leader_role = {
				character = CAN_robert_manion
				country_leader = { ideology = social_conservative_subtype }
				promote_leader = yes
			}
		}
		else = {
			add_country_leader_role = {
				character = CAN_robert_manion
				country_leader = { ideology = social_conservative_subtype }
			}
			if = {
				limit = { has_government = social_conservative }
				activate_advisor = CAN_robert_manion_sic
			}
		}
	}
}

# ACW Energizes Conservatives
country_event = {
	id = canada.64
	title = canada.64.t
	desc = canada.64.d
	picture = GFX_report_event_USA_soldiers_running

	fire_only_once = yes

	trigger = {
		tag = CAN
		has_elected_government = yes
		has_country_flag = KR_british_king_base
		has_country_flag = CAN_fallen_government
		has_global_flag = USA_civil_war_begun_flag
		NOT = { has_global_flag = USA_civil_war_over_flag }
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		log = "[GetLogInfo]: event canada.64 option canada.64.a"
		name = canada.64.a
		add_to_variable = { CAN_conservative_support = 1 }
		add_war_support = 0.05
		add_popularity = { ideology = social_conservative popularity = 0.05 }
	}
}

# King Promises New Deal
country_event = {
	id = canada.65
	title = canada.65.t
	picture = GFX_report_event_CAN_mackenzie_king2

	is_triggered_only = yes

	desc = {
		text = canada.65.d.cons
		trigger = { NOT = { has_government = market_liberal } }
	}
	desc = {
		text = canada.65.d.lib
		trigger = { has_government = market_liberal }
	}

	trigger = {
		has_elected_government = yes
		has_country_flag = CAN_fallen_government
	}

	option = {
		log = "[GetLogInfo]: event canada.65 option canada.65.a"
		name = canada.65.a
		add_stability = 0.02
		add_popularity = { ideology = market_liberal popularity = 0.05 }
	}
}

# Manion Outlines Bill C-8
country_event = {
	id = canada.66
	title = canada.66.t
	picture = GFX_report_event_CAN_manion

	desc = {
		text = canada.66.d.cons
		trigger = { has_government = social_conservative }
	}
	desc = {
		text = canada.66.d.lib
		trigger = { NOT = { has_government = social_conservative } }
	}

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		has_country_flag = CAN_fallen_government
	}

	option = {
		log = "[GetLogInfo]: event canada.66 option canada.66.a"
		name = canada.66.a
		add_stability = 0.02
		add_popularity = { ideology = social_conservative popularity = 0.05 }
	}
}

# New Election
country_event = {
	id = canada.67
	title = canada.67.t
	desc = canada.67.d
	picture = GFX_report_event_CAN_election

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		has_country_flag = CAN_had_1936_election
		has_country_flag = CAN_fallen_government
	}

	immediate = {
		clr_country_flag = CAN_lib_ccf_coalition
		hidden_effect = {
			multiply_variable = { CAN_conservative_support = 20 }
			multiply_variable = { CAN_liberal_support = 20 }
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.67 option canada.67.a"
		name = canada.67.a #Liberals get majority
		ai_chance = {
			base = 50
			modifier = {
				add = CAN_liberal_support
			}
			modifier = {
				add = 10
				check_variable = { king_popularity < 3 }
				check_variable = { king_popularity > 1 }
			}
			modifier = {
				add = 20
				check_variable = { king_popularity < 2 }
			}
		}
		clear_variable = CAN_conservative_support
		clear_variable = CAN_liberal_support
		clr_country_flag = CAN_fallen_government
		add_popularity = { ideology = market_liberal popularity = 0.20 }
		set_politics = {
			ruling_party = market_liberal
			election_frequency = 60
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:social_liberal }
		add_to_coalition = yes
		CAN_add_mackenzie_king_sic = yes
		hidden_effect = {
			country_event = { id = canada.68 days = 10 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.67 option canada.67.b"
		name = canada.67.b #Conservatives get majority
		ai_chance = {
			base = 50
			modifier = {
				add = CAN_conservative_support
			}
			modifier = {
				add = 10
				check_variable = { king_popularity > 3 }
				check_variable = { king_popularity < 5 }
			}
			modifier = {
				add = 20
				check_variable = { king_popularity > 4 }
			}
		}
		clear_variable = CAN_conservative_support
		clear_variable = CAN_liberal_support
		clr_country_flag = CAN_fallen_government
		add_popularity = { ideology = social_conservative popularity = 0.20 }
		set_politics = {
			ruling_party = social_conservative
			election_frequency = 60
			elections_allowed = yes
		}
		CAN_add_conservative_second_in_command = yes
		hidden_effect = {
			country_event = { id = canada.69 days = 10 }
		}
	}
}

# Liberals Pass 'New Deal' Bill C-7
country_event = {
	id = canada.68
	title = canada.68.t
	desc = canada.68.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.68 option canada.68.a"
		name = canada.68.a
		add_political_power = 200
		if = {
			limit = { has_idea = CAN_divided_nation }
			remove_ideas = CAN_divided_nation
		}
		# add conscription changes
		if = {
			limit = {
				NOT = { has_idea = CAN_adv_training_idea_1 }
			}
			add_ideas = CAN_professional_army
		}
		# add industry changes
		add_ideas = CAN_billc7_liberal
		276 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		832 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		473 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		466 = {
			add_extra_state_shared_building_slots = 1
		}
		739 = {
			add_extra_state_shared_building_slots = 1
		}

		set_country_flag = CAN_C7_passed
		clear_variable = chance_pass
		clear_variable = vote
		clr_country_flag = CAN_C7_full_cons
		clr_country_flag = CAN_C7_limited_cons
		clr_country_flag = CAN_C7_no_cons
		clr_country_flag = CAN_C7_econ_lib
		clr_country_flag = CAN_C7_econ_conserv
		clr_country_flag = CAN_C7_econ_comp
		clr_country_flag = CAN_C7_sec_winter
		clr_country_flag = CAN_C7_sec_lapointe
	}
}

# Conservatives Pass Bill C-8
country_event = {
	id = canada.69
	title = canada.69.t
	desc = canada.69.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.69 option canada.59.a"
		name = canada.59.a
		add_political_power = 200
		if = {
			limit = { has_idea = CAN_divided_nation }
			remove_ideas = CAN_divided_nation
		}
		# add conscription changes
		clr_country_flag = cannot_have_conscription
		add_ideas = extensive_conscription
		# add industry changes
		add_ideas = CAN_billc7_tory
		276 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		832 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		464 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 1
				instant_build = yes
			}
		}
		473 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 1
				instant_build = yes
			}
		}
		# add security changes
		add_ideas = CAN_mounties_1

		set_country_flag = CAN_C7_passed
		clear_variable = chance_pass
		clear_variable = vote
		clr_country_flag = CAN_C7_full_cons
		clr_country_flag = CAN_C7_limited_cons
		clr_country_flag = CAN_C7_no_cons
		clr_country_flag = CAN_C7_econ_lib
		clr_country_flag = CAN_C7_econ_conserv
		clr_country_flag = CAN_C7_econ_comp
		clr_country_flag = CAN_C7_sec_winter
		clr_country_flag = CAN_C7_sec_lapointe

		hidden_effect = {
			country_event = { id = canada.100 days = 3 }
		}
	}
}

# Mackenzie King Retires
country_event = {
	id = canada.70
	title = canada.70.t
	desc = canada.70.d
	picture = GFX_report_event_CAN_mackenzie_king

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_character = CAN_william_lyon_mackenzie_king
	}

	option = {
		log = "[GetLogInfo]: event canada.70 option canada.70.a"
		name = canada.70.a
		retire_character = CAN_william_lyon_mackenzie_king
		if = {
			limit = { has_government = market_liberal }
			set_politics = {
				ruling_party = social_liberal
				election_frequency = 60
				elections_allowed = yes
			}
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
			CAN_add_louis_st_laurent_sic = yes
		}
	}
}

# R.B. Bennett Retires
country_event = {
	id = canada.71
	title = canada.71.t
	desc = canada.71.d
	picture = GFX_report_event_CAN_bennett

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_character = CAN_richard_bedford_bennett
	}

	option = {
		log = "[GetLogInfo]: event canada.71 option canada.71.a"
		name = canada.71.a
		retire_character = CAN_richard_bedford_bennett
		if = {
			limit = { CAN_is_dominion = no }
			add_country_leader_role = {
				character = CAN_robert_manion
				country_leader = { ideology = social_conservative_subtype }
				promote_leader = yes
			}
		}
		else = {
			add_country_leader_role = {
				character = CAN_robert_manion
				country_leader = { ideology = social_conservative_subtype }
			}
			if = {
				limit = { has_government = social_conservative }
				activate_advisor = CAN_robert_manion_sic
			}
		}
	}
}

# J.S. Woodsworth loses CCF leadership to Coldwell
country_event = {
	id = canada.72
	title = canada.72.t
	desc = canada.72.d
	picture = GFX_report_event_CAN_coldwell

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		CAN_major_james_coldwell = { can_be_country_leader = no }
	}

	option = {
		log = "[GetLogInfo]: event canada.72 option canada.71.a"
		name = canada.71.a
		retire_character = CAN_james_shaver_woodsworth
		add_popularity = { ideology = social_democrat popularity = 0.05 }
		if = {
			limit = { CAN_is_dominion = no }
			add_country_leader_role = {
				character = CAN_major_james_coldwell
				country_leader = { ideology = social_democrat_subtype }
				promote_leader = yes
			}
		}
		else = {
			add_country_leader_role = {
				character = CAN_major_james_coldwell
				country_leader = { ideology = social_democrat_subtype }
			}
			if = {
				limit = { has_government = social_democrat }
				activate_advisor = CAN_major_james_coldwell_sic
			}
		}
	}
}

# Elections after 1936
country_event = {
	id = canada.75
	title = canada.75.t
	desc = canada.75.d
	picture = GFX_report_event_CAN_election

	is_triggered_only = yes

	trigger = {
		has_elected_government = yes
		has_country_flag = CAN_had_1936_election
		NOT = { has_country_flag = CAN_fallen_government }
	}

	immediate = {
		clr_country_flag = CAN_lib_ccf_coalition
	}

	option = {
		log = "[GetLogInfo]: event canada.75 option canada.75.a"
		name = canada.75.a #Liberals get majority
		trigger = {
			has_character = CAN_william_lyon_mackenzie_king
		}
		ai_chance = {
			base = 60
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_path option = CAN_PATH_SOCCON }
					has_game_rule = { rule = CAN_path option = CAN_PATH_AUTDEM }
				}
			}
		}
		if = {
			limit = { market_liberal < 0.40 }
			add_popularity = { ideology = market_liberal popularity = 0.20 }
		}
		else_if = {
			limit = { market_liberal < 0.60 }
			add_popularity = { ideology = market_liberal popularity = 0.10 }
		}
		set_politics = {
			ruling_party = market_liberal
			election_frequency = 60
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:social_liberal }
		add_to_coalition = yes
		CAN_add_mackenzie_king_sic = yes
		hidden_effect = {
			country_event = { id = canada.76 days = 60 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.75 option canada.75.a"
		name = canada.75.a #Liberals get majority
		trigger = {
			NOT = { has_character = CAN_william_lyon_mackenzie_king }
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.8
				CAN_is_dominion = no
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						CAN_major_james_coldwell = { can_be_country_leader = yes }
						has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB_SOCDEM }
					}
					has_game_rule = { rule = CAN_path option = CAN_PATH_SOCCON }
					has_game_rule = { rule = CAN_path option = CAN_PATH_AUTDEM }
				}
			}
		}
		if = {
			limit = { social_liberal < 0.40 }
			add_popularity = { ideology = social_liberal popularity = 0.20 }
		}
		else_if = {
			limit = { social_liberal < 0.60 }
			add_popularity = { ideology = social_liberal popularity = 0.10 }
		}
		set_politics = {
			ruling_party = social_liberal
			election_frequency = 60
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:market_liberal }
		add_to_coalition = yes
		CAN_add_louis_st_laurent_sic = yes
		hidden_effect = {
			country_event = { id = canada.76 days = 60 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.75 option canada.75.b"
		name = canada.75.b #Conservatives get majority
		ai_chance = {
			base = 40
			modifier = {
				factor = 0.75
				NOT = { has_character = CAN_william_lyon_mackenzie_king }
			}
			modifier = {
				factor = 0.5
				CAN_is_dominion = no
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB_SOCDEM }
					has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB }
					AND = {
						has_game_rule = { rule = CAN_path option = CAN_PATH_AUTDEM }
						CAN_is_dominion = no
						has_completed_focus = CAN_new_path
					}
				}
			}
		}
		if = {
			limit = { social_conservative < 0.40 }
			add_popularity = { ideology = social_conservative popularity = 0.20 }
		}
		else_if = {
			limit = { social_conservative < 0.60 }
			add_popularity = { ideology = social_conservative popularity = 0.10 }
		}
		set_politics = {
			ruling_party = social_conservative
			election_frequency = 60
			elections_allowed = yes
		}
		CAN_add_conservative_second_in_command = yes
	}
	option = {
		log = "[GetLogInfo]: event canada.75 option canada.75.b"
		name = canada.75.b #Nationalists win minority with Conservative support
		trigger = {
			CAN_is_dominion = no
			has_completed_focus = CAN_new_path
		}
		ai_chance = {
			base = 10
			modifier = {
				add = 10
				date > 1945.1.1
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB_SOCDEM }
					has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB }
					has_game_rule = { rule = CAN_path option = CAN_PATH_SOCCON }
				}
			}
		}
		if = {
			limit = { national_populist < 0.40 }
			add_popularity = { ideology = national_populist popularity = 0.10 }
		}
		else_if = {
			limit = { national_populist < 0.60 }
			add_popularity = { ideology = national_populist popularity = 0.05 }
		}
		if = {
			limit = { social_conservative < 0.40 }
			add_popularity = { ideology = social_conservative popularity = 0.10 }
		}
		else_if = {
			limit = { social_conservative < 0.60 }
			add_popularity = { ideology = social_conservative popularity = 0.05 }
		}
		set_politics = {
			ruling_party = national_populist
			election_frequency = 60
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:social_conservative }
		add_to_coalition = yes
		hidden_effect = {
			country_event = { id = canada.76 days = 60 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.75 option canada.75.c"
		name = canada.75.c #CCF wins minority with Liberal support
		trigger = {
			NOT = { has_character = CAN_william_lyon_mackenzie_king }
			CAN_major_james_coldwell = { can_be_country_leader = yes }
		}
		ai_chance = {
			base = 5
			modifier = {
				add = 5
				CAN_is_dominion = no
			}
			modifier = {
				factor = 2
				date > 1945.1.1
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_path option = CAN_PATH_MARLIB }
					has_game_rule = { rule = CAN_path option = CAN_PATH_SOCCON }
					has_game_rule = { rule = CAN_path option = CAN_PATH_AUTDEM }
				}
			}
		}
		set_country_flag = CAN_lib_ccf_coalition
		if = {
			limit = { social_liberal < 0.40 }
			add_popularity = { ideology = social_liberal popularity = 0.10 }
		}
		else_if = {
			limit = { social_liberal < 0.60 }
			add_popularity = { ideology = social_liberal popularity = 0.05 }
		}
		if = {
			limit = { social_democrat < 0.40 }
			add_popularity = { ideology = social_democrat popularity = 0.10 }
		}
		else_if = {
			limit = { social_democrat < 0.60 }
			add_popularity = { ideology = social_democrat popularity = 0.05 }
		}
		set_politics = {
			ruling_party = social_democrat
			election_frequency = 60
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:social_liberal }
		add_to_coalition = yes
		CAN_add_major_james_coldwell_sic = yes
		hidden_effect = {
			country_event = { id = canada.76 days = 60 }
		}
	}
}

# Conservative party rebranded under Bracken
country_event = {
	id = canada.76
	title = canada.76.t
	desc = canada.76.d
	picture = GFX_report_event_CAN_cabinet

	trigger = {
		date > 1941.1.1
		CAN_john_bracken = { can_be_country_leader = no }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.76 option canada.76.a"
		name = canada.76.a
		add_popularity = { ideology = social_conservative popularity = 0.05 }
		set_party_name = {
			ideology = social_conservative
			long_name = CAN_prog_conservative_party_long
			name = CAN_prog_conservative_party
		}
		if = {
			limit = { has_character = CAN_richard_bedford_bennett }
			retire_character = CAN_richard_bedford_bennett
		}
		if = {
			limit = { has_character = CAN_robert_manion }
			retire_character = CAN_robert_manion
		}
		if = {
			limit = { CAN_is_dominion = no }
			add_country_leader_role = {
				character = CAN_john_bracken
				country_leader = { ideology = social_conservative_subtype }
				promote_leader = yes
			}
		}
		else = {
			add_country_leader_role = {
				character = CAN_john_bracken
				country_leader = { ideology = social_conservative_subtype }
			}
			if = {
				limit = { has_government = social_conservative }
				activate_advisor = CAN_john_bracken_sic
			}
		}
	}
}

# King replaces British PM
country_event = {
	id = canada.77
	title = canada.77.t
	desc = canada.77.d
	picture = GFX_report_event_CAN_rideau

	fire_only_once = yes

	trigger = {
		tag = CAN
		has_country_flag = CAN_king_replaces_pm
		OR = {
			GBR_henry_page_croft = { is_political_advisor = yes }
			GBR_henry_page_croft = { is_second_in_command = yes }
			GBR_robert_gascoyne_cecil = { is_political_advisor = yes }
			GBR_robert_gascoyne_cecil = { is_second_in_command = yes }
			GBR_anthony_eden = { is_political_advisor = yes }
			GBR_anthony_eden = { is_second_in_command = yes }
		}
		NOT = { has_idea = CAN_rally_the_country }
		has_country_flag = KR_british_king_base
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		log = "[GetLogInfo]: event canada.77 option canada.77.a"
		name = canada.77.a
		clr_country_flag = CAN_king_replaces_pm
		CAN_remove_current_british_pm = yes
		if = {
			limit = { has_global_flag = GBR_british_pm_slot_changed }
			activate_advisor = GBR_robert_vansittart_second_in_command
		}
		else = {
			activate_advisor = GBR_robert_vansittart_political_advisor
		}
		custom_effect_tooltip = CAN_exile_influence_decrease
		if = {
			limit = { check_variable = { king_influence > 0 } }
			subtract_from_variable = { king_influence = 1 }
		}
		else = {
			set_variable = { king_influence = 0 }
		}
		CAN_calc_exile_influence_effects = yes
	}
}

### QUEBEC EVENTS

# Riots Across Quebec (response to full conscription)
country_event = {
	id = canada.100
	title = canada.100.t
	desc = canada.100.d
	picture = GFX_report_event_CAN_quebec1

	fire_only_once = yes

	trigger = {
		tag = CAN
		is_subject = no
		OR = {
			466 = { is_owned_and_controlled_by = CAN } #Saguenay
			468 = { is_owned_and_controlled_by = CAN } #Saint Lawrence
			832 = { is_owned_and_controlled_by = CAN } #Quebec
		}
		OR = {
			has_idea = extensive_conscription
			has_idea = service_by_requirement
			has_idea = all_adults_serve
			has_idea = scraping_the_barrel
		}
		NOT = {
			surrender_progress > 0
			has_war_with = USA
			has_war_with = CSA
			has_war_with = PSA
			has_war_with = TEX
			has_war_with = NEE
			has_country_flag = CAN_quebec_was_in_flames
		}
	}

	mean_time_to_happen = {
		days = 5
	}

	option = {
		log = "[GetLogInfo]: event canada.100 option canada.100.a"
		name = canada.100.a
		set_country_flag = CAN_quebec_was_in_flames
		add_stability = -0.10
		if = {
			limit = { has_idea = CAN_anglo_french_tensions_2 }
			swap_ideas = {
				remove_idea = CAN_anglo_french_tensions_2
				add_idea = CAN_anglo_french_tensions_1
			}
		}
		else_if = {
			limit = { has_idea = CAN_anglo_french_tensions_3 }
			swap_ideas = {
				remove_idea = CAN_anglo_french_tensions_3
				add_idea = CAN_anglo_french_tensions_1
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_idea = CAN_anglo_french_tensions_1
					has_idea = CAN_anglo_french_tensions_2
					has_idea = CAN_anglo_french_tensions_3
				}
			}
			add_ideas = CAN_anglo_french_tensions_1
		}
		every_owned_state = {
			limit = {
				is_controlled_by = CAN
				OR = {
					state = 466 #Saguenay
					state = 468 #Saint Lawrence
					state = 832 #Quebec
				}
			}
			add_dynamic_modifier = { modifier = CAN_french_resistance_3 }
		}
		hidden_effect = {
			country_event = { id = canada.101 days = 15 random_days = 30 } #Bounce event
			random_other_country = {
				limit = { is_ai = no }
				news_event = { id = canada.112 days = 1 }
			}
		}
		add_ideas = CAN_quebec_in_flames_idea
	}
}

# Hidden bounce event for resistance events
country_event = {
	id = canada.101

	hidden = yes
	is_triggered_only = yes

	trigger = {
		has_idea = CAN_quebec_in_flames_idea
	}

	option = {
		log = "[GetLogInfo]: event canada.101 option AI_OPTION"
		name = AI_OPTION #Industrial Sabotage
		trigger = {
			any_owned_state = {
				OR = {
					has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
					has_dynamic_modifier = { modifier = CAN_french_resistance_2 }
					has_dynamic_modifier = { modifier = CAN_french_resistance_1 }
				}
				non_damaged_building_level = { building = industrial_complex level > 0 }
			}
		}
		ai_chance = { base = 20 }
		set_country_flag = CAN_quebec_civ
		country_event = canada.102
	}
	option = {
		log = "[GetLogInfo]: event canada.101 option AI_OPTION"
		name = AI_OPTION #Arms Sabotage
		trigger = {
			any_owned_state = {
				OR = {
					has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
					has_dynamic_modifier = { modifier = CAN_french_resistance_2 }
					has_dynamic_modifier = { modifier = CAN_french_resistance_1 }
				}
				non_damaged_building_level = { building = arms_factory level > 0 }
			}
		}
		ai_chance = { base = 20 }
		set_country_flag = CAN_quebec_arms
		country_event = canada.102
	}
	option = {
		log = "[GetLogInfo]: event canada.101 option AI_OPTION"
		name = AI_OPTION #Riots
		trigger = {
			any_owned_state = {
				OR = {
					has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
					has_dynamic_modifier = { modifier = CAN_french_resistance_2 }
					has_dynamic_modifier = { modifier = CAN_french_resistance_1 }
				}
				non_damaged_building_level = { building = infrastructure level > 0 }
			}
		}
		ai_chance = { base = 20 }
		set_country_flag = CAN_quebec_riots
		country_event = canada.102
	}
	option = {
		log = "[GetLogInfo]: event canada.101 option AI_OPTION"
		name = AI_OPTION #Ringleaders Arrested
		trigger = {
			any_owned_state = {
				OR = {
					has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
					has_dynamic_modifier = { modifier = CAN_french_resistance_2 }
				}
			}
		}
		ai_chance = { base = 10 }
		set_country_flag = CAN_quebec_ringleader
		country_event = canada.102
	}
	option = {
		log = "[GetLogInfo]: event canada.101 option AI_OPTION"
		name = AI_OPTION #Nothing
		ai_chance = {
			base = 40
			modifier = {
				add = 20
				NOT = {
					any_owned_state = {
						has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
					}
				}
			}
			modifier = {
				add = 20
				NOT = {
					any_owned_state = {
						OR = {
							has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
							has_dynamic_modifier = { modifier = CAN_french_resistance_2 }
						}
					}
				}
			}
		}
		country_event = { id = canada.101 days = 90 random_days = 45 } #Bounce event
	}
}

# Resistance event
country_event = {
	id = canada.102
	picture = GFX_report_event_IRE_bombing

	title = {
		text = canada.102.t.civ
		trigger = { has_country_flag = CAN_quebec_civ }
	}
	title = {
		text = canada.102.t.arms
		trigger = { has_country_flag = CAN_quebec_arms }
	}
	title = {
		text = canada.102.t.riots
		trigger = { has_country_flag = CAN_quebec_riots }
	}
	title = {
		text = canada.102.t.ringleader
		trigger = { has_country_flag = CAN_quebec_ringleader }
	}

	desc = {
		text = canada.102.d.civ
		trigger = { has_country_flag = CAN_quebec_civ }
	}
	desc = {
		text = canada.102.d.arms
		trigger = { has_country_flag = CAN_quebec_arms }
	}
	desc = {
		text = canada.102.d.riots
		trigger = { has_country_flag = CAN_quebec_riots }
	}
	desc = {
		text = canada.102.d.ringleader
		trigger = { has_country_flag = CAN_quebec_ringleader }
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = { has_country_flag = CAN_quebec_civ }
				random_owned_state = {
					limit = {
						OR = {
							has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
							has_dynamic_modifier = { modifier = CAN_french_resistance_2 }
							has_dynamic_modifier = { modifier = CAN_french_resistance_1 }
						}
						non_damaged_building_level = { building = industrial_complex level > 0 }
					}
					save_event_target_as = french_state
				}
			}
			else_if = {
				limit = { has_country_flag = CAN_quebec_arms }
				random_owned_state = {
					limit = {
						OR = {
							has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
							has_dynamic_modifier = { modifier = CAN_french_resistance_2 }
							has_dynamic_modifier = { modifier = CAN_french_resistance_1 }
						}
						non_damaged_building_level = { building = arms_factory level > 0 }
					}
					save_event_target_as = french_state
				}
			}
			else_if = {
				limit = { has_country_flag = CAN_quebec_riots }
				random_owned_state = {
					limit = {
						OR = {
							has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
							has_dynamic_modifier = { modifier = CAN_french_resistance_2 }
							has_dynamic_modifier = { modifier = CAN_french_resistance_1 }
						}
						non_damaged_building_level = { building = infrastructure level > 0 }
					}
					save_event_target_as = french_state
				}
			}
			else_if = {
				limit = { has_country_flag = CAN_quebec_ringleader }
				random_owned_state = {
					limit = {
						OR = {
							has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
							has_dynamic_modifier = { modifier = CAN_french_resistance_2 }
						}
					}
					save_event_target_as = french_state
				}
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.102 option canada.102.a"
		name = canada.102.a
		trigger = { NOT = { has_country_flag = CAN_quebec_ringleader } }
		event_target:french_state = {
			if = {
				limit = { ROOT = { has_country_flag = CAN_quebec_civ } }
				damage_building = {
					type = industrial_complex
					damage = 0.5
				}
			}
			else_if = {
				limit = { ROOT = { has_country_flag = CAN_quebec_arms } }
				damage_building = {
					type = arms_factory
					damage = 0.5
				}
			}
			else_if = {
				limit = { ROOT = { has_country_flag = CAN_quebec_riots } }
				damage_building = {
					type = infrastructure
					damage = 1
				}
			}
		}
		clr_country_flag = CAN_quebec_civ
		clr_country_flag = CAN_quebec_arms
		clr_country_flag = CAN_quebec_riots
		hidden_effect = {
			country_event = { id = canada.101 days = 90 random_days = 45 } #Bounce event
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.102 option canada.102.b"
		name = canada.102.b
		trigger = { has_country_flag = CAN_quebec_ringleader }
		event_target:french_state = {
			custom_effect_tooltip = CAN_resistance_effects_reduced
			CAN_reduce_french_resistance = yes
		}
		clr_country_flag = CAN_quebec_ringleader
		hidden_effect = {
			country_event = { id = canada.101 days = 90 random_days = 45 } #Bounce event
		}
	}
}

# The Montreal Conference (fired by focus)
country_event = {
	id = canada.104
	title = canada.104.t
	desc = canada.104.d
	picture = GFX_report_event_CAN_montreal

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.104 option canada.104.a"
		name = canada.104.a
		CAN_improve_french_tensions_idea = yes
		add_political_power = 50
		every_owned_state = {
			limit = {
				OR = {
					has_dynamic_modifier = { modifier = CAN_french_resistance_3 }
					has_dynamic_modifier = { modifier = CAN_french_resistance_2 }
					has_dynamic_modifier = { modifier = CAN_french_resistance_1 }
				}
			}
			custom_effect_tooltip = CAN_resistance_effects_reduced
			CAN_reduce_french_resistance = yes
		}
	}
}

# Quebec's New Status (fired by focus)
country_event = {
	id = canada.105
	title = canada.105.t
	desc = canada.105.d
	picture = GFX_report_event_CAN_quebec2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.105 option canada.105.a"
		name = canada.105.a
		add_political_power = 100
		add_ideas = CAN_anglo_french_friendship
	}
}

# Quebecois Suppression Begins (fired by focus)
country_event = {
	id = canada.106
	title = canada.106.t
	desc = canada.106.d
	picture = GFX_report_event_CAN_army3

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.106 option canada.106.a"
		name = canada.106.a
		unlock_decision_tooltip = CAN_suppress_quebec
		unlock_decision_tooltip = CAN_suppress_stlawrence
		unlock_decision_tooltip = CAN_suppress_montreal
		set_temp_variable = { ideology_change_var = -0.1 }
		change_ruling_party_popularity = yes
		CAN_improve_french_tensions_idea = yes
	}
}

# Quebec Premier Replaced (fired by focus)
country_event = {
	id = canada.107
	title = canada.107.t
	desc = canada.107.d
	picture = GFX_report_event_CAN_quebec2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.107 option canada.107.a"
		name = canada.107.a
		set_temp_variable = { ideology_change_var = -0.05 }
		change_ruling_party_popularity = yes
		add_political_power = 50
		CAN_improve_french_tensions_idea = yes
	}
}

# The War Measures Act (fired by focus)
country_event = {
	id = canada.108
	title = canada.108.t
	picture = GFX_report_event_CAN_wmact

	desc = {
		text = canada.108.d.war
		trigger = {
			has_war = yes
			any_enemy_country = { is_actual_major = yes }
		}
	}
	desc = {
		text = canada.108.d.nowar
		trigger = {
			OR = {
				has_war = no
				NOT = { any_enemy_country = { is_actual_major = yes } }
			}
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.108 option canada.108.a"
		name = canada.108.a
		set_country_flag = CAN_warmeasact_invoked
		add_political_power = 200
		add_war_support = -0.10
		unlock_decision_tooltip = CAN_suppress_quebec
		unlock_decision_tooltip = CAN_suppress_stlawrence
		unlock_decision_tooltip = CAN_suppress_montreal
		unlock_decision_tooltip = CAN_emergency_draft
		if = {
			limit = {
				OR = {
					has_idea = extensive_conscription
					has_idea = service_by_requirement
					has_idea = all_adults_serve
					has_idea = scraping_the_barrel
				}
			}
			unlock_decision_tooltip = CAN_expand_conscription_policies
		}
		unlock_decision_tooltip = CAN_expand_secret_police
		if = {
			limit = { check_variable = { king_influence < 5 } }
			custom_effect_tooltip = CAN_exile_influence_increase
			add_to_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}
		if = {
			limit = { check_variable = { king_popularity > 0 } }
			custom_effect_tooltip = CAN_king_popularity_decrease
			subtract_from_variable = { king_popularity = 1 }
			CAN_calc_royal_visit_effects = yes
		}
		CAN_add_arthur_meighen_sic = yes
		hidden_effect = {
			news_event = { id = canada.113 days = 1 }
		}
	}
}

# Demonstrations Across Canada (fired by focus)
country_event = {
	id = canada.110
	title = canada.110.t
	desc = canada.110.d
	picture = GFX_report_event_CAN_protest

	is_triggered_only = yes

	trigger = {
		has_government = authoritarian_democrat
	}

	option = {
		log = "[GetLogInfo]: event canada.110 option canada.110.a"
		name = canada.110.a
		add_stability = -0.10
		if = {
			limit = { check_variable = { king_popularity > 0 } }
			custom_effect_tooltip = CAN_king_popularity_decrease
			subtract_from_variable = { king_popularity = 1 }
			CAN_calc_royal_visit_effects = yes
		}
	}
}

# Parliament Suspended (fired by focus)
country_event = {
	id = canada.111
	title = canada.111.t
	desc = canada.111.d
	picture = GFX_report_event_CAN_meighen

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.111 option canada.111.a"
		name = canada.111.a
		custom_effect_tooltip = CAN_king_popularity_decrease
		set_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
		add_stability = -0.10
		add_political_power = 200
		add_popularity = { ideology = authoritarian_democrat popularity = -0.10 }
		add_popularity = { ideology = paternal_autocrat popularity = 0.10 }
		unlock_decision_tooltip = CAN_consolidate_power
		unlock_decision_tooltip = CAN_expand_labour_camps
		unlock_decision_tooltip = CAN_increase_factory_prod
		unlock_decision_tooltip = CAN_fund_the_military
		set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
		add_to_coalition = yes
		CAN_convert_british_pm_slots = yes
		hidden_effect = {
			news_event = { id = canada.114 days = 1 }
		}
	}
}

# News: Conscription Crisis in Quebec
news_event = {
	id = canada.112
	immediate = { log = "[GetLogInfo]: event canada.112" }
	title = canada.112.t
	desc = canada.112.d
	picture = GFX_news_event_CAN_conscription

	is_triggered_only = yes
	major = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = { tag = CAN }
		OR = {
			regional_north_america_news = yes
			regional_europe_news = yes
			is_in_faction_with = CAN
		}
	}

	option = {
		name = canada.112.a
		trigger = {
			is_in_faction_with = CAN
		}
	}
	option = {
		name = canada.112.b
		trigger = {
			NOT = {
				is_in_faction_with = CAN
			}
		}
	}
}

# News: Canada invokes War Measures Act
news_event = {
	id = canada.113
	immediate = { log = "[GetLogInfo]: event canada.113" }
	title = canada.113.t
	desc = canada.113.d
	picture = GFX_news_event_CAN_parliament2

	is_triggered_only = yes
	major = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = { tag = CAN }
		OR = {
			regional_north_america_news = yes
			regional_europe_news = yes
			is_in_faction_with = CAN
		}
	}

	option = {
		name = canada.113.a
		trigger = {
			is_in_faction_with = CAN
		}
	}
	option = {
		name = canada.113.b
		trigger = {
			NOT = {
				is_in_faction_with = CAN
			}
		}
	}
}

# News: Parliament Suspended
news_event = {
	id = canada.114
	immediate = { log = "[GetLogInfo]: event canada.114" }
	title = canada.114.t
	desc = canada.114.d
	picture = GFX_news_event_CAN_parliament

	is_triggered_only = yes
	major = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = { tag = CAN }
		OR = {
			regional_north_america_news = yes
			regional_europe_news = yes
			is_in_faction_with = CAN
		}
	}

	option = {
		name = canada.114.a
		trigger = {
			is_in_faction_with = CAN
		}
	}
	option = {
		name = canada.114.b
		trigger = {
			NOT = {
				is_in_faction_with = CAN
			}
		}
	}
}

# French tensions lessen
country_event = {
	id = canada.115
	title = canada.115.t
	desc = canada.115.d
	picture = GFX_report_event_CAN_montreal

	trigger = {
		tag = CAN
		OR = {
			has_idea = CAN_anglo_french_tensions_1
			has_idea = CAN_anglo_french_tensions_2
			has_idea = CAN_anglo_french_tensions_3
		}
		OR = {
			has_idea = volunteer_only
			has_idea = limited_conscription
		}
		has_country_flag = CAN_C7_passed
		has_elected_government = yes
	}

	mean_time_to_happen = {
		months = 3
		modifier = {
			factor = 0.5
			has_war = no
		}
		modifier = {
			factor = 2
			has_idea = limited_conscription
		}
		modifier = {
			factor = 2
			has_idea = CAN_anglo_french_tensions_2
		}
		modifier = {
			factor = 3
			has_idea = CAN_anglo_french_tensions_3
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.115 option canada.115.a"
		name = canada.115.a
		add_political_power = 25
		if = {
			limit = { has_idea = CAN_anglo_french_tensions_1 }
			swap_ideas = {
				remove_idea = CAN_anglo_french_tensions_1
				add_idea = CAN_anglo_french_tensions_2
			}
		}
		else_if = {
			limit = { has_idea = CAN_anglo_french_tensions_2 }
			swap_ideas = {
				remove_idea = CAN_anglo_french_tensions_2
				add_idea = CAN_anglo_french_tensions_3
			}
		}
		else = {
			remove_ideas = CAN_anglo_french_tensions_3
		}
	}
}

### WAR EVENTS

# Approaching Ireland (fired by decision }
country_event = {
	id = canada.150
	title = canada.150.t
	desc = canada.150.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.150 option canada.150.a"
		name = canada.150.a #Offer them aid for an alliance
		trigger = {
			NOT = { has_global_flag = ENG_CANIRE_support }
		}
		ai_chance = {
			base = 65
			modifier = {
				factor = 0.5
				OR = {
					has_war_with = ENG
					has_war_with = GER
				}
			}
		}
		IRE = {
			country_event = { id = canada.151 days = 3 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.150 option canada.150.b"
		name = canada.150.b #Offer them protection for bases
		trigger = {
			NOT = {
				IRE = { gives_military_access_to = CAN }
			}
		}
		ai_chance = {
			base = 35
			modifier = {
				factor = 0.5
				has_global_flag = ENG_CANIRE_protection
			}
		}
		IRE = {
			country_event = { id = canada.158 days = 3 }
		}
	}
}

# Ireland offered alliance for aid
country_event = {
	id = canada.151
	title = canada.151.t
	desc = canada.151.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	trigger = {
		FROM = {
			is_faction_leader = yes
			has_socialist_government = no
		}
		has_war = no
		is_subject = no
		is_in_faction = no
		has_socialist_government = no
	}

	option = {
		log = "[GetLogInfo]: event canada.151 option canada.151.a"
		name = canada.151.a #We want a guarantee of full independence
		trigger = {
			NOT = { has_global_flag = ENT_britain_agree_northire }
		}
		ai_chance = { base = 80 }
		FROM = {
			country_event = canada.152
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.151 option canada.151.b"
		name = canada.151.b #Accept
		ai_chance = {
			base = 15
			modifier = {
				factor = 5
				has_global_flag = ENT_britain_agree_northire
			}
		}
		FROM = {
			country_event = canada.155
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			effect_tooltip = { add_to_faction = ROOT }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.151 option canada.151.c"
		name = canada.151.c #Refuse
		ai_chance = {
			base = 5
			modifier = {
				factor = 10
				CAN = {
					OR = {
						has_war_with = ENG
						has_war_with = GER
					}
				}
			}
		}
		FROM = {
			country_event = canada.156
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
		}
	}
}

# Ireland wants guarantee of independence
country_event = {
	id = canada.152
	title = canada.152.t
	desc = canada.152.d
	picture = GFX_report_event_IRE_dail_meeting

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.152 option canada.152.a"
		name = canada.152.a #Accept
		ai_chance = { base = 70 }
		add_political_power = -50
		add_to_faction = IRE
		IRE = {
			country_event = canada.153
			hidden_effect = {
				country_event = { id = canada.157 days = 1 }
			}
		}
		hidden_effect = {
			set_country_flag = CAN_promised_ireland_ind
			GBR = { set_country_flag = CAN_promised_ireland_ind }
			every_state = {
				limit = { region = 4 } #Ireland
				clear_variable = ambition_area_GBR
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.152 option canada.152.b"
		name = canada.152.b #Refuse
		ai_chance = { base = 30 }
		IRE = { country_event = canada.154 }
	}
}

# British accept the guarantee
country_event = {
	id = canada.153
	title = canada.153.t
	desc = canada.153.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.153 option canada.153.a"
		name = canada.153.a
		add_opinion_modifier = { target = FROM modifier = KR_approves_of_govt }
		FROM = {
			add_opinion_modifier = { target = FROM modifier = KR_approves_of_govt }
			effect_tooltip = { add_to_faction = ROOT }
		}
	}
}

# British refuse the guarantee
country_event = {
	id = canada.154
	title = canada.154.t
	desc = canada.154.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.154 option canada.154.a"
		name = canada.154.a #Then forget it
		ai_chance = { base = 70 }
		add_political_power = 25
		FROM = { country_event = canada.156 }
	}
	option = {
		log = "[GetLogInfo]: event canada.154 option canada.154.b"
		name = canada.154.b #We'll take it, for now
		ai_chance = { base = 30 }
		FROM = {
			country_event = canada.155
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			effect_tooltip = { add_to_faction = ROOT }
		}
	}
}

# Ireland accepts
country_event = {
	id = canada.155
	title = canada.154.t
	desc = canada.154.d
	picture = GFX_report_event_IRE_dail_meeting

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.155 option canada.155.a"
		name = canada.155.a
		add_to_faction = FROM
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			hidden_effect = {
				country_event = { id = canada.157 days = 1 }
			}
		}
	}
}

# Ireland refuses
country_event = {
	id = canada.156
	title = canada.156.t
	desc = canada.156.d
	picture = GFX_report_event_IRE_dail_meeting

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.156 option canada.156.a"
		name = canada.156.a #Offer them protection for bases instead
		trigger = {
			NOT = {
				IRE = { is_guaranteed_by = CAN }
			}
		}
		ai_chance = { base = 90 }
		FROM = {
			country_event = { id = canada.158 days = 3 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.156 option canada.156.b"
		name = canada.156.b #Fair enough
		ai_chance = { base = 10 }
		add_political_power = 100
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
		}
	}
}

# How does Ireland want to use the aid?
country_event = {
	id = canada.157
	title = canada.157.t
	desc = canada.157.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	trigger = {
		is_in_faction_with = CAN
	}

	option = {
		log = "[GetLogInfo]: event canada.157 option canada.157.a"
		name = canada.157.a #Civilian
		ai_chance = { base = 50 }
		add_timed_idea = {
			idea = CAN_imp_investment_1
			days = 180
		}
		add_one_random_civilian_factory = yes
	}
	option = {
		log = "[GetLogInfo]: event canada.157 option canada.157.b"
		name = canada.157.b #Military
		ai_chance = { base = 35 }
		add_timed_idea = {
			idea = CAN_imp_advisors_1
			days = 180
		}
		add_one_random_military_factory = yes
	}
	option = {
		log = "[GetLogInfo]: event canada.157 option canada.157.c"
		name = canada.157.c #Naval
		ai_chance = { base = 15 }
		add_timed_idea = {
			idea = CAN_iedc_naval1
			days = 180
		}
		add_one_random_dockyard = yes
	}
}

# Ireland offered protection for bases
country_event = {
	id = canada.158
	title = canada.158.t
	desc = canada.158.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	trigger = {
		FROM = {
			is_faction_leader = yes
			has_socialist_government = no
		}
		has_war = no
		is_subject = no
		is_in_faction = no
		has_socialist_government = no
	}

	option = {
		log = "[GetLogInfo]: event canada.158 option canada.158.a"
		name = canada.158.a #Accept
		ai_chance = { base = 80 }
		add_political_power = 50
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			effect_tooltip = {
				if = {
					limit = {
						ROOT = { NOT = { is_guaranteed_by = CAN } }
					}
					give_guarantee = ROOT
				}
				diplomatic_relation = {
					country = ROOT
					relation = military_access
					active = yes
				}
				diplomatic_relation = {
					country = ROOT
					relation = docking_rights
					active = yes
				}
			}
			country_event = canada.159
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.158 option canada.158.b"
		name = canada.158.b #Refuse
		ai_chance = {
			base = 20
			modifier = {
				factor = 2
				NOT = { has_global_flag = ENG_CANIRE_protection }
			}
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = canada.160
		}
	}
}

# Ireland accepts
country_event = {
	id = canada.159
	title = canada.159.t
	desc = canada.159.d
	picture = GFX_report_event_IRE_dail_meeting

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.159 option canada.159.a"
		name = canada.159.a
		add_political_power = 50
		if = {
			limit = {
				FROM = { NOT = { is_guaranteed_by = ROOT } }
			}
			give_guarantee = FROM
		}
		diplomatic_relation = {
			country = FROM
			relation = military_access
			active = yes
		}
		diplomatic_relation = {
			country = FROM
			relation = docking_rights
			active = yes
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
		}
	}
}

# Ireland refuses
country_event = {
	id = canada.160
	title = canada.160.t
	desc = canada.160.d
	picture = GFX_report_event_IRE_dail_meeting

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.160 option canada.160.a"
		name = canada.160.a
		add_political_power = 50
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
		}
	}
}

# Iceland offered bailout for alliance
country_event = {
	id = canada.170
	title = canada.170.t
	desc = canada.170.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.170 option canada.170.a"
		name = canada.170.a #Accept
		ai_chance = { base = 75 }
		if = {
			limit = {
				NOT = { has_idea = ICE_danish_bailout }
			}
			add_timed_idea = {
				idea = ICE_canadian_bailout
				days = 3000
			}
		}
		ICE_improve_economy_2 = yes
		complete_national_focus = ICE_Ottawa_King
		FROM = {
			country_event = canada.171
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			effect_tooltip = { add_to_faction = ROOT }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.170 option canada.170.b"
		name = canada.170.b #Refuse
		ai_chance = {
			base = 25
			modifier = {
				factor = 2
				has_idea = ICE_danish_bailout
			}
		}
		FROM = {
			country_event = canada.172
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
		}
	}
}

# Iceland accepts
country_event = {
	id = canada.171
	title = canada.171.t
	desc = canada.171.d
	picture = GFX_report_event_NOR_parliament

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.171 option canada.171.a"
		name = canada.171.a
		effect_tooltip = { add_to_faction = FROM }
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
		}
	}
}

# Iceland refuses
country_event = {
	id = canada.172
	title = canada.172.t
	desc = canada.172.d
	picture = GFX_report_event_NOR_parliament

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.172 option canada.172.a"
		name = canada.172.a
		add_political_power = 100
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
		}
	}
}

# Funding Icelandic resistance against UoB
country_event = {
	id = canada.173
	title = canada.173.t
	desc = canada.173.d
	picture = GFX_report_event_CAN_army2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.173 option canada.173.a"
		name = canada.173.a
		add_political_power = 50
		hidden_effect = {
			add_to_variable = {
				var = resistance_ICE_strength
				value = 10
			}
		}
	}
}

# the King thinks it's time to attack
country_event = {
	id = canada.174
	title = canada.174.t
	desc = canada.174.d
	picture = GFX_report_event_CAN_army2

	fire_only_once = yes

	trigger = {
		tag = CAN
		has_country_flag = KR_british_king_base
		can_declare_war_on = ENG
		date > 1939.1.1
		OR = {
			ENG = { has_war_with = GER }
			AND = {
				OR = {
					has_tech = transport
					has_tech = mtg_transport
				}
				has_completed_focus = CAN_project_plough
				has_completed_focus = CAN_economic_recovery
				has_completed_focus = CAN_deal_with_admiralty
				has_completed_focus = CAN_new_munitions_plants
			}
			AND = {
				has_authoritarian_government = yes
				has_completed_focus = CAN_project_plough
				has_completed_focus = CAN_economic_recovery
				has_completed_focus = CAN_deal_with_admiralty
			}
		}
		controls_all_owned_states = yes
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		log = "[GetLogInfo]: event canada.174 option canada.174.a"
		name = canada.174.a #Perhaps he's right...
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_authoritarian_government = no
				NOT = {
					AND = {
						OR = {
							has_tech = transport
							has_tech = mtg_transport
						}
						has_completed_focus = CAN_contact_loyalists
						has_completed_focus = CAN_economic_recovery
						has_completed_focus = CAN_deal_with_admiralty
						has_completed_focus = CAN_new_munitions_plants
					}
				}
			}
			modifier = {
				factor = 0
				has_authoritarian_government = no
				has_war = yes
			}
		}
		add_war_support = 0.05
		declare_war_on = {
			target = ENG
			type = annex_everything
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.174 option canada.174.b"
		name = canada.174.b #We will attack when we're ready, no sooner
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_authoritarian_government = yes
			}
		}
		add_war_support = -0.05
	}
}

# Contacting the British Loyalists (fired by decision)
country_event = {
	id = canada.175
	title = canada.175.t
	picture = GFX_report_event_CAN_army2

	desc = {
		text = canada.175.d.scotland
		trigger = {
			ENG = {
				NOT = {
					any_owned_state = {
						OR = {
							region = 1 #Southern England
							region = 2 #Northern England
						}
						is_core_of = ENG
						is_controlled_by = CAN
					}
				}
				any_owned_state = {
					region = 3 #Scotland
					is_core_of = ENG
					NOT = { state = 938 } #Orkney & Shetland
					is_controlled_by = CAN
				}
			}
		}
	}
	desc = {
		text = canada.175.d.england
		trigger = {
			ENG = {
				any_owned_state = {
					OR = {
						region = 1 #Southern England
						region = 2 #Northern England
					}
					is_core_of = ENG
					is_controlled_by = CAN
				}
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			ENG = {
				random_owned_state = {
					limit = {
						is_great_britain = yes
						is_core_of = ENG
						NOT = { state = 938 } #Orkney & Shetland
						is_controlled_by = CAN
					}
					save_event_target_as = invasion_state
				}
			}
			if = {
				limit = { has_template = "Loyalist Rebels" }
				delete_unit_template_and_units = { division_template = "Loyalist Rebels" disband = yes } #no cheating
			}
			if = {
				limit = { has_template = "Loyalist Mountaineers" }
				delete_unit_template_and_units = { division_template = "Loyalist Mountaineers" disband = yes } #no cheating
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.175 option canada.175.a"
		name = canada.175.a
		if = {
			limit = {
				ENG = {
					NOT = {
						any_owned_state = {
							OR = {
								region = 1 #Southern England
								region = 2 #Northern England
							}
							is_core_of = ENG
							is_controlled_by = CAN
						}
					}
					any_owned_state = {
						region = 3 #Scotland
						is_core_of = ENG
						NOT = { state = 938 } #Orkney & Shetland
						is_controlled_by = CAN
					}
				}
			}
			custom_effect_tooltip = CAN_loyalists_spawn_sct
			hidden_effect = { load_oob = "CAN_loyalist_sco" }
		}
		else = {
			custom_effect_tooltip = CAN_loyalists_spawn_eng
			hidden_effect = { load_oob = "CAN_loyalist_eng" }
		}
		event_target:invasion_state = {
			create_unit = {
				division = "name = \"6th Loyalist Volunteers\" division_template = \"Loyalist Rebels\" start_experience_factor = 0.1"
				owner = ROOT
			}
			create_unit = {
				division = "name = \"3rd Loyalist Elite Division\" division_template = \"Loyalist Mountaineers\" start_experience_factor = 1.0"
				owner = ROOT
			}
		}
		hidden_effect = {
			ENG = { country_event = canada.176 }
		}
	}
}

# Informing ENG of uprising
country_event = {
	id = canada.176
	title = canada.176.t
	desc = canada.176.d
	picture = GFX_report_event_CAN_army2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.176 option canada.176.a"
		name = canada.176.a
		add_manpower = -60000
		add_stability = -0.10
		add_timed_idea = {
			idea = CAN_loyalist_uprising
			days = 90
		}
	}
}

# Contacting the Irish Loyalists (fired by decision)
country_event = {
	id = canada.177
	title = canada.177.t
	desc = canada.177.d
	picture = GFX_report_event_CAN_army2

	is_triggered_only = yes

	immediate = {
		var:119.owner = { save_event_target_as = northern_ireland_owner }
	}

	option = {
		log = "[GetLogInfo]: event canada.177 option canada.177.a"
		name = canada.177.a
		if = {
			limit = { NOT = { country_exists = NIR } }
			NIR = {
				save_event_target_as = unionist_uprising
				transfer_state = 119
				declare_war_on = {
					target = event_target:northern_ireland_owner
					type = independence_wargoal
				}
				hidden_effect = {
					if = {
						limit = { has_template = "Irish Loyalist Rebels" }
						delete_unit_template_and_units = { division_template = "Irish Loyalist Rebels" disband = yes } #no cheating
					}
					division_template = {
						name = "Irish Loyalist Rebels"
						division_names_group = IRE_INF_01
						is_locked = yes
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
						}
						support = {
							artillery = { x = 0 y = 0 }
						}
					}
					every_core_state = {
						limit = { owner = { is_ally_with = ENG } }
						set_state_owner_to = PREV
						set_state_province_controller = {
							controller = ENG
							limit = {
								NOT = { has_war_with = ENG }
								NOT = { is_ally_with = ENG }
							}
						}
					}
					add_manpower = 80000
					add_political_power = 100
					add_popularity = { ideology = paternal_autocrat popularity = 0.35 }
					add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2500 producer = CAN }
					set_politics = {
						ruling_party = paternal_autocrat
						elections_allowed = no
					}
					119 = {
						create_unit = {
							division = "name = \"1st Irish Loyalist Division\" division_template = \"Irish Loyalist Rebels\" start_experience_factor = 1.0"
							owner = PREV
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"2nd Irish Loyalist Division\" division_template = \"Irish Loyalist Rebels\" start_experience_factor = 0.1"
							owner = PREV
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"3rd Irish Loyalist Division\" division_template = \"Irish Loyalist Rebels\" start_experience_factor = 0.1"
							owner = PREV
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"4th Irish Loyalist Division\" division_template = \"Irish Loyalist Rebels\" start_experience_factor = 0.1"
							owner = PREV
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"5th Irish Loyalist Division\" division_template = \"Irish Loyalist Rebels\" start_experience_factor = 0.1"
							owner = PREV
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
			}
			add_to_faction = NIR
		}
		else = {
			add_manpower = 80000
			hidden_effect = {
				if = {
					limit = { has_template = "Irish Loyalist Rebels" }
					delete_unit_template_and_units = { division_template = "Irish Loyalist Rebels" disband = yes } #no cheating
				}
			}
			division_template = {
				name = "Irish Loyalist Rebels"
				division_names_group = IRE_INF_01
				is_locked = yes
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
				support = {
					artillery = { x = 0 y = 0 }
				}
			}
			set_state_controller = 119
			119 = {
				teleport_armies = {
					limit = { is_ally_with = event_target:northern_ireland_owner }
					to_state = var:capital
				}
				create_unit = {
					division = "name = \"1st Irish Loyalist Division\" division_template = \"Irish Loyalist Rebels\" start_experience_factor = 1.0"
					owner = ROOT
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"2nd Irish Loyalist Division\" division_template = \"Irish Loyalist Rebels\" start_experience_factor = 0.1"
					owner = ROOT
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"3rd Irish Loyalist Division\" division_template = \"Irish Loyalist Rebels\" start_experience_factor = 0.1"
					owner = ROOT
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"4th Irish Loyalist Division\" division_template = \"Irish Loyalist Rebels\" start_experience_factor = 0.1"
					owner = ROOT
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"5th Irish Loyalist Division\" division_template = \"Irish Loyalist Rebels\" start_experience_factor = 0.1"
					owner = ROOT
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
		event_target:northern_ireland_owner = { country_event = canada.178 }
	}
}

# Informing ENG/IRE of uprising
country_event = {
	id = canada.178
	title = canada.178.t
	desc = canada.178.d
	picture = GFX_report_event_CAN_army2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.178 option canada.178.a"
		name = canada.178.a
		add_stability = -0.05
		add_manpower = -40000
		if = {
			limit = { has_event_target = unionist_uprising }
			effect_tooltip = {
				event_target:unionist_uprising = {
					every_core_state = { set_state_owner_to = event_target:unionist_uprising }
					declare_war_on = {
						target = ROOT
						type = independence_wargoal
					}
				}
				119 = {
					create_unit = {
						division = "division_template = \"Loyalist Rebels\""
						owner = event_target:unionist_uprising
						allow_spawning_on_enemy_provs = yes
						count = 5
					}
				}
				FROM = { add_to_faction = event_target:unionist_uprising }
			}
		}
		else = {
			effect_tooltip = {
				FROM = { set_state_controller = 119 }
				119 = {
					teleport_armies = {
						limit = { is_ally_with = event_target:northern_ireland_owner }
						to_state = var:capital
					}
					create_unit = {
						division = "division_template = \"Loyalist Rebels\""
						owner = FROM
						allow_spawning_on_enemy_provs = yes
						count = 5
					}
				}
			}
		}
	}
}

# UoB resistance collapses
country_event = {
	id = canada.179
	title = canada.179.t
	desc = canada.179.d
	picture = GFX_report_event_CAN_army1

	fire_only_once = yes

	trigger = {
		tag = ENG
		is_in_faction = yes
		has_capitulated = yes
		CAN = { is_faction_leader = yes }
		if = {
			limit = { is_government_in_exile = yes }
			NOT = { has_legitimacy > 20 }
		}
	}

	mean_time_to_happen = {
		days = 10
		modifier = {
			factor = 9
			is_government_in_exile = no
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.179 option canada.179.a"
		name = canada.179.a
		every_subject_country = {
			ROOT = {
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_free
				}
			}
		}
		if = {
			limit = { is_faction_leader = yes }
			dismantle_faction = yes
		}
		else = {
			leave_faction = yes
		}
	}
}

### AMERICAN CIVIL WAR EVENTS

# New England governors ask Canada for intervention (before the ACW begins)
country_event = {
	id = canada.200
	title = canada.200.t
	picture = GFX_report_event_USA_soldiers_running

	desc = {
		text = canada.200.d.assass
		trigger = { USA = { has_country_flag = USA_assassinated_reed } }
	}
	desc = {
		text = canada.200.d.peace
		trigger = { USA = { has_country_flag = USA_ACW_compromise_rejected } }
	}
	desc = {
		text = canada.200.d
		trigger = {
			USA = {
				NOT = {
					has_country_flag = USA_ACW_compromise_rejected
					has_country_flag = USA_assassinated_reed
				}
			}
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.200 option canada.200.a"
		name = canada.200.a
		hidden_effect = {
			set_variable = { refugee_states = 0 }
			country_event = { id = canada.206 days = 60 random_days = 10 } # American trade impacted
			country_event = { id = canada.207 days = 90 random_days = 20 } # Clashes in Windsor
			country_event = { id = canada.210 days = 150 random_days = 20 } # Sympathy Strike for the CSA/AUS
		}
	}
}

# Picking a side (fired by focus)
country_event = {
	id = canada.201
	title = canada.201.t
	picture = GFX_report_event_CAN_parliament1

	desc = {
		text = canada.201.d.csa
		trigger = {
			country_exists = CSA
		}
	}
	desc = {
		text = canada.201.d.nocsa
		trigger = {
			NOT = { country_exists = CSA }
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.201 option canada.201.a"
		name = canada.201.a #We should not get involved
		ai_chance = {
			base = 20
			modifier = {
				factor = 3
				NOT = { country_exists = CSA }
			}
			modifier = {
				factor = 2
				has_war_with = ENG
			}
			modifier = {
				factor = 2
				NOT = {
					has_country_flag = CAN_seized_new_england
					has_country_flag = CAN_seized_alaska
				}
			}
			modifier = {
				factor = 1.5
				has_country_flag = CAN_seized_alaska
				NOT = { has_country_flag = CAN_seized_new_england }
			}
			modifier = {
				factor = 0.5
				country_exists = CSA
				check_variable = { CSA.num_controlled_states > USA.num_controlled_states }
				check_variable = { CSA.num_controlled_states > TEX.num_controlled_states }
				check_variable = { CSA.num_controlled_states > PSA.num_controlled_states }
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_USA }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_PSA }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_NEE }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_TEX }
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_country_flag = CAN_player_support_federal
					has_country_flag = CAN_player_support_pacific
					has_country_flag = CAN_player_support_union
					has_country_flag = CAN_player_support_new_england
				}
			}
		}
		set_country_flag = CAN_supports_noone
		add_stability = 0.05
		add_political_power = 50
	}
	option = {
		log = "[GetLogInfo]: event canada.201 option canada.201.b"
		name = canada.201.b #USA is the legit government
		trigger = {
			country_exists = USA
		}
		ai_chance = {
			base = 25
			modifier = {
				factor = 0.5
				OR = {
					is_in_faction_with = NEE
					owns_state = 932
				}
			}
			modifier = {
				factor = 2
				OR = {
					has_government = social_conservative
					has_authoritarian_government = yes
				}
			}
			modifier = {
				factor = 0.6
				USA = {
					OR = {
						has_country_flag = USA_fails_to_kill_long_flag
						has_country_flag = USA_fails_to_kill_reed_flag
					}
				}
			}
			modifier = {
				factor = 0.4
				USA = {
					OR = {
						has_country_flag = USA_assassinated_reed
						has_country_flag = USA_assassinated_long
					}
				}
			}
			modifier = {
				factor = 1.5
				USA = {
					OR = {
						has_country_flag = USA_ACW_compromise_rejected
						has_country_flag = USA_ACW_austerity_rejected
					}
				}
			}
			modifier = {
				factor = 0.5
				USA = { has_completed_focus = USA_pass_tariff_act }
			}
			modifier = {
				factor = 2
				has_country_flag = USA_compromise_reached
			}
			modifier = {
				factor = 0.5
				OR = {
					check_variable = { USA.num_controlled_states < 5 }
					USA = { surrender_progress > 0.50 }
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_PSA }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_NEE }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_TEX }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_NONE }
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_country_flag = CAN_player_support_no_faction
					has_country_flag = CAN_player_support_pacific
					has_country_flag = CAN_player_support_union
					has_country_flag = CAN_player_support_new_england
				}
			}
		}
		add_war_support = 0.05
		set_country_flag = CAN_supports_USA
		add_ideas = ACW_support_usa
		USA = {
			add_opinion_modifier = { target = CAN modifier = ACW_help_from_entente }
			country_event = canada.220
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.201 option canada.201.c"
		name = canada.201.c #PSA is the legit government
		trigger = {
			country_exists = PSA
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.5
				has_government = social_conservative
			}
			modifier = {
				factor = 0.2
				has_authoritarian_government = yes
			}
			modifier = {
				factor = 0.5
				OR = {
					check_variable = { PSA.num_controlled_states < 5 }
					PSA = { surrender_progress > 0.50 }
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_USA }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_NEE }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_TEX }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_NONE }
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_country_flag = CAN_player_support_no_faction
					has_country_flag = CAN_player_support_federal
					has_country_flag = CAN_player_support_union
					has_country_flag = CAN_player_support_new_england
				}
			}
		}
		add_war_support = 0.05
		set_country_flag = CAN_supports_PSA
		add_ideas = ACW_support_psa
		PSA = {
			add_opinion_modifier = { target = CAN modifier = ACW_help_from_entente }
			country_event = canada.220
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.201 option canada.201.e"
		name = canada.201.e #We support Huey Long
		trigger = {
			country_exists = TEX
			OR = {
				has_country_flag = CAN_player_support_union
				has_authoritarian_government = yes
				NOT = {
					country_exists = USA
					country_exists = PSA
				}
				AND = {
					is_ai = yes
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_TEX }
				}
			}
		}
		ai_chance = {
			base = 5
			modifier = {
				factor = 5
				USA = { has_country_flag = USA_assassinated_reed }
			}
			modifier = {
				factor = 0.5
				OR = {
					check_variable = { TEX.num_controlled_states < 5 }
					TEX = { surrender_progress > 0.50 }
				}
			}
			modifier = {
				factor = 0
				has_elected_government = yes
				NOT = {
					USA = { has_country_flag = USA_assassinated_reed }
					has_country_flag = CAN_player_support_union
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_TEX }
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_PSA }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_NEE }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_TEX }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_NONE }
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_country_flag = CAN_player_support_no_faction
					has_country_flag = CAN_player_support_pacific
					has_country_flag = CAN_player_support_federal
					has_country_flag = CAN_player_support_new_england
				}
			}
		}
		add_war_support = 0.05
		set_country_flag = CAN_supports_TEX
		add_ideas = ACW_support_aus
		TEX = {
			add_opinion_modifier = { target = CAN modifier = ACW_help_from_entente }
			country_event = canada.220
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.201 option canada.201.f"
		name = canada.201.f #We support New England
		trigger = {
			is_in_faction_with = NEE
		}
		ai_chance = {
			base = 20
			modifier = {
				factor = 2
				OR = {
					NOT = { country_exists = USA }
					USA = { surrender_progress > 0.1 }
				}
			}
			modifier = {
				factor = 2
				has_global_flag = USA_PSA_existed
				OR = {
					NOT = { country_exists = PSA }
					PSA = { surrender_progress > 0.1 }
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					country_exists = PSA
					USA = {
						exists = yes
						has_elected_government = yes
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_USA }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_PSA }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_TEX }
					has_game_rule = { rule = CAN_acw_support option = CAN_ACW_SUPPORT_NONE }
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_country_flag = CAN_player_support_no_faction
					has_country_flag = CAN_player_support_pacific
					has_country_flag = CAN_player_support_federal
					has_country_flag = CAN_player_support_union
				}
			}
		}
		add_war_support = 0.05
		set_country_flag = CAN_supports_NEE
		NEE = {
			add_opinion_modifier = { target = CAN modifier = ACW_help_from_entente }
			country_event = canada.220
		}
	}
}

# American refugees flood into state (repeating event)
country_event = {
	id = canada.202
	title = canada.202.t
	desc = canada.202.d
	picture = GFX_report_event_CAN_refugees

	trigger = {
		tag = CAN
		is_subject = no
		has_global_flag = USA_civil_war_begun_flag
		check_variable = { refugee_states < 10 }
		NOT = {
			has_war_with = USA
			has_war_with = CSA
			has_war_with = PSA
			has_war_with = TEX
			has_war_with = NEE
			has_idea = CAN_refugee_crisis_sec
			has_country_flag = CAN_ref_shipped_to_nee
			has_global_flag = USA_civil_war_over_flag
		}
		any_owned_state = {
			is_controlled_by = CAN
			NOT = {
				has_state_flag = CAN_american_refugee_1
				has_state_flag = CAN_american_refugee_2
			}
			any_neighbor_state = {
				state_population_k > 750
				OR = {
					is_owned_by = CSA
					controller = {
						is_american_tag = yes
						NOT = { owns_state = PREV }
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 60
		modifier = {
			factor = 0.5
			check_variable = { refugee_states < 1 }
		}
		modifier = {
			factor = 1.5
			check_variable = { refugee_states > 2 }
		}
	}

	immediate = {
		hidden_effect = {
			random_owned_controlled_state = {
				limit = {
					NOT = {
						has_state_flag = CAN_american_refugee_1
						has_state_flag = CAN_american_refugee_2
					}
					any_neighbor_state = {
						state_population_k > 750
						OR = {
							is_owned_by = CSA
							controller = {
								is_american_tag = yes
								NOT = { owns_state = PREV }
							}
						}
					}
				}
				save_event_target_as = refugee_state
				random_neighbor_state = {
					limit = {
						state_population_k > 750
						OR = {
							is_owned_by = CSA
							controller = {
								is_american_tag = yes
								NOT = { owns_state = PREV }
							}
						}
					}
					save_event_target_as = flee_from_state
				}
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.202 option canada.202.a"
		name = canada.202.a
		event_target:refugee_state = {
			set_state_flag = CAN_american_refugee_1
			add_state_modifier = {
				modifier = {
					local_supplies = -0.20
				}
			}
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_help }
			add_manpower = 7500
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_sam }
			add_manpower = 12500
		}
		hidden_effect = {
			add_to_variable = { refugee_states = 1 }
		}
	}
}

# Even more American refugees flood into state (repeating event)
country_event = {
	id = canada.203
	title = canada.203.t
	desc = canada.203.d
	picture = GFX_report_event_CAN_refugees2

	trigger = {
		tag = CAN
		is_subject = no
		has_global_flag = USA_civil_war_begun_flag
		check_variable = { refugee_states < 10 }
		NOT = {
			has_war_with = USA
			has_war_with = CSA
			has_war_with = PSA
			has_war_with = TEX
			has_war_with = NEE
			has_idea = CAN_refugee_crisis_sec
			has_country_flag = CAN_ref_shipped_to_nee
			has_global_flag = USA_civil_war_over_flag
		}
		any_owned_state = {
			is_controlled_by = CAN
			has_state_flag = CAN_american_refugee_1
			any_neighbor_state = {
				state_population_k > 1250
				OR = {
					is_owned_by = CSA
					controller = {
						is_american_tag = yes
						NOT = { owns_state = PREV }
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 90
		modifier = {
			factor = 1.5
			check_variable = { refugee_states > 2 }
		}
	}

	immediate = {
		hidden_effect = {
			random_owned_controlled_state = {
				limit = {
					has_state_flag = CAN_american_refugee_1
					any_neighbor_state = {
						state_population_k > 1250
						OR = {
							is_owned_by = CSA
							controller = {
								is_american_tag = yes
								NOT = { owns_state = PREV }
							}
						}
					}
				}
				save_event_target_as = refugee_state
				random_neighbor_state = {
					limit = {
						state_population_k > 1250
						OR = {
							is_owned_by = CSA
							controller = {
								is_american_tag = yes
								NOT = { owns_state = PREV }
							}
						}
					}
					save_event_target_as = flee_from_state
				}
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.203 option canada.203.a"
		name = canada.203.a
		event_target:refugee_state = {
			clr_state_flag = CAN_american_refugee_1
			set_state_flag = CAN_american_refugee_2
			add_state_modifier = {
				modifier = {
					local_supplies = -0.20
				}
			}
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_help }
			add_manpower = 7500
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_sam }
			add_manpower = 12500
		}
		hidden_effect = {
			add_to_variable = { refugee_states = 1 }
		}
	}
}

# American refugees are causing issues
country_event = {
	id = canada.204
	title = canada.204.t
	desc = canada.204.d
	picture = GFX_report_event_CAN_refugees

	fire_only_once = yes

	trigger = {
		tag = CAN
		has_global_flag = USA_civil_war_begun_flag
		check_variable = { refugee_states > 2 }
		NOT = {
			has_idea = CAN_refugee_crisis_1
			has_global_flag = USA_civil_war_over_flag
		}
	}

	mean_time_to_happen = {
		days = 30
		modifier = {
			factor = 0.5
			check_variable = { refugee_states > 3 }
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.204 option canada.204.a"
		name = canada.204.a
		add_ideas = CAN_refugee_crisis_1
	}
}

# American refugees are causing bigger issues
country_event = {
	id = canada.205
	title = canada.205.t
	desc = canada.205.d
	picture = GFX_report_event_CAN_refugees3

	fire_only_once = yes

	trigger = {
		tag = CAN
		has_global_flag = USA_civil_war_begun_flag
		has_idea = CAN_refugee_crisis_1
		check_variable = { refugee_states > 5 }
		NOT = {
			has_idea = CAN_refugee_crisis_2
			has_completed_focus = CAN_new_home_of_the_free
			has_global_flag = USA_civil_war_over_flag
		}
	}

	mean_time_to_happen = {
		days = 30
		modifier = {
			factor = 0.5
			check_variable = { refugee_states > 6 }
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.205 option canada.205.a"
		name = canada.205.a
		swap_ideas = {
			remove_idea = CAN_refugee_crisis_1
			add_idea = CAN_refugee_crisis_2
		}
	}
}

# American trade impacted
country_event = {
	id = canada.206
	title = canada.206.t
	desc = canada.206.d
	picture = GFX_report_event_CAN_army1

	is_triggered_only = yes

	trigger = {
		is_subject = no
		NOT = {
			has_war_with = CSA
			has_war_with = TEX
			has_war_with = USA
			has_war_with = PSA
			has_war_with = NEE
			has_global_flag = USA_civil_war_over_flag
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.206 option canada.206.a"
		name = canada.206.a
		add_ideas = CAN_impacted_us_trade
	}
}

# Clashes in Windsor
country_event = {
	id = canada.207
	title = canada.207.t
	desc = canada.207.d
	picture = GFX_report_event_CAN_army2

	is_triggered_only = yes

	trigger = {
		276 = { is_owned_and_controlled_by = CAN }
		CSA = {
			NOT = { has_war_with = CAN }
			owns_state = 393
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.207 option canada.207.a"
		name = canada.207.a
		add_stability = -0.02
		276 = {
			damage_building = {
				type = industrial_complex
				damage = 0.5
			}
		}
	}
}

# Syndicalists in BC (triggered by CSA uprising in Washington)
country_event = {
	id = canada.208
	title = canada.208.t
	desc = canada.208.d
	picture = GFX_report_event_USA_soldiers_running

	is_triggered_only = yes

	trigger = {
		473 = { is_owned_and_controlled_by = CAN }
		NOT = { has_war_with = CSA }
	}

	option = {
		log = "[GetLogInfo]: event canada.208 option canada.208.a"
		name = canada.208.a
		add_stability = -0.02
		473 = {
			damage_building = {
				type = infrastructure
				damage = 1.0
			}
		}
	}
}

# Riot at St. Catherines Refugee Camp
country_event = {
	id = canada.209
	title = canada.209.t
	desc = canada.209.d
	picture = GFX_report_event_GRE_riot

	fire_only_once = yes

	trigger = {
		tag = CAN
		276 = {
			is_owned_and_controlled_by = CAN
			OR = {
				has_state_flag = CAN_american_refugee_1
				has_state_flag = CAN_american_refugee_2
			}
		}
		has_global_flag = USA_civil_war_begun_flag
		NOT = { has_global_flag = USA_civil_war_over_flag }
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		log = "[GetLogInfo]: event canada.209 option canada.209.a"
		name = canada.209.a
		add_stability = -0.02
	}
}

# Sympathy Strike for the CSA/AUS
country_event = {
	id = canada.210
	title = canada.210.t
	picture = GFX_report_event_HOL_february_strike2

	desc = {
		text = canada.210.d.csa
		trigger = { country_exists = CSA }
	}
	desc = {
		text = canada.210.d.aus
		trigger = { NOT = { country_exists = CSA } }
	}

	is_triggered_only = yes

	trigger = {
		OR = {
			country_exists = CSA
			country_exists = TEX
		}
		NOT = {
			has_war_with = CSA
			has_war_with = TEX
			has_war_with = USA
			has_war_with = PSA
			has_war_with = NEE
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.210 option canada.210.a"
		name = canada.210.a
		add_stability = -0.02
		add_war_support = -0.05
		if = {
			limit = { country_exists = CSA }
			add_popularity = { ideology = syndicalist popularity = 0.05 }
		}
		else = {
			add_popularity = { ideology = national_populist popularity = 0.05 }
		}
	}
}

# New Home of the Free (fired by focus)
country_event = {
	id = canada.211
	title = canada.211.t
	picture = GFX_report_event_CAN_parliament1

	desc = {
		text = canada.211.d.nee
		trigger = {
			NEE = { is_subject_of = CAN }
		}
	}
	desc = {
		text = canada.211.d.nonee
		trigger = {
			NOT = {
				NEE = { is_subject_of = CAN }
			}
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.211 option canada.211.a"
		name = canada.211.a # Security is paramount
		trigger = {
			NOT = {
				NEE = { is_subject_of = CAN }
			}
		}
		ai_chance = {
			base = 30
			modifier = {
				factor = 2
				OR = {
					has_government = social_conservative
					has_authoritarian_government = yes
				}
			}
			modifier = {
				factor = 0.5
				has_government = market_liberal
			}
			modifier = {
				factor = 2
				has_political_power < 0
			}
		}
		add_political_power = -50
		set_temp_variable = { ideology_change_var = -0.05 }
		change_ruling_party_popularity = yes
		if = {
			limit = { has_idea = CAN_refugee_crisis_1 }
			swap_ideas = {
				remove_idea = CAN_refugee_crisis_1
				add_idea = CAN_refugee_crisis_sec
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CAN_refugee_crisis_2
				add_idea = CAN_refugee_crisis_sec
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.211 option canada.211.b"
		name = canada.211.b # Ship them to New England
		trigger = {
			NEE = { is_subject_of = CAN }
		}
		ai_chance = {
			base = 30
			modifier = {
				factor = 2
				OR = {
					has_government = social_conservative
					has_authoritarian_government = yes
				}
			}
			modifier = {
				factor = 0.5
				has_government = market_liberal
			}
		}
		set_country_flag = CAN_ref_shipped_to_nee
		add_political_power = -50
		set_temp_variable = { ideology_change_var = -0.05 }
		change_ruling_party_popularity = yes
		if = {
			limit = { has_idea = CAN_refugee_crisis_1 }
			remove_ideas = CAN_refugee_crisis_1
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_2 }
			remove_ideas = CAN_refugee_crisis_2
		}
		NEE = {
			add_opinion_modifier = { target = CAN modifier = KR_disapproves_of_govt }
			country_event = canada.212
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.211 option canada.211.c"
		name = canada.211.c # We need to help them, within reason
		ai_chance = { base = 40 }
		add_political_power = -100
		if = {
			limit = { has_idea = CAN_refugee_crisis_1 }
			swap_ideas = {
				remove_idea = CAN_refugee_crisis_1
				add_idea = CAN_refugee_crisis_help
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CAN_refugee_crisis_2
				add_idea = CAN_refugee_crisis_help
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.211 option canada.211.e"
		name = canada.211.e # enact Project Samaritan
		ai_chance = {
			base = 30
			modifier = {
				factor = 0.5
				has_authoritarian_government = yes
			}
			modifier = {
				factor = 0.5
				has_political_power < 0
			}
		}
		add_political_power = -250
		add_stability = -0.10
		set_temp_variable = { ideology_change_var = 0.05 }
		change_ruling_party_popularity = yes
		if = {
			limit = { has_idea = CAN_refugee_crisis_1 }
			swap_ideas = {
				remove_idea = CAN_refugee_crisis_1
				add_idea = CAN_refugee_crisis_sam
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CAN_refugee_crisis_2
				add_idea = CAN_refugee_crisis_sam
			}
		}
	}
}

# Refugees shipped to New England
country_event = {
	id = canada.212
	title = canada.212.t
	desc = canada.212.d
	picture = GFX_report_event_CAN_refugees2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.212 option canada.212.a"
		name = canada.212.a
		set_country_flag = CAN_directs_refugees
	}
}

# Recruitment of Refugees begins (fired by focus)
country_event = {
	id = canada.213
	title = canada.213.t
	desc = canada.213.d
	picture = GFX_report_event_CAN_army2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.213 option canada.213.a"
		name = canada.213.a
		set_temp_variable = { american_recruit = refugee_states }
		if = {
			limit = { has_idea = CAN_refugee_crisis_help }
			multiply_temp_variable = { american_recruit = 7500 }
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_sam }
			multiply_temp_variable = { american_recruit = 12500 }
		}
		add_manpower = american_recruit?0
	}
}

# American refugees leave for home once ACW is over
country_event = {
	id = canada.214
	title = canada.214.t
	picture = GFX_report_event_CAN_refugees2

	desc = {
		text = canada.214.d.ceasefirecsa
		trigger = {
			country_exists = CSA
			has_global_flag = PSA_rockies_ceasefire
		}
	}
	desc = {
		text = canada.214.d.ceasefirenocsa
		trigger = {
			NOT = { country_exists = CSA }
			has_global_flag = PSA_rockies_ceasefire
		}
	}
	desc = {
		text = canada.214.d.noceasefirecsa
		trigger = {
			country_exists = CSA
			NOT = { has_global_flag = PSA_rockies_ceasefire }
		}
	}
	desc = {
		text = canada.214.d.noceasefirenocsa
		trigger = {
			NOT = { country_exists = CSA }
			NOT = { has_global_flag = PSA_rockies_ceasefire }
		}
	}

	fire_only_once = yes

	trigger = {
		tag = CAN
		OR = {
			has_idea = CAN_refugee_crisis_1
			has_idea = CAN_refugee_crisis_2
			has_idea = CAN_refugee_crisis_sec
			has_idea = CAN_refugee_crisis_help
			has_idea = CAN_refugee_crisis_sam
			check_variable = { refugee_states > 0 }
		}
		has_global_flag = USA_civil_war_over_flag
	}

	option = {
		log = "[GetLogInfo]: event canada.214 option canada.214.a"
		name = canada.214.a
		if = {
			limit = {
				has_completed_focus = CAN_american_recruitment
				OR = {
					has_idea = CAN_refugee_crisis_help
					has_idea = CAN_refugee_crisis_sam
				}
			}
			set_temp_variable = { american_recruit = refugee_states }
			if = {
				limit = { has_idea = CAN_refugee_crisis_help }
				multiply_temp_variable = { american_recruit = -7500 }
			}
			if = {
				limit = { has_idea = CAN_refugee_crisis_sam }
				multiply_temp_variable = { american_recruit = -12500 }
			}
			if = {
				limit = {
					country_exists = CSA
					has_global_flag = PSA_rockies_ceasefire
				}
				multiply_temp_variable = { american_recruit = 0.40 }
			}
			else_if = {
				limit = {
					country_exists = CSA
					NOT = { has_global_flag = PSA_rockies_ceasefire }
				}
				multiply_temp_variable = { american_recruit = 0.20 }
			}
			else = {
				multiply_temp_variable = { american_recruit = 0.60 }
			}
			add_manpower = american_recruit
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_1 }
			remove_ideas = CAN_refugee_crisis_1
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_2 }
			remove_ideas = CAN_refugee_crisis_2
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_sec }
			remove_ideas = CAN_refugee_crisis_sec
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_help }
			remove_ideas = CAN_refugee_crisis_help
		}
		if = {
			limit = { has_idea = CAN_refugee_crisis_sam }
			remove_ideas = CAN_refugee_crisis_sam
		}
		hidden_effect = {
			clear_variable = refugee_states
			every_state = {
				limit = { has_state_flag = CAN_american_refugee_1 }
				clr_state_flag = CAN_american_refugee_1
				add_state_modifier = {
					modifier = {
						local_supplies = 0.20
					}
				}
			}
			every_state = {
				limit = { has_state_flag = CAN_american_refugee_2 }
				clr_state_flag = CAN_american_refugee_2
				add_state_modifier = {
					modifier = {
						local_supplies = 0.40
					}
				}
			}
			NEE = {
				if = {
					limit = { has_idea = CAN_refugee_crisis_2 }
					remove_ideas = CAN_refugee_crisis_2
				}
			}
		}
	}
}

# Visit by the Canadian PM to New England
country_event = {
	id = canada.216
	title = canada.216.t
	desc = canada.216.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.216 option canada.216.a"
		name = canada.216.a #We value their alliance
		ai_chance = {
			base = 50
			modifier = {
				factor = 3
				has_country_flag = CAN_returned_land
			}
			modifier = {
				factor = 1.5
				CAN = {
					any_owned_state = {
						is_claim_or_core_of_ROOT = yes
					}
				}
			}
		}
		every_owned_state = {
			limit = {
				OR = {
					is_core_of = CAN
					is_claimed_by = CAN
				}
				is_claim_or_core_of_ROOT = no
			}
			transfer_state_to = CAN
		}
		CAN = {
			add_opinion_modifier = { target = ROOT modifier = KR_close_allies }
			effect_tooltip = {
				every_owned_state = {
					limit = {
						is_claim_or_core_of_ROOT = yes
						NOT = {
							is_claimed_by = CAN
							is_core_of = CAN
						}
					}
					transfer_state_to = ROOT
				}
				if = {
					limit = {
						is_faction_leader = yes
						ROOT = { is_in_faction = no }
					}
					add_to_faction = ROOT
				}
			}
			country_event = canada.217
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.216 option canada.216.b"
		name = canada.216.b #We are fine as we are
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.2
				is_in_faction_with = CAN
			}
			modifier = {
				factor = 2
				has_country_flag = NEE_refused_home_rule
			}
		}
		CAN = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = canada.218
		}
	}
}

# New England wants to keep alliance
country_event = {
	id = canada.217
	title = canada.217.t
	desc = canada.217.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.217 option canada.217.a"
		name = canada.217.a
		add_political_power = 100
		reverse_add_opinion_modifier = { target = FROM modifier = KR_close_allies }
		every_owned_state = {
			limit = {
				is_claim_or_core_of_FROM = yes
				NOT = {
					is_claimed_by = CAN
					is_core_of = CAN
				}
			}
			transfer_state_to = FROM
		}
		if = {
			limit = {
				is_faction_leader = yes
				FROM = { is_in_faction = no }
			}
			add_to_faction = FROM
		}
	}
}

# New England keeps us at arms length
country_event = {
	id = canada.218
	title = canada.218.t
	desc = canada.218.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.218 option canada.218.a"
		name = canada.218.a
		add_political_power = 50
		reverse_add_opinion_modifier = { target = FROM modifier = KR_disapproves_of_govt }
	}
}

# Entente member informed of support for faction
country_event = {
	id = canada.219
	desc = canada.219.d
	picture = GFX_report_event_CAN_parliament1

	title = {
		text = canada.219.t.usa
		trigger = {
			FROM = { tag = USA }
		}
	}
	title = {
		text = canada.219.t.psa
		trigger = {
			FROM = { tag = PSA }
		}
	}
	title = {
		text = canada.219.t.aus
		trigger = {
			FROM = { tag = TEX }
		}
	}
	title = {
		text = canada.219.t.nee
		trigger = {
			FROM = { tag = NEE }
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.219 option canada.219.a"
		name = canada.219.a
		if = {
			limit = {
				FROM = { tag = USA }
			}
			add_ideas = ACW_support_usa
		}
		else_if = {
			limit = {
				FROM = { tag = PSA }
			}
			add_ideas = ACW_support_psa
		}
		else_if = {
			limit = {
				FROM = { tag = TEX }
			}
			add_ideas = ACW_support_aus
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = ACW_help_from_entente }
		}
	}
}

# ACW Faction informed of Entente support
country_event = {
	id = canada.220
	desc = canada.220.d
	picture = GFX_report_event_CAN_parliament1

	title = {
		text = canada.220.t.usa
		trigger = {
			FROM = { tag = USA }
		}
	}
	title = {
		text = canada.220.t.psa
		trigger = {
			FROM = { tag = PSA }
		}
	}
	title = {
		text = canada.220.t.aus
		trigger = {
			FROM = { tag = TEX }
		}
	}
	title = {
		text = canada.220.t.nee
		trigger = {
			FROM = { tag = NEE }
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.220 option canada.220.a"
		name = canada.220.a
		if = {
			limit = { tag = NEE }
			add_ideas = NEE_canadian_backing
			set_country_flag = NEE_more_likely_independent
			set_temp_variable = { NEE_legitimacy_change = 20 }
			NEE_Change_Legitimacy = yes
		}
		every_other_country = {
			limit = { is_in_faction_with = CAN }
			add_opinion_modifier = { target = ROOT modifier = ACW_entente_helping }
			if = {
				limit = { NOT = { tag = CAN } }
				hidden_effect = { country_event = canada.219 }
			}
		}
		hidden_effect = {
			every_country = {
				limit = {
					is_in_north_america = yes
					NOT = {
						tag = ROOT
						tag = CAN
						is_in_faction_with = CAN
					}
					is_in_central_america = no
				}
				country_event = canada.221
			}
		}
	}
}

# Other countries informed of Entente support
country_event = {
	id = canada.221
	desc = canada.221.d
	picture = GFX_report_event_CAN_parliament1

	title = {
		text = canada.221.t.usa
		trigger = {
			FROM = { tag = USA }
		}
	}
	title = {
		text = canada.221.t.psa
		trigger = {
			FROM = { tag = PSA }
		}
	}
	title = {
		text = canada.221.t.aus
		trigger = {
			FROM = { tag = TEX }
		}
	}
	title = {
		text = canada.221.t.nee
		trigger = {
			FROM = { tag = NEE }
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.221 option canada.221.a"
		name = canada.221.a
		trigger = { is_american_tag = yes }
		add_opinion_modifier = { target = CAN modifier = KR_outraged }
	}
	option = {
		log = "[GetLogInfo]: event canada.221 option canada.221.b"
		name = canada.221.b
		trigger = { is_american_tag = no }
	}
}

# Entente intervenes in the ACW
country_event = {
	id = canada.222
	title = canada.222.t
	desc = canada.222.d
	picture = GFX_report_event_CAN_army1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.222 option canada.222.a"
		name = canada.222.a
		every_country = {
			limit = {
				OR = {
					tag = CAN
					is_in_faction_with = CAN
				}
			}
			hidden_effect = {
				add_opinion_modifier = { target = ROOT 	modifier = KR_approves_of_govt }
				reverse_add_opinion_modifier = { target = ROOT 	modifier = KR_approves_of_govt }
			}
			diplomatic_relation = {
				country = ROOT
				relation = non_aggression_pact
				active = yes
			}
			diplomatic_relation = {
				country = ROOT
				relation = docking_rights
				active = yes
			}
			ROOT = {
				diplomatic_relation = {
					country = PREV
					relation = docking_rights
					active = yes
				}
			}
		}
		hidden_effect = {
			random_other_country = {
				limit = { is_ai = yes }
				news_event = canada.230
			}
		}
	}
}

# CSA becomes aware of possible intervention
country_event = {
	id = canada.223
	title = canada.223.t
	desc = canada.223.d
	picture = GFX_report_event_CAN_parliament1

	fire_only_once = yes

	trigger = {
		tag = CSA
		is_subject = no
		CAN = {
			is_subject = no
			NOT = {
				has_war_with = USA
				has_war_with = PSA
				has_war_with = TEX
				has_war_with = NEE
				has_war_with = CSA
			}
			OR = {
				has_completed_focus = CAN_crossing_the_border
				focus_progress = {
					focus = CAN_crossing_the_border
					progress > 0.25
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		hidden_effect = {
			set_variable = { CAN_strike_cost = 50 }
			CAN = {
				set_variable = { CSA_strikes = 0 }
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.223 option canada.223.a"
		name = canada.223.a
		set_country_flag = CSA_can_delay_canada
		unlock_decision_tooltip = CSA_delay_canadian_intervention
	}
}

# Canada wracked by CSA-sponsored strikes
country_event = {
	id = canada.224

	title = {
		text = canada.224.t.first
		trigger = {
			NOT = { has_variable = CSA_strikes }
		}
	}
	title = {
		text = canada.224.t.later
		trigger = {
			has_variable = CSA_strikes
		}
	}

	desc = {
		text = canada.224.d.first
		trigger = {
			NOT = { has_variable = CSA_strikes }
		}
	}
	desc = {
		text = canada.224.d.later
		trigger = {
			has_variable = CSA_strikes
		}
	}

	picture = GFX_report_event_CAN_strike

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.224 option canada.224.a"
		name = canada.224.a
		add_stability = -0.02
		add_to_variable = { CSA_strikes = 1 }
		add_timed_idea = {
			idea = CAN_csa_strikes
			days = 60
		}
	}
}

# Asking surviving ACW country to join Entente
country_event = {
	id = canada.227
	title = canada.227.t
	picture = GFX_report_event_CAN_parliament1

	desc = {
		text = canada.227.d
		trigger = {
			NOT = {
				any_state = {
					OR = {
						is_owned_by = CAN
						owner = {
							is_ally_with = CAN
							NOT = {
								tag = NEE
								tag = HAW
								tag = PUE
							}
						}
					}
					OR = {
						is_mainland_america = yes
						state = 463 #Alaska
						state = 629 #Hawaii
						state = 685 #Panama Canal
						state = 686 #Puerto Rico
					}
				}
			}
		}
	}
	desc = {
		text = canada.227.d.owned
		trigger = {
			any_state = {
				OR = {
					is_owned_by = CAN
					owner = {
						is_ally_with = CAN
						NOT = {
							tag = NEE
							tag = HAW
							tag = PUE
						}
					}
				}
				OR = {
					is_mainland_america = yes
					state = 463 #Alaska
					state = 629 #Hawaii
					state = 685 #Panama Canal
					state = 686 #Puerto Rico
				}
			}
		}
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.227 option canada.227.a"
		name = canada.227.a #Yes
		trigger = {
			NOT = { has_government = national_populist }
		}
		ai_chance = {
			base = 80
			modifier = {
				factor = 1.4
				has_country_flag = USA_agreed_nee_rejoin
			}
			modifier = {
				factor = 1.2
				USA = { has_country_flag = USA_compromise_reached }
			}
			modifier = {
				factor = 1.2
				CAN = { has_country_flag = CAN_supports_@ROOT }
			}
			modifier = {
				factor = 0
				tag = USA
				OR = {
					has_game_rule = { rule = USA_forpol option = USA_FORPOL_NEUTRAL }
					has_game_rule = { rule = USA_forpol option = USA_FORPOL_MONROE }
				}
			}
			modifier = {
				factor = 0
				tag = TEX
				OR = {
					has_game_rule = { rule = TEX_forpol option = TEX_FORPOL_NEUTRAL }
					has_game_rule = { rule = TEX_forpol option = TEX_FORPOL_PAX_AMERICANA }
					has_game_rule = { rule = TEX_forpol option = TEX_FORPOL_GER }
				}
			}
			modifier = {
				factor = 0
				tag = PSA
				OR = {
					has_game_rule = { rule = PSA_forpol option = PSA_FORPOL_NEUTRAL }
					has_game_rule = { rule = PSA_forpol option = PSA_FORPOL_JAP }
				}
			}
		}
		effect_tooltip = {
			every_state = {
				limit = {
					OR = {
						is_owned_by = CAN
						owner = {
							is_ally_with = CAN
							NOT = {
								tag = NEE
								tag = HAW
								tag = PUE
							}
						}
					}
					OR = {
						is_mainland_america = yes
						state = 463 #Alaska
						state = 629 #Hawaii
						state = 685 #Panama Canal
						state = 686 #Puerto Rico
					}
				}
				transfer_state_to = ROOT
			}
		}
		if = {
			limit = { has_idea = USA_league_head_1 }
			remove_ideas = USA_league_head_1
		}
		else_if = {
			limit = { has_idea = USA_league_head_1 }
			remove_ideas = USA_league_head_1
		}
		else_if = {
			limit = { has_idea = USA_league_head_1 }
			remove_ideas = USA_league_head_1
		}
		every_country = {
			limit = {
				OR = {
					has_idea = USA_league_of_america_1
					has_idea = USA_league_of_america_2
				}
			}
			USA_remove_from_league_of_american_states = yes
		}
		CAN = {
			effect_tooltip = { add_to_faction = ROOT }
			country_event = canada.228
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.227 option canada.227.b"
		name = canada.227.b #No
		ai_chance = {
			base = 20
			modifier = {
				factor = 2
				CAN = {
					NOT = {
						has_country_flag = CAN_supports_@ROOT
					}
					OR = {
						has_country_flag = CAN_supports_USA
						has_country_flag = CAN_supports_PSA
						has_country_flag = CAN_supports_TEX
					}
				}
			}
			modifier = {
				factor = 1.5
				CAN = {
					NOT = {
						has_country_flag = CAN_supports_USA
						has_country_flag = CAN_supports_PSA
						has_country_flag = CAN_supports_TEX
					}
				}
			}
			modifier = {
				factor = 1.5
				USA = { has_country_flag = USA_no_compromise_reached }
			}
			modifier = {
				factor = 2
				has_country_flag = USA_refused_entente_demand
			}
			modifier = {
				factor = 3
				has_country_flag = USA_refused_nee_rejoin
			}
			modifier = {
				factor = 0
				tag = USA
				has_game_rule = { rule = USA_forpol option = USA_FORPOL_ENT }
			}
			modifier = {
				factor = 0
				tag = TEX
				has_game_rule = { rule = TEX_forpol option = TEX_FORPOL_ENT }
			}
			modifier = {
				factor = 0
				tag = PSA
				has_game_rule = { rule = PSA_forpol option = PSA_FORPOL_ENT }
			}
		}
		CAN = {
			country_event = canada.229
		}
	}
}

# ACW country agrees
country_event = {
	id = canada.228
	title = canada.228.t
	desc = canada.228.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.228 option canada.228.a"
		name = canada.228.a
		add_political_power = 100
		add_to_faction = FROM
		every_state = {
			limit = {
				OR = {
					is_owned_by = CAN
					owner = {
						is_ally_with = CAN
						NOT = {
							tag = NEE
							tag = HAW
							tag = PUE
						}
					}
				}
				OR = {
					is_mainland_america = yes
					state = 463 #Alaska
					state = 629 #Hawaii
					state = 685 #Panama Canal
					state = 686 #Puerto Rico
				}
			}
			if = {
				limit = { is_claimed_by = CAN }
				remove_claim_by = CAN
			}
			transfer_state_to = FROM
		}
	}
}

# ACW country refuses
country_event = {
	id = canada.229
	title = canada.229.t
	desc = canada.229.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.229 option canada.229.a"
		name = canada.229.a
		add_political_power = 50
	}
}

# News: Canada Intervenes in ACW
news_event = {
	id = canada.230
	immediate = { log = "[GetLogInfo]: event canada.230" }
	title = canada.230.t
	desc = canada.230.d
	picture = GFX_news_event_canadian_soldiers

	is_triggered_only = yes
	major = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = { tag = FROM }
		OR = {
			regional_north_america_news = yes
			is_in_faction_with = CAN
		}
	}

	option = {
		name = canada.230.a
		trigger = {
			is_in_faction_with = CAN
		}
	}
	option = {
		name = canada.230.b
		trigger = {
			has_war_with = FROM
		}
	}
	option = {
		name = canada.230.c
		trigger = {
			NOT = {
				has_war_with = FROM
				is_in_faction_with = CAN
			}
		}
	}
}

# Denmark: Canada seizes Greenland
country_event = {
	id = canada.231
	title = canada.231.t
	desc = canada.231.d
	picture = GFX_report_event_CAN_army1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.231 option canada.231.a"
		name = canada.231.a
		add_opinion_modifier = { target = FROM modifier = KR_hates_govt }
	}
}

# Player Entente member is consulted about Canadian ACW support
country_event = {
	id = canada.232
	title = canada.232.t
	desc = canada.232.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.232 option canada.232.a"
		name = canada.232.a #The Entente should not support a faction
		CAN = {
			set_country_flag = CAN_player_support_no_faction
			hidden_effect = {
				country_event = canada.201
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.232 option canada.232.b"
		name = canada.232.b #Support the Federal government
		trigger = { country_exists = USA }
		CAN = {
			set_country_flag = CAN_player_support_federal
			hidden_effect = {
				country_event = canada.201
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.232 option canada.232.c"
		name = canada.232.c #Support the Pacific government
		trigger = { country_exists = PSA }
		CAN = {
			set_country_flag = CAN_player_support_pacific
			hidden_effect = {
				country_event = canada.201
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.232 option canada.232.e"
		name = canada.232.e #Support the Union government
		trigger = { country_exists = TEX }
		CAN = {
			set_country_flag = CAN_player_support_union
			hidden_effect = {
				country_event = canada.201
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.232 option canada.232.f"
		name = canada.232.f #Support New England
		trigger = { is_in_faction_with = NEE }
		CAN = {
			set_country_flag = CAN_player_support_new_england
			hidden_effect = {
				country_event = canada.201
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.232 option canada.232.g"
		name = canada.232.g #Canada can make its own decision
		CAN = {
			hidden_effect = {
				country_event = canada.201
			}
		}
	}
}

### Post-War Events

# UK has been restored
country_event = {
	id = canada.300
	title = canada.300.t
	desc = canada.300.d
	picture = GFX_report_event_CAN_fleeing

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.300 option canada.300.a"
		name = canada.300.a
		add_war_support = -0.20
		add_timed_idea = {
			idea = CAN_british_exodus
			days = 365
		}
		hidden_effect = {
			if = {
				limit = {
					is_subject = no
					OR = {
						has_government = authoritarian_democrat
						has_government = paternal_autocrat
					}
				}
				country_event = { id = canada.301 days = 3 }
			}
			else = {
				set_party_name = {
					ideology = authoritarian_democrat
					long_name = CAN_social_credit_party_long
					name = CAN_social_credit_party
				}
			}
			country_event = {
				id = canada_flavour.1
				days = 100
				random = 80
			}
		}
	}
}

# Restoring civilian government in Canada
country_event = {
	id = canada.301
	title = canada.301.t
	desc = canada.301.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	trigger = {
		is_subject = no
		OR = {
			has_government = authoritarian_democrat
			has_government = paternal_autocrat
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.301 option canada.301.a"
		name = canada.301.a
		if = {
			limit = { has_government = authoritarian_democrat }
			set_country_flag = CAN_was_authdem
			add_popularity = { ideology = authoritarian_democrat popularity = -0.20 }
		}
		if = {
			limit = { has_government = paternal_autocrat }
			set_country_flag = CAN_was_pataut
			add_popularity = { ideology = paternal_autocrat popularity = -0.20 }
		}
		if = {
			limit = { social_conservative < 0.40 }
			add_popularity = { ideology = social_conservative popularity = 0.10 }
		}
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_conservative
					last_election = "[CURRENT_DATE]"
					election_frequency = 12
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		CAN_add_conservative_second_in_command = yes
		hidden_effect = {
			set_party_name = {
				ideology = authoritarian_democrat
				long_name = CAN_social_credit_party_long
				name = CAN_social_credit_party
			}
		}
	}
}

# The Canadian Governor General (fired by UK focus)
country_event = {
	id = canada.302
	title = canada.302.t
	desc = canada.302.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_in_faction_with = GBR
			CAN_is_dominion = yes
		}
	}

	option = { # appoint Prince Albert
		log = "[GetLogInfo]: event canada.302 option canada.302.a"
		name = canada.302.a
		trigger = { ENT_king_edward_viii = yes }
		ai_chance = { base = 60 }
		CAN = {
			set_country_flag = CAN_gov_gen_albert
			country_event = canada.303
		}
	}
	option = { # appoint Lord Mountbatten
		log = "[GetLogInfo]: event canada.302 option canada.302.b"
		name = canada.302.b
		ai_chance = { base = 40 }
		add_political_power = 50
		effect_tooltip = { GBR_louis_mountbatten = { set_nationality = CAN } }
		CAN = {
			set_country_flag = CAN_gov_gen_mountbatten
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = canada.303
		}
	}
	option = { # appoint John Vereker
		log = "[GetLogInfo]: event canada.302 option canada.302.c"
		name = canada.302.c
		ai_chance = { base = 20 }
		add_political_power = 30
		effect_tooltip = { GBR_john_vereker = { set_nationality = CAN } }
		CAN = {
			set_country_flag = CAN_gov_gen_vereker
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = canada.303
		}
	}
	option = { # Appoint a Canadian
		log = "[GetLogInfo]: event canada.302 option canada.302.e"
		name = canada.302.e
		ai_chance = { base = 30 }
		add_political_power = -50
		CAN = {
			set_country_flag = CAN_gov_gen_mcnaughton
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			country_event = canada.303
		}
	}
}

# Canada gets its new Governor General
country_event = {
	id = canada.303
	title = canada.303.t
	picture = GFX_report_event_royal_parade

	desc = {
		text = canada.303.d.albert
		trigger = { has_country_flag = CAN_gov_gen_albert }
	}
	desc = {
		text = canada.303.d.mountbatten
		trigger = { has_country_flag = CAN_gov_gen_mountbatten }
	}
	desc = {
		text = canada.303.d.vereker
		trigger = { has_country_flag = CAN_gov_gen_vereker }
	}
	desc = {
		text = canada.303.d.mcnaughton
		trigger = { has_country_flag = CAN_gov_gen_mcnaughton }
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = { has_country_flag = CAN_gov_gen_albert }
				GBR = { GBR_albert_windsor = { set_nationality = ROOT } }
			}
			else_if = {
				limit = { has_country_flag = CAN_gov_gen_mountbatten }
				GBR = { GBR_louis_mountbatten = { set_nationality = ROOT } }
			}
			else_if = {
				limit = { has_country_flag = CAN_gov_gen_vereker }
				GBR = { GBR_john_vereker = { set_nationality = ROOT } }
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.303 option canada.303.a"
		name = canada.303.a
		if = {
			limit = { has_country_flag = CAN_gov_gen_albert }
			effect_tooltip = {
				meta_effect = {
					text = {
						add_country_leader_role = {
							character = GBR_albert_windsor
							country_leader = {
								ideology = [IDEOLOGY]
								desc = GBR_albert_windsor_leader_desc_governor_CAN
							}
							promote_leader = yes
						}
					}
					IDEOLOGY = "[ROOT.GetRulingIdeologySubtype]"
				}
			}
			hidden_effect = {
				GBR_albert_windsor = {
					remove_all_country_leader_roles = yes
					add_country_leader_role = {
						country_leader = {
							ideology = social_democrat_subtype
							desc = GBR_albert_windsor_leader_desc_governor_CAN
						}
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = {
							ideology = social_liberal_subtype
							desc = GBR_albert_windsor_leader_desc_governor_CAN
						}
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = {
							ideology = market_liberal_subtype
							desc = GBR_albert_windsor_leader_desc_governor_CAN
						}
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = {
							ideology = social_conservative_subtype
							desc = GBR_albert_windsor_leader_desc_governor_CAN
						}
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = {
							ideology = authoritarian_democrat_subtype
							desc = GBR_albert_windsor_leader_desc_governor_CAN
						}
						promote_leader = yes
					}
					add_country_leader_role = {
						country_leader = {
							ideology = paternal_autocrat_subtype
							desc = GBR_albert_windsor_leader_desc_governor_CAN
						}
						promote_leader = yes
					}
				}
			}
		}
		else_if = {
			limit = { has_country_flag = CAN_gov_gen_mountbatten }
			add_political_power = -50
			subtract_from_variable = { CAN_was_king_popularity = 1 }
			GBR_louis_mountbatten = {
				add_country_leader_role = {
					country_leader = { ideology = social_democrat_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = social_liberal_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = market_liberal_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = social_conservative_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = authoritarian_democrat_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = paternal_autocrat_subtype }
					promote_leader = yes
				}
			}
		}
		else_if = {
			limit = { has_country_flag = CAN_gov_gen_vereker }
			add_political_power = -30
			subtract_from_variable = { CAN_was_king_popularity = 1 }
			GBR_john_vereker = {
				add_country_leader_role = {
					country_leader = { ideology = social_democrat_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = social_liberal_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = market_liberal_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = social_conservative_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = authoritarian_democrat_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = paternal_autocrat_subtype }
					promote_leader = yes
				}
			}
		}
		else_if = {
			limit = { has_country_flag = CAN_gov_gen_mcnaughton }
			add_political_power = 50
			CAN_andrew_mccaughton = {
				add_country_leader_role = {
					country_leader = { ideology = social_democrat_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = social_liberal_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = market_liberal_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = social_conservative_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = authoritarian_democrat_subtype }
					promote_leader = yes
				}
				add_country_leader_role = {
					country_leader = { ideology = paternal_autocrat_subtype }
					promote_leader = yes
				}
			}
		}
	}
}

# Debate on the referendum begins (fired by focus)
country_event = {
	id = canada.304
	title = canada.304.t
	desc = canada.304.d
	picture = GFX_report_event_CAN_commons2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.304 option canada.304.a"
		name = canada.304.a
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_completed_focus = CAN_suppress_quebecois
						has_completed_focus = CAN_war_measures_act
					}
				}
				country_event = { id = canada.305 days = 8 random_hours = 72 }
			}
			if = {
				limit = { check_variable = { CAN_was_king_popularity < 2 } }
				country_event = { id = canada.306 days = 15 random_hours = 72 }
			}
			else = {
				country_event = { id = canada.307 days = 15 random_hours = 72 }
			}
			country_event = { id = canada.308 days = 20 random_hours = 72 }
			if = {
				limit = { has_completed_focus = CAN_war_measures_act }
				country_event = { id = canada.309 days = 25 random_hours = 72 }
			}
			else = {
				country_event = { id = canada.310 days = 25 random_hours = 72 }
			}
		}
	}
}

# Anti-Monarchy Demonstrations in Quebec (if suppressed)
country_event = {
	id = canada.305
	title = canada.305.t
	desc = canada.305.d
	picture = GFX_report_event_CAN_quebec1

	is_triggered_only = yes

	trigger = {
		is_subject = no
		has_elected_government = yes
		OR = {
			466 = { is_owned_and_controlled_by = CAN }
			468 = { is_owned_and_controlled_by = CAN }
			832 = { is_owned_and_controlled_by = CAN }
		}
	}

	option = {
		log = "[GetLogInfo]: event canada.305 option canada.305.a"
		name = canada.305.a
		add_stability = -0.05
	}
}

# March on Rideau Hall (if 1 pop)
country_event = {
	id = canada.306
	title = canada.306.t
	desc = canada.306.d
	picture = GFX_report_event_CAN_rideau

	is_triggered_only = yes

	trigger = {
		is_subject = no
		has_elected_government = yes
		739 = { is_owned_and_controlled_by = CAN }
	}

	option = {
		log = "[GetLogInfo]: event canada.306 option canada.306.a"
		name = canada.306.a
		add_stability = -0.05
	}
}

# Support for the King (if 2+ pop)
country_event = {
	id = canada.307
	title = canada.307.t
	desc = canada.307.d
	picture = GFX_report_event_CAN_crowd2

	is_triggered_only = yes

	trigger = {
		is_subject = no
		has_elected_government = yes
		276 = { is_owned_and_controlled_by = CAN }
	}

	option = {
		log = "[GetLogInfo]: event canada.307 option canada.307.a"
		name = canada.307.a
		add_stability = -0.05
	}
}

# Address by the King
country_event = {
	id = canada.308
	title = canada.308.t
	desc = canada.308.d
	picture = GFX_report_event_CAN_microphone

	is_triggered_only = yes

	trigger = {
		is_subject = no
		has_elected_government = yes
	}

	option = {
		log = "[GetLogInfo]: event canada.308 option canada.308.a"
		name = canada.308.a
		add_stability = 0.02
	}
}

# The Fleming Inquiry (if WMA invoked)
country_event = {
	id = canada.309
	title = canada.309.t
	picture = GFX_report_event_generic_reporters

	desc = {
		text = canada.309.d.wma
		trigger = { has_country_flag = CAN_was_authdem }
	}
	desc = {
		text = canada.309.d.pataut
		trigger = { has_country_flag = CAN_was_pataut }
	}

	is_triggered_only = yes

	trigger = {
		is_subject = no
		has_elected_government = yes
	}

	option = {
		log = "[GetLogInfo]: event canada.309 option canada.309.a"
		name = canada.309.a
		if = {
			limit = { has_country_flag = CAN_was_authdem }
			add_political_power = -50
		}
		else = {
			add_political_power = -100
		}
		add_stability = -0.05
	}
}

# PM Calls for Unity (if no WMA invoked)
country_event = {
	id = canada.310
	title = canada.310.t
	desc = canada.310.d
	picture = GFX_report_event_CAN_cabinet

	is_triggered_only = yes

	trigger = {
		is_subject = no
		has_elected_government = yes
	}

	option = {
		log = "[GetLogInfo]: event canada.310 option canada.310.a"
		name = canada.310.a
		add_stability = 0.02
		hidden_effect = {
			every_other_country = {
				limit = {
					is_in_faction_with = ROOT
					CAN_is_commonwealth_tag = yes
				}
				country_event = { id = canada.311 days = 1 }
			}
		}
	}
}

# Allies informed of impending vote
country_event = {
	id = canada.311
	title = canada.311.t
	desc = canada.311.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.311 option canada.311.a"
		name = canada.311.a #Campaign hard for them to remain
		trigger = { tag = GBR }
		add_political_power = -100
		hidden_effect = {
			CAN = { set_country_flag = CAN_british_campaign_vote }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.311 option canada.311.b"
		name = canada.311.b #It's their decision
		trigger = { tag = GBR }
	}
	option = {
		log = "[GetLogInfo]: event canada.311 option canada.311.c"
		name = canada.311.c
		trigger = { NOT = { tag = GBR } }
	}
}

# The Referendum
country_event = {
	id = canada.315
	title = canada.315.t
	desc = canada.315.d
	picture = GFX_report_event_CAN_election

	is_triggered_only = yes

	trigger = {
		is_subject = no
		has_elected_government = yes
	}

	option = {
		log = "[GetLogInfo]: event canada.315 option canada.315.a"
		name = canada.315.a #Cut ties with the monarchy
		ai_chance = {
			base = 30
			modifier = {
				factor = 0
				has_game_rule = { rule = CAN_referendum option = CAN_REFERENDUM_EMPIRE }
			}
			modifier = {
				factor = 1.5
				check_variable = { CAN_was_king_popularity < 3 }
			}
			modifier = {
				factor = 1.5
				check_variable = { CAN_was_king_popularity < 2 }
			}
			modifier = {
				factor = 1.2
				has_completed_focus = CAN_suppress_quebecois
				OR = {
					466 = { is_owned_and_controlled_by = CAN }
					468 = { is_owned_and_controlled_by = CAN }
					832 = { is_owned_and_controlled_by = CAN }
				}
			}
			modifier = {
				factor = 1.5
				has_country_flag = CAN_was_authdem
			}
			modifier = {
				factor = 2
				has_country_flag = CAN_was_pataut
			}
		}
		clr_country_flag = CAN_british_campaign_vote
		clr_country_flag = CAN_was_authdem
		clr_country_flag = CAN_was_pataut
		add_political_power = -200
		add_stability = -0.20
		custom_effect_tooltip = CAN_becomes_republic
		if = {
			limit = { WIF = { is_subject_of = CAN } }
			set_autonomy = {
				target = WIF
				autonomy_state = autonomy_free
			}
		}
		if = {
			limit = { AST = { is_subject_of = CAN } }
			set_autonomy = {
				target = AST
				autonomy_state = autonomy_free
			}
		}
		if = {
			limit = { NZL = { is_subject_of = CAN } }
			set_autonomy = {
				target = NZL
				autonomy_state = autonomy_free
			}
		}
		effect_tooltip = { set_cosmetic_tag = CAN }
		hidden_effect = {
			CAN_create_republic = yes
			news_event = { id = canada.316 days = 1 }
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.315 option canada.315.b"
		name = canada.315.b #We are a loyal member of the Empire
		ai_chance = {
			base = 70
			modifier = {
				factor = 0
				has_game_rule = { rule = CAN_referendum option = CAN_REFERENDUM_REPUBLIC }
			}
			modifier = {
				factor = 1.5
				check_variable = { CAN_was_king_popularity > 2 }
			}
			modifier = {
				factor = 1.5
				check_variable = { CAN_was_king_popularity > 3 }
			}
			modifier = {
				factor = 2
				check_variable = { CAN_was_king_popularity > 4 }
			}
			modifier = {
				factor = 1.2
				has_completed_focus = CAN_new_quebec_status
				OR = {
					466 = { is_owned_and_controlled_by = CAN }
					468 = { is_owned_and_controlled_by = CAN }
					832 = { is_owned_and_controlled_by = CAN }
				}
			}
			modifier = {
				factor = 1.2
				has_country_flag = CAN_gov_gen_mcnaughton
			}
			modifier = {
				factor = 1.5
				has_country_flag = CAN_british_campaign_vote
			}
		}
		clr_country_flag = CAN_british_campaign_vote
		clr_country_flag = CAN_was_authdem
		clr_country_flag = CAN_was_pataut
		set_country_flag = CAN_loyal_to_britain
		add_political_power = 100
		add_stability = 0.05
		hidden_effect = {
			news_event = { id = canada.317 days = 1 }
		}
	}
}

# News: Canada cuts ties with the monarchy
news_event = {
	id = canada.316
	immediate = { log = "[GetLogInfo]: event canada.316" }
	title = canada.316.t
	desc = canada.316.d
	picture = GFX_news_event_CAN_parliament

	is_triggered_only = yes
	major = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = { tag = CAN }
		OR = {
			regional_north_america_news = yes
			regional_europe_news = yes
			is_in_faction_with = CAN
		}
	}

	option = {
		name = canada.316.a
		trigger = {
			OR = {
				tag = CAN
				tag = GBR
				is_in_faction_with = GBR
			}
		}
	}
	option = {
		name = canada.316.b
		trigger = {
			NOT = {
				tag = CAN
				tag = GBR
				is_in_faction_with = GBR
			}
		}
	}
}

# News: Canada referendum fails
news_event = {
	id = canada.317
	immediate = { log = "[GetLogInfo]: event canada.317" }
	title = canada.317.t
	desc = canada.317.d
	picture = GFX_news_event_CAN_parliament

	is_triggered_only = yes
	major = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		OR = {
			regional_north_america_news = yes
			tag = GBR
			is_in_faction_with = GBR
		}
	}

	option = {
		name = canada.317.a
		trigger = {
			OR = {
				tag = CAN
				tag = GBR
				is_in_faction_with = GBR
			}
		}
	}
	option = {
		name = canada.317.b
		trigger = {
			NOT = {
				tag = CAN
				tag = GBR
				is_in_faction_with = GBR
			}
		}
	}
}

# Quebec nationalists win provincial election
country_event = {
	id = canada.318
	title = canada.318.t
	desc = canada.318.d
	picture = GFX_report_event_CAN_quebec2

	fire_only_once = yes

	trigger = {
		tag = CAN
		is_subject = no
		has_elected_government = yes
		owns_state = 466 #Quebec
		OR = {
			has_completed_focus = CAN_canadian_referendum
			has_completed_focus = CAN_loyalty_to_the_empire
		}
		NOT = { has_completed_focus = CAN_new_quebec_status }
		has_country_flag = CAN_loyal_to_britain
		controls_all_owned_states = yes
	}

	mean_time_to_happen = {
		months = 4
	}

	option = {
		log = "[GetLogInfo]: event canada.318 option canada.318.a"
		name = canada.318.a
		add_stability = -0.05
		add_popularity = { ideology = national_populist popularity = 0.05 }
		hidden_effect = {
			country_event = { id = canada.319 days = 30 random_days = 30 }
		}
	}
}

# The Question of Quebec Autonomy
country_event = {
	id = canada.319
	title = canada.319.t
	desc = canada.319.d
	picture = GFX_report_event_CAN_quebec2

	is_triggered_only = yes

	trigger = {
		is_subject = no
		has_elected_government = yes
		owns_state = 466 #Quebec
		controls_all_owned_states = yes
	}

	option = {
		log = "[GetLogInfo]: event canada.319 option canada.319.a"
		name = canada.319.a #Refuse
		ai_chance = {
			base = 60
			modifier = {
				factor = 1.5
				OR = {
					has_government = social_conservative
					has_government = national_populist
				}
			}
			modifier = {
				factor = 0.5
				has_government = social_democrat
			}
		}
		add_political_power = -300
		add_stability = -0.20
	}
	option = {
		log = "[GetLogInfo]: event canada.319 option canada.319.b"
		name = canada.319.b #Grant them autonomy
		ai_chance = {
			base = 30
			modifier = {
				factor = 0.5
				has_government = social_conservative
			}
			modifier = {
				factor = 2
				has_government = social_liberal
			}
		}
		add_political_power = -100
		add_stability = -0.5
		every_owned_state = {
			limit = {
				OR = {
					state = 332 #Labrador
					state = 466 #Saguenay
					state = 468 #Saint Lawrence
					state = 832 #Quebec
				}
			}
			remove_core_of = CAN
			transfer_state_to = QUE
		}
		332 = { add_claim_by = QUE }
		QUE = { get_current_government_type = yes }
		puppet = QUE
		if = {
			limit = { is_in_faction_with = ENT }
			ENT = { add_to_faction = QUE }
		}
		QUE = {
			restore_previous_government_type = yes
			hidden_effect = {
				add_political_power = 100
				add_opinion_modifier = { target = CAN modifier = KR_close_allies }
				reverse_add_opinion_modifier = { target = CAN modifier = KR_close_allies }
				news_event = { id = canada.320 days = 1 }
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event canada.319 option canada.319.c"
		name = canada.319.c #Full independence
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				OR = {
					has_government = social_conservative
					has_government = national_populist
				}
			}
		}
		add_political_power = -200
		add_stability = 0.05
		every_owned_state = {
			limit = {
				OR = {
					state = 332 #Labrador
					state = 466 #Saguenay
					state = 468 #Saint Lawrence
					state = 832 #Quebec
				}
			}
			remove_core_of = CAN
			transfer_state_to = QUE
		}
		332 = { add_claim_by = QUE }
		diplomatic_relation = {
			country = QUE
			relation = docking_rights
			active = yes
		}
		give_guarantee = QUE
		QUE = {
			give_military_access = CAN
			hidden_effect = {
				add_political_power = 100
				add_opinion_modifier = { target = CAN modifier = KR_close_allies }
				reverse_add_opinion_modifier = { target = CAN modifier = KR_close_allies }
				diplomatic_relation = {
					country = CAN
					relation = docking_rights
					active = yes
				}
				news_event = { id = canada.320 days = 1 }
			}
		}
	}
}

# News: Quebec achieves sovereignty
news_event = {
	id = canada.320
	immediate = { log = "[GetLogInfo]: event canada.320" }
	title = canada.320.t
	picture = GFX_news_event_generic_sign_treaty3

	desc = {
		text = canada.320.d.puppet
		trigger = { QUE = { is_subject_of = CAN } }
	}
	desc = {
		text = canada.320.d.free
		trigger = { QUE = { NOT = { is_subject_of = CAN } } }
	}

	is_triggered_only = yes
	major = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = { tag = CAN }
		OR = {
			regional_north_america_news = yes
			regional_europe_news = yes
			is_in_faction_with = CAN
		}
	}

	option = {
		name = canada.320.a
		trigger = {
			tag = CAN
		}
	}
	option = {
		name = canada.320.b
		trigger = {
			tag = QUE
		}
	}
	option = {
		name = canada.320.c
		trigger = {
			NOT = {
				tag = CAN
				tag = QUE
			}
		}
	}
}

# Patriation of the Canadian Constitution (fired by focus)
country_event = {
	id = canada.321
	title = canada.321.t
	desc = canada.321.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.321 option canada.321.a"
		name = canada.321.a
		add_political_power = 100
	}
}

# The Birth of Canadian nationalism (fired by focus)
country_event = {
	id = canada.322
	title = canada.322.t
	desc = canada.322.d
	picture = GFX_report_event_CAN_crowd2

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.322 option canada.322.a"
		name = canada.322.a
		add_war_support = 0.10
		add_popularity = { ideology = national_populist popularity = 0.05 }
		unlock_decision_tooltip = CAN_claim_alaska
		unlock_decision_tooltip = CAN_claim_washington
		unlock_decision_tooltip = CAN_claim_maine
		hidden_effect = {
			country_event = { id = canada.325 days = 60 }
		}
	}
}

# News: Canada withdraws from the Entente
news_event = {
	id = canada.323
	immediate = { log = "[GetLogInfo]: event canada.323" }
	title = canada.323.t
	desc = canada.323.d
	picture = GFX_news_event_CAN_parliament

	is_triggered_only = yes
	major = yes

	trigger = {
		wants_world_news = yes
	}

	option = {
		name = canada.323.a
		trigger = { tag = CAN }
	}
	option = {
		name = canada.323.b
		trigger = {
			OR = {
				tag = ENT
				is_in_faction_with = ENT
			}
		}
	}
	option = {
		name = canada.323.c
		trigger = {
			NOT = {
				tag = CAN
				tag = ENT
				is_in_faction_with = ENT
			}
		}
	}
}

# Canada claims a state
country_event = {
	id = canada.324
	title = canada.324.t
	desc = canada.324.d
	picture = GFX_report_event_CAN_army1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.324 option canada.324.a"
		name = canada.324.a
		add_opinion_modifier = { target = FROM modifier = KR_hates_govt }
		if = {
			limit = { gives_military_access_to = FROM }
			FROM = {
				diplomatic_relation = {
					country = ROOT
					relation = military_access
					active = no
				}
			}
		}
		if = {
			limit = { FROM = { gives_military_access_to = ROOT } }
			diplomatic_relation = {
				country = FROM
				relation = military_access
				active = no
			}
		}
		if = {
			limit = { has_non_aggression_pact_with = FROM }
			diplomatic_relation = {
				country = FROM
				relation = non_aggression_pact
				active = no
			}
		}
	}
}

# Growth of the Nationalist Party
country_event = {
	id = canada.325
	title = canada.325.t
	desc = canada.325.d
	picture = GFX_report_event_generic_rally

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.325 option canada.325.a"
		name = canada.325.a
		add_popularity = { ideology = national_populist popularity = 0.1 }
	}
}

# Canadian investments in Britain (fired by focus)
country_event = {
	id = canada.326
	title = canada.326.t
	desc = canada.326.d
	picture = GFX_report_event_generic_factory

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event canada.326 option canada.326.a"
		name = canada.326.a
		add_ideas = CAN_canadian_investments_1
	}
}

# New officers for Canada (fired by focus)
country_event = {
	id = canada.327
	title = canada.327.t
	desc = canada.327.d
	picture = GFX_report_event_british_inspect_troops

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event canada.327 option canada.327.a"
		name = canada.327.a
		show_unit_leaders_tooltip = CAN_john_hamilton_roberts
		show_unit_leaders_tooltip = CAN_harry_leonard_nowell_salmon
		show_unit_leaders_tooltip = CAN_george_kitching
		show_unit_leaders_tooltip = CAN_garner_ormsby_currie
		show_unit_leaders_tooltip = CAN_horatio_nelson_lay
		hidden_effect = {
			CAN_john_hamilton_roberts = { set_nationality = ROOT }
			CAN_harry_leonard_nowell_salmon = { set_nationality = ROOT }
			CAN_george_kitching = { set_nationality = ROOT }
			CAN_garner_ormsby_currie = { set_nationality = ROOT }
			CAN_horatio_nelson_lay = { set_nationality = ROOT }
		}
	}
}

### Flavour

country_event = {
	id = canada_flavour.1
	title = canada_flavour.1.t
	desc = canada_flavour.1.d
	picture = GFX_report_event_CAN_their_finest_hour
	is_triggered_only = yes


	option = {
		log = "[GetLogInfo]: event canada.5 option canada_flavour.1.a"
		name = canada_flavour.1.a
	}
}
